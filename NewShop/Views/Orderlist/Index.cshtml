@{
    Layout = "~/Views/Shared/_LayoutOrderlist.cshtml";
   
   // Layout = "~/Views/Shared/_Layoutnavigationbar.cshtml";
    //Layout = "~/Views/Shared/_LayoutStatus.cshtml";
    //Layout = "~/Views/Shared/View3.cshtml";
    //Layout = "~/Views/Shared/_LayoutPage.cshtml";
  

}
<html class="no-js" lang="">
<head>
    <meta charset="utf-8">
    <title></title>
    <meta name="description" content="">
    @*<meta name="viewport" content="width=device-width, initial-scale=1">*@
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">

     <!-- <link rel="manifest" href="~/html5boilerplate_v8/site.webmanifest">-->
   
    <link rel="apple-touch-icon" href="icon.png">
    <!-- Place favicon.ico in the root directory -->
  
    <link href="~/html5boilerplate_v8/css/main.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/html5boilerplate_v8/css/normalize.css">
    <link rel="stylesheet" href="~/html5boilerplate_v8/css/main.css">
    <meta name="theme-color" content="#fafafa">
    <link href="~/html5boilerplate_v8/css/sidebar.css" rel="stylesheet" />
    <!------ Include the above in your HEAD tag ---------->
    <script src="~/SortTable-master/sort-table.js"></script>

        <style>

             .collapsed-icon-toggle.collapsed .on-closed {
            display: initial;
             }

        .collapsed-icon-toggle.collapsed .on-opened {
            display: none;
        }

        .collapsed-icon-toggle .on-closed {
            display: none;
        }

        .collapsed-icon-toggle .on-opened {
            display: initial;
        }

        .scroll-v-250px {
            max-height: 250px;
            overflow-y: scroll;
        }

        .padding-v-xs {
            padding-top: 2px;
            padding-bottom: 2px;
        }

        .btn.ico span.icon {
            opacity: 0;
        }

        .btn.ico.active span.icon {
            opacity: 1;
        }
        </style>
        <style>
            #second-element {
                visibility: hidden;
            }
            .tableFixHead {
                /*overflow-y: auto;
                height: 1000px;*/
            }

                .tableFixHead thead th {
                    position: sticky;
                    top: 0;
                }

            table {
                border-collapse: collapse;
                width: 100%;
            }

            th,
            td {
                padding: 8px 16px;
                border: 1px solid #ccc;
            }

            th {
                background: #eee;
            }
            .rat__qun {
                color: #FFFFFF;
                background-color: #4CAF50;
                /*float: right;
                margin-right: 470px;*/
            }
            .rat__sp {
                color: #FFFFFF;
                background-color: #1c6c65;
                /*float: right;
                margin-right: 470px;*/
            }
            .fa fa-star-half-o {
                color: yellow;
                -webkit-text-stroke-width: 1px;
                -webkit-text-stroke-color: orange;
            }
            /*#sidebar{
                font-size:larger;
            }*/
            .clabl {
                font: unset;
                font-weight: bold;
                font-size: small;
            }
            .panel-bodydis {
                padding: 0px;
            }
            .line {
                margin-top: 0px;
                margin-bottom: 0px;
                border: 0;
                border-top: 1px solid #eee;
            }
            #_btnlinkdetail {
                color: -webkit-link;
                cursor: pointer;
                text-decoration: underline;
                color: #007bff;
             
                background-color: transparent;
                -webkit-text-decoration-skip: objects;
            }
        </style>
    </head>


 <body>
  
     <!-- Add your site or application content here -->
      <!--<p>Hello world! This is HTML5 Boilerplate.</p> -->
    <script src="~/html5boilerplate_v8/js/vendor/modernizr-3.11.2.min.js"></script>
    <script src="~/html5boilerplate_v8/js/plugins.js"></script>
    <script src="~/html5boilerplate_v8/js/main.js"></script>
   
   @*<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>*@
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    
    <link href="~/bootstrap-4.0.0/dist/css/bootstrap.css" rel="stylesheet" />
  
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
     @*<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>*@
     <script src="~/bootstrap/bootstrap3_4_1.js"></script>
     <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
     <link href="~/bootstrap-select-1.13.14/dist/css/bootstrap-select.css" rel="stylesheet" />
     <script src="~/bootstrap-select-1.13.14/dist/js/bootstrap-select.js"></script>


     <script src="~/Loadingmodal/js/modal-loading.js"></script>
     <link href="~/Loadingmodal/css/modal-loading-animate.css" rel="stylesheet" />
     <link href="~/Loadingmodal/css/modal-loading.css" rel="stylesheet" />
     <script src="~/Scripts/webAddress.js"></script>
     <script src="~/Scripts/CheckFuntion/Loginexpire.js"></script>

     <link href="~/tmartcss/JSautocomplete/jquery-ui.css" rel="stylesheet" />
     <script src="~/tmartcss/JSautocomplete/jquery-ui-1.9.2.js"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>
    
     <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet" />
     <script src="~/fixed-table-master/fixed-table.js"></script>
     <link href="~/fixed-table-master/fixed-table.css" rel="stylesheet" />
    <div class="page-wrapper chiller-theme toggled">
        <a id="show-sidebar" class="btn btn-sm btn-dark" href="#" style="z-index: 9999;">
            <i class="fas fa-bars"></i>
        </a>
        <nav id="sidebar" class="sidebar-wrapper">
            <div class="sidebar-content">
                <div class="sidebar-brand">
                    <a href="#"><i class="fa fa-circle text-success"></i> Online</a>
                    <a class="navbar-brand p-0 mr-5" href="#"><img src="~/images/logo/AACTAC185x70.jpg" style="width: 91px;" /></a>
                    <div id="close-sidebar">
                        <i class="fas fa-times"></i>
                    </div>
                    
                </div>
     
                
                <div class="panel-bodydis  scrollable">
                   
                    <div class="panel-group">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" href="#filter1">
                                        Filter
                                    </a>
                                    <a class="pull-right" data-toggle="collapse" href="#filter1">
                                        <span class="glyphicon glyphicon-filter"></span>
                                    </a>
                                </h4>
                            </div>
                            <div id="filter1" class="panel-collapse collapse in">
                                <div class="panel-body">
                                    @*<label>แสดงตัวกรอง</label>*@
                                    <div class="filter-setting">
                                        <form>
                                           
                                            <div class="col-md-6">
                                                <button type="button" class="btn btn-block btn-warning" id="searchbox">
                                                    <span class="glyphicon">Search  </span>
                                                </button>
                                            </div>
                                            <div class="col-md-6">
                                                <button type="button" class="btn btn-block btn-secondary" id="crsearchbox">
                                                    <span class="glyphicon">ClearFilter</span>
                                                </button>
                                            </div>
                                           <br />
                                            <label class="clabl">ค้นหาเบอร์สินค้า</label>
                                            <a class="pull-right collapsed-icon-toggle" href="#coll-0" data-toggle="collapse">
                                                <span class="glyphicon glyphicon-minus on-opened"></span>
                                                <span class="glyphicon glyphicon-plus on-closed"></span>
                                            </a>
                                            <br />
                                            <div id="coll-0" class="collapse in">
                                                <select class="form-control-lg" data-container="body" data-live-search="false" data-hide-disabled="true" id="optionsearch">
                                                    <option value="1">ค้นหาแบบอิสระ</option>
                                                    <option value="2">ค้นหาแบบเจาะจงเบอร์</option>

                                                </select>
                                                <input type="search" id="textfree" placeholder="ค้นหาสินค้าที่คุณต้องการได้ที่นี่..." class="form-control ui-autocomplete-input" autocomplete="off">
                                                <input type="search" id="textfreeoe" placeholder="ค้นหาเบอร์OEที่คุณต้องการได้ที่นี่..." class="form-control ui-autocomplete-input" autocomplete="off">
                                            </div>
                                            <hr class="line" />
                                            <label class="clabl">ประเภทรถยนต์(segment)</label>
                                            <a class="pull-right collapsed-icon-toggle" href="#coll-1" data-toggle="collapse">
                                                <span class="glyphicon glyphicon-minus on-opened"></span>
                                                <span class="glyphicon glyphicon-plus on-closed"></span>
                                            </a>
                                            <br />

                                            <div id="coll-1" class="collapse in">
                                                <div class="padding-v-xs" data-toggle="buttons">

                                                    <select class="selectpicker form-control p-2 bg-warning" data-container="body" data-live-search="true" data-hide-disabled="true" id="segment"></select>

                                                </div>

                                            </div>
                                            <hr class="line" />
                                            <label class="clabl">หมวดสินค้า(Product Group)</label>
                                            <a class="pull-right collapsed-icon-toggle" href="#coll-2" data-toggle="collapse">
                                                <span class="glyphicon glyphicon-minus on-opened"></span>
                                                <span class="glyphicon glyphicon-plus on-closed"></span>
                                            </a>
                                            <br />
                                            <div id="coll-2" class="scroll-v-250px collapse in">
                                                <select class="selectpicker form-control p-2 bg-warning" data-container="body" name="selValuebproductgroup" data-live-search="true" data-hide-disabled="true" id="productgroup"></select>
                                            </div>
                                            <hr class="line" />
                                            <label class="clabl">ประเภทสินค้า(Product Line)</label>
                                            <a class="pull-right collapsed-icon-toggle" href="#coll-3" data-toggle="collapse">
                                                <span class="glyphicon glyphicon-minus on-opened"></span>
                                                <span class="glyphicon glyphicon-plus on-closed"></span>
                                            </a>
                                            <br />
                                            <div id="coll-3" class="scroll-v-250px collapse in">
                                                <div class="padding-v-xs" data-toggle="buttons">
                                                    <select class="selectpicker form-control p-2 bg-warning" data-container="body" name="selValuebproductline" data-live-search="true" data-hide-disabled="true" id="productline"></select>

                                                </div>
                                            </div>
                                            <hr class="line" />
                                            <label class="clabl">Brand</label>
                                            <a class="pull-right collapsed-icon-toggle" href="#coll-4" data-toggle="collapse">
                                                <span class="glyphicon glyphicon-minus on-opened"></span>
                                                <span class="glyphicon glyphicon-plus on-closed"></span>
                                            </a>
                                            <br />
                                            <div id="coll-4" class="scroll-v-250px collapse in">
                                                <div class="padding-v-xs" data-toggle="buttons">
                                                    <select class="selectpicker form-control p-2 bg-warning" name="selValuebrand" data-container="body" data-live-search="true" data-hide-disabled="true" id="brand"></select>

                                                </div>
                                            </div>
                                            <hr class="line" />
                                            <label class="clabl">ยี่ห้อรถ(Maker)</label>
                                            <a class="pull-right collapsed-icon-toggle" href="#coll-5" data-toggle="collapse">
                                                <span class="glyphicon glyphicon-minus on-opened"></span>
                                                <span class="glyphicon glyphicon-plus on-closed"></span>
                                            </a>
                                            <br />
                                            <div id="coll-5" class="scroll-v-250px collapse in">
                                                <div class="padding-v-xs" data-toggle="buttons">
                                                    <select class="selectpicker form-control bg-primary" data-container="body" data-live-search="true" data-hide-disabled="true" id="maker"></select>

                                                </div>
                                                <label class="clabl">รุ่น(Model)</label>
                                                <br />
                                              
                                                    <div class="padding-v-xs" data-toggle="buttons">
                                                        <select class="selectpicker form-control bg-primary" data-container="body" data-live-search="true" data-hide-disabled="true" id="Model"></select>

                                                        <select class="form-control custom-select bg-primary" id="submodel" style="display:none">
                                                            <option selected value="">Submodel</option>
                                                        </select>
                                                    </div>
                                              
                                            </div>
                                            
                                            <hr class="line" />



                                            <label class="clabl">Company</label>
                                            <a class="pull-right collapsed-icon-toggle" href="#coll-6" data-toggle="collapse">
                                                <span class="glyphicon glyphicon-minus on-opened"></span>
                                                <span class="glyphicon glyphicon-plus on-closed"></span>
                                            </a>
                                             <br />
                                            <div id="coll-6" class="scroll-v-250px collapse in">
                                                <div class="padding-v-xs" data-toggle="buttons">

                                                    <select class="form-control-lg" data-container="body" data-live-search="false" data-hide-disabled="true" id="company"></select>
                                                </div>
                                            </div>
                                                <hr class="line" />
                                                <label class="clabl">Group</label>
                                                <a class="pull-right collapsed-icon-toggle" href="#coll-7" data-toggle="collapse">
                                                    <span class="glyphicon glyphicon-minus on-opened"></span>
                                                    <span class="glyphicon glyphicon-plus on-closed"></span>
                                                </a>
                                                <br />
                                                <div id="coll-7" class="scroll-v-250px collapse in">
                                                    <div class="padding-v-xs" data-toggle="buttons">
                                                        <select class="selectpicker form-control" data-container="body" data-live-search="true" data-hide-disabled="true" id="catalogue"></select>

                                                    </div>
                                                </div>
                                                <hr class="line" />
                                          
                                                @*<div class="col-md-6">
                                                    <button type="button" class="btn btn-block btn-warning" id="searchbox">
                                                        <span class="glyphicon">Search  </span>
                                                    </button>
                                                </div>
                                                <div class="col-md-6">
                                                    <button type="button" class="btn btn-block btn-secondary" id="crsearchbox">
                                                        <span class="glyphicon">ClearFilter</span>
                                                    </button>
                                                </div>*@
                                         
                                               
                                               

</form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                    <!-- sidebar-header  -->
                     <!-- <div class="sidebar-search">
                        <div>
                            <div class="input-group">
                                <input type="text" class="form-control search-menu" placeholder="Search...">
                                <div class="input-group-append">
                                    <span class="input-group-text">
                                        <i class="fa fa-search" aria-hidden="true"></i>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>-->
                    <!-- sidebar-search  -->
                   <!--  <div class="sidebar-menu">
                        <ul>
                            <li class="header-menu">
                                <span>General</span>
                            </li>
                            <li class="sidebar-dropdown">
                                <a href="#">
                                    <i class="fa fa-tachometer-alt"></i>
                                    <span>Dashboard</span>
                                    <span class="badge badge-pill badge-warning">New</span>
                                </a>
                                <div class="sidebar-submenu">
                                    <ul>
                                        <li>
                                            <a href="#">
                                                Dashboard 1
                                                <span class="badge badge-pill badge-success">Pro</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#">Dashboard 2</a>
                                        </li>
                                        <li>
                                            <a href="#">Dashboard 3</a>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                            <li class="sidebar-dropdown">
                                <a href="#">
                                    <i class="fa fa-shopping-cart"></i>
                                    <span>E-commerce</span>
                                    <span class="badge badge-pill badge-danger">3</span>
                                </a>
                                <div class="sidebar-submenu">
                                    <ul>
                                        <li>
                                            <a href="#">
                                                Products

                                            </a>
                                        </li>
                                        <li>
                                            <a href="#">Orders</a>
                                        </li>
                                        <li>
                                            <a href="#">Credit cart</a>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                            <li class="sidebar-dropdown">
                                <a href="#">
                                    <i class="far fa-gem"></i>
                                    <span>Components</span>
                                </a>
                                <div class="sidebar-submenu">
                                    <ul>
                                        <li>
                                            <a href="#">General</a>
                                        </li>
                                        <li>
                                            <a href="#">Panels</a>
                                        </li>
                                        <li>
                                            <a href="#">Tables</a>
                                        </li>
                                        <li>
                                            <a href="#">Icons</a>
                                        </li>
                                        <li>
                                            <a href="#">Forms</a>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                            <li class="sidebar-dropdown">
                                <a href="#">
                                    <i class="fa fa-chart-line"></i>
                                    <span>Charts</span>
                                </a>
                                <div class="sidebar-submenu">
                                    <ul>
                                        <li>
                                            <a href="#">Pie chart</a>
                                        </li>
                                        <li>
                                            <a href="#">Line chart</a>
                                        </li>
                                        <li>
                                            <a href="#">Bar chart</a>
                                        </li>
                                        <li>
                                            <a href="#">Histogram</a>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                            <li class="sidebar-dropdown">
                                <a href="#">
                                    <i class="fa fa-globe"></i>
                                    <span>Maps</span>
                                </a>
                                <div class="sidebar-submenu">
                                    <ul>
                                        <li>
                                            <a href="#">Google maps</a>
                                        </li>
                                        <li>
                                            <a href="#">Open street map</a>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                            <li class="header-menu">
                                <span>Extra</span>
                            </li>
                            <li>
                                <a href="#">
                                    <i class="fa fa-book"></i>
                                    <span>Documentation</span>
                                    <span class="badge badge-pill badge-primary">Beta</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <i class="fa fa-calendar"></i>
                                    <span>Calendar</span>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <i class="fa fa-folder"></i>
                                    <span>Examples</span>
                                </a>
                            </li>
                        </ul>
                    </div> -->
                    <!-- sidebar-menu  -->
                </div>
            <!-- sidebar-content  -->
            <div class="sidebar-footer">
               <!--   <a href="#">
                    <i class="fa fa-bell"></i>
                    <span class="badge badge-pill badge-warning notification">3</span>
                </a>
                <a href="#">
                    <i class="fa fa-envelope"></i>
                    <span class="badge badge-pill badge-success notification">7</span>
                </a>
                <a href="#">
                    <i class="fa fa-cog"></i>
                    <span class="badge-sonar"></span>
                </a>
                <a href="#">
                    <i class="fa fa-power-off"></i>
                </a> -->
            </div>
        </nav>
        <!-- sidebar-wrapper  -->
        <main class="page-content">
           

                 <div>
             
               
                <div class="form-group">
                    <div class="col-md-4">

                            <div class="cd-select cd-filters">
                                <select class="form-control-lg" id="sortby">
                                    <option selected value="0">Sort by </option>
                                    <option value="1">Favorite Item</option>
                                    <option value="2">New Item</option>
                                    <option value="3">Maker,Model</option>
                                    <option value="4">Item No</option>
                                    <option value="5">Description</option>
                                    <option value="6">Pricelist</option>
                                </select>
                            </div>
                      
                    </div>
                    <div class="col-md-2">
                     
                    </div>
                    <div class="col-md-4">
                       
                            <div class="form-group">
                                <div class="input-group ">
                                    <span class="col-sm-4 input-group-addon" style="float: initial;padding: 0px 0px;">
                                        <button type="button" id="btncheck" class="btn btn-warning">
                                            จำนวนสินค้าในตระกร้า
                                        </button>
                                    </span>
                                    <span class="col-sm-4 input-group-addon" style="float: initial;padding: 0px 0px;"><i><i id="Cuitem" style="color:crimson; font-size: large; font: icon;">0</i>ชิ้น</i></span>
                                    <span class="col-sm-4 input-group-addon" style="float: initial;padding: 0px 0px;"><i><i id="Cuqty" style="color: crimson; font-size: large; font: icon;">0</i> เบอร์</i></span>
                                </div>
                            </div>
                       
                    </div>
                </div>
                </div>
              
             <div class="form-group col-md-12 content">
                     
                        <div class="col-md-6 sort">
                            <h2>รายการสินค้า</h2>
                        </div>
                 <div class="col-md-4" @*style="float: right;"*@>
                     <div class="form-group">
                         <div class="input-group ">

                             <span>
                                 <button type="submit" id="btnsubmitinsert" class="fa fa-shopping-cart  btn btn-success btn-large" style="width: 200px;">Add To Cart </button>
                             </span>


                         </div>
                     </div>


                 </div>
                       
                 <div class="form-group col-md-12 content">
                   

                 
                     @*<p>This is a responsive sidebar template with dropdown menu based on bootstrap 4 framework.</p>
            <p>
                You can find the complete code on <a href="https://github.com/azouaoui-med/pro-sidebar-template" target="_blank">
                    Github
                </a>, it contains more themes and background image option
            </p>*@
                     <div class="table-responsive">
                         @*<div class="tableFixHead">*@
                         <table class="js-sort-table table table-hover shopping-cart-wrap" id="fixed-table-container-1">
                             <thead class="text-muted">
                                 <tr>
                                     <th scope="col">Product</th>
                                     <th scope="col" width="120" class="js-sort-input" title="class=&quot;js-sort-input&quot;">Quantity</th>
                                     <th scope="col" width="120">Price</th>
                                     <th scope="col" width="200">Line Note</th>
                                 </tr>
                             </thead>
                             <tbody></tbody>
                         </table>
                     </div>
                 </div>
                      
                     
              </div>
            <hr>
           
        </main>
        <!-- page-content" -->
    </div>
     <!-- ModalWarning -->
     <div class="modal fade" id="myModalWarning" role="dialog">
         <div class="modal-dialog">
             <div class="alert alert-warning alert-dismissible" role="alert">
                 <button type="button" class="close" data-dismiss="modal" aria-label=" close"><span aria-hidden="true">&times;</span></button>
                 <strong>Warning!</strong>
                 <div class="modal-body">
                     <div id="textAlertWarning">Some text in the modal.</div>
                 </div>

             </div>
         </div>
     </div>
     <!-- ModalWarning -->
     <!-- ModalWarning -->
     <div class="modal" id="myModalWarninglog" role="dialog">
         <div class="modal-dialog">
             <div class="alert alert-warning alert-dismissible" role="alert">
                 <button type="button" class="close" data-dismiss="modal" aria-label=" close"><span aria-hidden="true">&times;</span></button>
                 <strong>Warning!</strong>
                 <div class="modal-body">
                     <div id="textAlertWarninglog">Some text in the modal.</div>
                 </div>
             </div>
         </div>
     </div>
     <!-- Modalsuccess -->
     <div class="modal" id="myModalSucces" role="dialog">
         <div class="modal-dialog">
             <div class="alert alert-success alert-dismissible" role="alert">
                 <button type="button" class="close" data-dismiss="modal" aria-label=" close"><span aria-hidden="true">&times;</span></button>
                 <strong>Succes</strong>
                 <div class="modal-body">
                     <div id="textAlertSucces">Save success</div>
                 </div>

             </div>
         </div>
     </div>
     <!-- EndModalsuccess -->


     <!-- page-wrapper -->
     <div id="classModal" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="classInfo" aria-hidden="true">
         <div class="modal-dialog modal-lg">
             <div class="modal-content">
                 <div class="modal-header">
                     <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                         ×
                     </button>
                     
                 </div>
                 <div class="modal-body">
                     <strong>Detail</strong>
                     <table id="classTable" class="table table-bordered">
                         <thead>
                               <tr>
                                   <th>No.</th>
                                   <th>Stockcode</th>
                                   <th>Qty</th>
                                   <th>Status Upload</th>
                                   <th>Status Message</th>
                               </tr>
                         </thead>
                         <tbody>
                           
                         </tbody>
                     </table>
                 </div>
                 <div class="modal-footer">
                     <button type="button" class="btn btn-primary" data-dismiss="modal">
                         Close
                     </button>
                 </div>
             </div>
         </div>
     </div>
  
     <!-- Modal -->

     <div class="modal" id="myModal" style="background-color: black;">

         <div class="modal-dialog" role="document" style="width: 360px;">

             <div class="modal-content">

                 <div class="modal-header" style="background-color: #337AB7; padding: 16px 16px; color: #FFF; border-bottom: 2px dashed #337AB7; ">

                     @*<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>*@

                     <h4 class="modal-title" id="myModalLabel"></h4>

                 </div>

                 <div class="modal-body" id="texterror">
                 </div>

                 <div class="modal-footer">

                     @*<button type="button" class="btn btn btn-primary" data-dismiss="modal">OK</button>*@

                     <button type="button" class="btn btn btn-success" data-dismiss="modal" id="btnlogin">เข้าสู่ระบบอีกครั้ง</button>

                     @*<button type="button" class="btn btn-orange" data-dismiss="modal">Cancel</button>*@

                 </div>

             </div>

         </div>

     </div>
   
    
    <script type="text/javascript">
       
        window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
        ga('create', 'UA-XXXXX-Y', 'auto'); ga('set', 'anonymizeIp', true); ga('set', 'transport', 'beacon'); ga('send', 'pageview')

        jQuery(function ($) {

            $(".sidebar-dropdown > a").click(function () {
                $(".sidebar-submenu").slideUp(200);
                if (
                  $(this)
                    .parent()
                    .hasClass("active")
                ) {
                    $(".sidebar-dropdown").removeClass("active");
                    $(this)
                      .parent()
                      .removeClass("active");
                } else {
                    $(".sidebar-dropdown").removeClass("active");
                    $(this)
                      .next(".sidebar-submenu")
                      .slideDown(200);
                    $(this)
                      .parent()
                      .addClass("active");
                }
            });

            $("#close-sidebar").click(function () {
                $(".page-wrapper").removeClass("toggled");
            });
            $("#show-sidebar").click(function () {
                $(".page-wrapper").addClass("toggled");
            });

        });
        var id = '@Request.RequestContext.HttpContext.Session["ID"]';
        var userid = '@Request.RequestContext.HttpContext.Session["UserID"]';
        var usertype = '@Request.RequestContext.HttpContext.Session["UserType"]';
        var usercode = '@Request.RequestContext.HttpContext.Session["CUSCOD"]';
        var usrexpire = '@Request.RequestContext.HttpContext.Session["expdatecal"]';
        expire(usrexpire)
       // alert(usercode)
        if (usertype == "") {
            window.location.replace("../Account/LogIn");

        } else {
            if (usertype == "1" || usertype == "2") {
                resourceAddress.hash();
                var cuscod = atob(param_values.numcuber);
               
               // var cuscod = "110Z0001O";
                $("#changepass").css("display", "none");
            } else if (usertype == "5") {
                var cuscod = "110Z0001O";
                $("#changepass").css("display", "none");

            } else if (usertype == "6") {
                 resourceAddress.hash();
                // var cuscod = usercode;
                 var cuscod = atob(param_values.numcuber);
              
                 $("#changepass").css("display", "block");
            }
        }
        function checkPrivilege(userid, cuscod) {
            $.ajax({
                url: '@Url.Action("GetdataPrivilege", "DataCenter")',
                data: {
                    UsrID: userid,
                    cuscod: cuscod

                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    var splitstring = data.StrStstuslogin;
                    //console.log(splitstring);
                    //let text = splitstring;
                    //const myArray = text.split("|");
                    //let mysession = myArray[1];
                    //let mystatus = myArray[0];
                    // console.log("mystatus " + mystatus + "//////" + "mysession " + mysession);
                    if (splitstring == "1") {
                        $("#texterror").empty();
                        $("#texterror").text("ขออภัย ท่านทำรายการเกินระยะเวลาที่กำหนด กรุณาเข้าใช้งานใหม่อีกครั้ง");
                        $("#myModal").modal();
                        return false;

                    }
                }
            });

        }
        function checklogin(userid, id) {
            $.ajax({
                url: '@Url.Action("GetdataSessionlogin", "DataCenter")',
                data: {
                    UsrID: userid,
                    SessionId: id

                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    var splitstring = data.StrStstuslogin;
                    console.log(splitstring);
                    let text = splitstring;
                    const myArray = text.split("|");
                    let mysession = myArray[1];
                    let mystatus = myArray[0];
                    //myModal
                    
                    //console.log("mystatus " + mystatus + "//////" + "mysession " + mysession);
                    if (id != mysession) {
                        $("#texterror").empty();
                        $("#texterror").text("ขออภัย ท่านทำรายการเกินระยะเวลาที่กำหนด กรุณาเข้าใช้งานใหม่อีกครั้ง");
                        $("#myModal").modal();
                        //window.location.replace("../Account/LogIn");
                    } else{

                        if (mystatus == "0") {
                            $("#texterror").empty();
                            $("#texterror").text("ขออภัย ท่านทำรายการเกินระยะเวลาที่กำหนด กรุณาเข้าใช้งานใหม่อีกครั้ง");
                            $("#myModal").modal();
                           // window.location.replace("../Account/LogIn");
                        }
                    }
                }
            });

        }
       
        $(document).ready(function () {
            if (usertype == "6") {
                if (cuscod != "") {
                    checkPrivilege(userid, cuscod)
                }
                $(window).on('load', function () {
                    //alert("load")
                    checklogin(userid, id)
                });
                window.onclick = function () {
                    //alert("onclick")
                    checklogin(userid, id)
                };
                $('.navbar-nav').click(function () {
                    // alert("navbar-nav")
                    checklogin(userid, id)
                });
                $(document).bind('mousedown keydown', function (ed, e) {

                    checklogin(userid, id)
                });
                $(window).scroll(function (e) {

                    checklogin(userid, id)
                });
            }
            ShoppingCartNumber();
            $(document).on("click", "#myModal", function () {
                if (usertype == "6") {
                    $("#myModal").modal({ backdrop: "static" });
                }
            });
            $('#btnlogin').click(function () {
                if (usertype == "6") {
                    window.location.replace("../Account/LogIn");
                }
            });
            $('#changepass').click(function () {
               if (usertype == "6") {
                   window.location.replace("../ChangePassword/Index");
                }
            });
            $('.button-left').click(function () {
                $('.sidebar').toggleClass('fliph');
            });
            $('li a .toggle__menu').on('click', function () {


                  $('.offsetmenu').addClass('offsetmenu__on');
                   $('.body__overlay').addClass('is-visible');

            });
            $('.offsetmenu__close__btn').on('click', function () {

                    $('.offsetmenu').removeClass('offsetmenu__on');
                   $('.body__overlay').removeClass('is-visible');


            });

        });
        var select = $("#company");
       // select.children().remove();
        select.append($("<option>").val("ALL").text("ALL"));
        select.append($("<option>").val("AAC").text("AAC"));
        select.append($("<option>").val("TAC").text("TAC"));
        select.append($("<option>").val("OMP").text("OMP"));
        //$('.selectpicker').selectpicker('val', 'ALL');
        //$('.selectpicker').selectpicker('refresh');
       // $("#company").val('ALL');
        var _var = $("#company").val();
        // var _var = "TAC";
        $("#txtId").val(cuscod);
        $.ajax({
            url: '@Url.Action("GetCatProductGroup", "DataCenter")',
            data: {
                com: _var,
                cuscod:cuscod
            },
            type: "POST",
            dataType: "JSON",
            success: function (data) {
              
                var select = $("#productgroup");
                select.children().remove();
                select.append($("<option>").val("").text("หมวดสินค้า(Product Group)"));
                $(data).each(function (index, item) {

                    select.append($("<option>").val(item.ProductGroup).text(item.ProductGroup));

                });
               
                $('.selectpicker').selectpicker('refresh');
                //$('.selectpicker').selectpicker('val', '');
               // $("#productgroup").val("");
            }
        });
        
        $('.selectpicker').selectpicker({
            noneResultsText: 'Not found'

        });
      
          
        $.ajax({
            url: '@Url.Action("GetCatProductGroupline", "DataCenter")',
            data: {
                com: _var,
                progroup: "",
                brand: "",
                cuscod: cuscod
            },
            type: "POST",
            dataType: "JSON",
            success: function (data) {
                //console.log(data)
                var select = $("#productline");
                select.children().remove();
                select.prepend($("<option>").val("").text("ประเภทสินค้า(Product Line)"));
                $(data).each(function (index, item) {

                    select.append($("<option custyp='" + item.ProductGroup + "'>").val(item.ProductLine).text(item.ProductLine));

                });
               // $('.selectpicker').selectpicker('val', '');
                //$('.selectpicker').selectpicker('refresh');
                $("#productline").selectpicker('refresh');
               
            //    $('.selectpicker').selectpicker('val', '');
                //$("#productline").val("");
                $(".selectpicker #productline").selectpicker({
                    noneSelectedText: 'Product Line All' // by this default 'Nothing selected' -->will change to Please Select
                });
            }
        });
        if (_var === null || _var === undefined || _var === "") {
            _var = "ALL";
        }
        $.ajax({
            url: '@Url.Action("GetdateStkgrp", "DataCenter")',
            data: {
                Name: _var
            },
            type: "POST",
            dataType: "JSON",
            success: function (data) {
                //console.log(data)
                var select = $("#catalogue");
                select.children().remove();
                select.append($("<option>").val("").text("Group"));
                $(data).each(function (index, item) {

                    select.append($("<option custyp=" + item.STKGRP + ">").val(item.STKGRP).text(item.GRPNAM));

                });
               
                //$('.selectpicker').selectpicker('refresh');
                //$("#catalogue").selectpicker('refresh');
              
                //$("#catalogue").selectpicker('val', "");
               // $('.selectpicker').selectpicker('val', '');
                // $("#catalogue").val("");
               
            }
        });
        $.ajax({
            url: '@Url.Action("Getdate", "DataCenter")',
            data: {
                Name: 'Maker',
                sty: '0'
            },
            type: "POST",
            dataType: "JSON",
            success: function (data) {
                //console.log(data)
                var optgroup = "";
                optgroup = "<optgroup label='ยี่ห้อรถ'>";
                var select = $("#maker");
                //select.children().remove();
              
                $(data).each(function (index, item) {
                    if (index == 0 || index == 1 || index == 2 ) {
                        optgroup += "<option value='" + item.Code + "'>" + item.Code + "</option>"
                       
                    }else{
                        select.append($("<option custyp=" + item.Code + ">").val(item.Code).text(item.Code));
                    }
                });
                var select = $("#Model");
                select.children().remove();
                select.append($("<option>").val("").text("รุ่น(Model)"));
                var select = $("#submodel");
                select.children().remove();
                select.append($("<option>").val("").text("Sub/Engine"));


                optgroup += "</optgroup>"
                var foptgroup = '<option value="" >ยี่ห้อรถ(Maker)</option>';
                $('#maker').prepend(optgroup);
                $('#maker').prepend(foptgroup);
                $('#maker option[value=""]').attr("selected", true);
                $('.selectpicker').selectpicker('refresh');
                //$('.selectpicker').selectpicker('val', '');

               
               
               
               
               

               // $('#maker option[value=""]').attr("selected", true);

                return false;

               // $("#maker").val("");
            }

        });

        $.ajax({
            url: '@Url.Action("GetBrand", "DataCenter")',
            data: {
                Name: 'ALL',
                productLine: ""
            },
            type: "POST",
            dataType: "JSON",
            success: function (data) {
                //console.log(data)
                var select = $("#brand");
                select.children().remove();
                select.append($("<option>").val("").text("Brand"));
                $(data).each(function (index, item) {

                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.CODE));

                });
                //$('.selectpicker').selectpicker('refresh');
                $("#brand").selectpicker('refresh');
               // $('.selectpicker').selectpicker('val', '');
               // $("#brand").val("");
               // $('#brand>option[value=""]').prop('selected', true);
            }
        });
        $.ajax({
            url: '@Url.Action("GetSegment", "DataCenter")',
            data: {
                Name: _var
            },
            type: "POST",
            dataType: "JSON",
            success: function (data) {
                //console.log(data)
                var select = $("#segment");
                select.children().remove();
                select.prepend($("<option>").val("").text("ประเภทรถยนต์(segment)"));
                $(data).each(function (index, item) {

                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.segment));

                });
                //$('.selectpicker').selectpicker('refresh');
               
                $('#segment').selectpicker('refresh');
               // $('.selectpicker').selectpicker('val', '');
              //  $("#segment").val("");
            }
        });
       
        $("#company").change(function () {
            var _var = $(this).val();
            $.ajax({
                url: '@Url.Action("GetdateStkgrp", "DataCenter")',
                data: {
                    Name: _var
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    //console.log(data)
                    var select = $("#catalogue");
                    select.children().remove();
                    select.append($("<option>").val("").text("Group"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.STKGRP + ">").val(item.STKGRP).text(item.GRPNAM));

                    });
                    //$('.selectpicker').selectpicker('refresh');
                    //$('.selectpicker').selectpicker('val', '');
                }
            });
            var productlin= $("#productline").val();
            $.ajax({
                url: '@Url.Action("GetBrand", "DataCenter")',
                data: {
                    Name: _var,
                    productLine: productlin
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    //console.log(data)
                    var select = $("#brand");
                    select.children().remove();
                    select.append($("<option>").val("").text("Brand"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.CODE));

                    });
                    $('.selectpicker').selectpicker('refresh');
                  //  $('.selectpicker').selectpicker('val', '');
                    //$("#brand").val("").change();
                }
            });
        });
        countorder()
        
        function countorder() {
            // var SLM = $("#Slm").val()
            $.ajax({
                url: '@Url.Action("GetdateContorder", "DataCenter")',
                data: {
                    cus: cuscod,
                    Slm: "",
                    Usertype: usertype,
                    UserIn: userid

                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    //console.log(data);
                    
                    $("#countsku").html(data.Getdata[0].val.SumQty);

                }
            });
        }
        function splitval(_val) {
            var _splito = "";
            _splito = _val.split('|');

            return _splito[0];
        }
        function splitval2(_val) {
            var _splito = "";
            _splito = _val.split('|');

            return _splito[1];
        }
        function splitval3(_val) {
            var _splito = "";
            _splito = _val.split('|');

            return _splito[2];
        }
        function commaSeparateNumber(val) {
            while (/(\d+)(\d{3})/.test(val.toString())) {
                val = val.toString().replace(/(\d+)(\d{3})/, '$1' + ',' + '$2');
            }
            return val;
        }
       
        $("#productgroup").change(function () {
            var _progroup = $(this).val();
            // var _var = $("#company").val();
            var _var = $("#company").val();
            var brand = $("#brand").val();
            if (_var == null) {
                _var = "ALL";
            }
           // alert(_var)
            $.ajax({
                url: '@Url.Action("GetCatProductGroupline", "DataCenter")',
                data: {
                    com: _var,
                    progroup: _progroup,    
                    brand: brand,
                    cuscod: cuscod
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    //console.log(data)
                    var select = $("#productline");
                    select.children().remove();
                    select.append($("<option>").val("").text("ประเภทสินค้า(Product Line)"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.ProductGroup + ">").val(item.ProductLine).text(item.ProductLine));

                    });
                    $('.selectpicker').selectpicker('refresh');
                    //$('.selectpicker').selectpicker('val', '');
                   
                }
            });

        });
        $("#productline").change(function () {
            var _productline = $(this).val();
            var company = $("#company").val();
            var _progroup = $('option:selected', this).attr('custyp');
            var brand = $("#brand").val();
            var _vakbrand = brand;
           // $("#productgroup").val(_progroup);
            $.ajax({
                url: '@Url.Action("GetBrand", "DataCenter")',
                data: {
                    Name: company,
                    productLine: _productline
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    //console.log(data)
                    var select = $("#brand");
                    select.children().remove();
                    select.append($("<option>").val("").text("Brand"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.CODE));

                    });
                   
                    $('select[name=selValuebrand]').selectpicker('refresh');
                   
                    $('select[name=selValuebrand]').selectpicker('val', _vakbrand);
                   
                    $('select[name=selValuebproductgroup]').selectpicker('val', _progroup);
                }
            });
        });
        $("#brand").change(function () {

            var maker = $("#maker").val();
            var Model = $("#Model").val();
            var submodel = $("#submodel").val();
            var company = $("#company").val();
            var catalogue = $("#catalogue").val();
            var brand = $(this).val();
            var _productgroup = $("#productgroup").val();
            var _productline = $("#productline").val();
            var _valproductline = _productline;
            var textfree = $("#textfree").val();
            textfree = splitval(textfree);
            var itemsegment = $("#segment").val();
            //alert("xxxx"+ _productline)
            // alert("xxxx" + _productline)
            $.ajax({
                url: '@Url.Action("GetCatProductGroupline", "DataCenter")',
                data: {
                    com: company,
                    progroup: _productgroup,
                    brand: brand,
                    cuscod: cuscod
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    //console.log(data)
                    var select = $("#productline");
                    select.children().remove();
                    select.append($("<option>").val("").text("ประเภทสินค้า(Product Line)"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.ProductGroup + ">").val(item.ProductLine).text(item.ProductLine));

                    });

                  
                    $('.selectpicker').selectpicker('refresh');
                    $('select[name=selValuebproductline]').selectpicker('val', _valproductline);
                   // $('select[name=selValuebproductline]').val(_valproductline);
                    //$('.selectpicker').selectpicker('val', '');
                    // $("#productline").val("").change();
                 }
               });
            });
        function nl2br(str) {
           //return str.replace(/(?!$|\n)([^\n]{4}(?!\n))/g, '$1\n');
            //var string = str.replace(/(?!$|\n)([^\n]{4}(?!\n))/g, '$1\n');
            return str.replace(/(?!$|\n)([^\n]{4}(?!\n))/g, '$1\n');

        }
        //var fixedTable1 = fixTable(document.getElementById('fixed-table-container'));
        function ShoppingCartNumber() {
            var MyRows = $('#fixed-table-container-1').find('tbody').find('tr');
        
            var datacount = new Array();
         
            var datacountsum = new Array();
            var datacountQty = new Array();
            var data = [];
            var chunk = 0;
            var chunkfoc = 0;
            var chunksum = 0;

            var CUS = cuscod;
            var XXusrlogin = userid;
            var sQshow = "";
            @*$.ajax({
                url: '@Url.Action("GetdataShopping", "Shoppinglist")',
                data: {
                    CUSCOD: CUS,
                    Usrlogin: XXusrlogin,
                    Qshow: sQshow
                },*@
            $.ajax({
                url: '@Url.Action("GetdateContorder", "DataCenter")',
                data: {
                    cus: CUS,
                    Slm: '',
                    Usertype: usertype,
                    UserIn: userid
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    //console.log(data);
                   
                    chunk = parseFloat(data.Getdata[0].val.SumQty);
                    Row = parseFloat(data.Getdata[0].val.Countrow);
                    for (var i = 0; i < MyRows.length; i++) {

                        var MyIndexValueQty = $(MyRows[i]).find('td .tQty').val();
                        var MyIndexValueSTKCOD = $(MyRows[i]).find('td figcaption .STKCODdiv').html();
                       
                        if (MyIndexValueSTKCOD !== "") {
                            res = MyIndexValueSTKCOD.split("|");
                        } else { res[1] = ""; }
                        if (MyIndexValueQty != "") {
                            var ItemList = {
                                VQty: MyIndexValueQty,
                                VSTKCOD: res[0]
                            };
                            //console.log(ItemList)
                            // chunk += parseFloat(MyIndexValueQty);
                            chunk += parseFloat(MyIndexValueQty.replace(',', '').replace(' ', ''))
                            //datacount.push(MyIndexValueQty);
                            //datacountsum.push(MyIndexValueQty);
                            datacountsum.push(ItemList.VSTKCOD);

                            //console.log("ItemList"+ItemList);
                            //data.push(ItemList);
                        }

                    }
                    
              
                    var sorted_arr = datacountsum.sort();
                    var sorted_arrnum = 0;

                    // //console.log("รายการ:" + datacountsum);
                    var results = [];

                    for (var i = 0; i < sorted_arr.length - 1; i++) {
                        var x = $.trim(sorted_arr[i]);
                        var y = $.trim(sorted_arr[i + 1]);
                        //console.log("xxxxxx:  " + x);
                        //console.log("yyy:  " + y);
                        if (y == x) {
                            results.push(x);
                        }
                    }
                    var groupedData = jQuery.grep(datacountsum, function (d) { return d });

                    //console.log(" groupedData" + groupedData.length);

                    var bsum = sorted_arr.length;

                    var fsum = results.length;
                    //console.log("เบอร์ Row  " + Row);
                    //console.log("เบอร์ OrderP/N  " + bsum);
                    //console.log("เบอร์ foc   " + fsum);
                    $("#Cuqty").text(Row + bsum - fsum);
                    // $("#Cuitem").text(datacountsum.length);
                    //console.log(" จำนวนชิ้นOrder  " + chunk);
                    // //console.log("จำนวนชิ้นfoc   " + chunkfoc);
                    var x = $("#Cuitem").text(chunk);
                    var y = $("#countsku").text(chunk);

                    $("#Cuitem").digits();
                    $("#countsku").digits();

                }


            });
        }
        $("#fixed-table-container-1").on('blur', "input[name='S_Qty']", function () {
            var maxord = $(this).attr('max');
            var Seqvalmoq = $(this).attr('moq');
            var spackuom = $(this).attr('ratspackuom');
            var idqty = $(this).parents("tr:eq(0)").find(".rat0").attr('id');

            var MyIndexValueSalePrice;
            MyIndexValueSalePrice = $(this).parents("tr:eq(0)").find('td .rat0').html();
            var bytes0 = CryptoJS.AES.decrypt(MyIndexValueSalePrice.toString(), 'secret key 123');
            MyIndexValueSalePrice = bytes0.toString(CryptoJS.enc.Utf8);
            //alert(MyIndexValueSalePrice)

            if (MyIndexValueSalePrice == "0") {
                //$(this).val(maxord);//aps//
                $(this).val("");
                $("#" + idqty + "").val("");
                $("#textAlertWarning").empty();
                $("#textAlertWarning").text("ไม่สามารถทำรายการตามจำนวนที่ระบุได้ โปรดติดต่อพนักงานขาย");
                $("#myModalWarning").modal(); return false;
            }
            var idqty = $(this).parents("tr:eq(0)").find(".tQty").attr('id');
            var qtyinput = $(this).val();
            var _StkNo = $('#fixed-table-container-1').find('tbody').find('tr').find('td figcaption .STKCODdiv').html();
            var _NoAr = _StkNo.split("|");
          if (parseInt(qtyinput) ==0) {
              $(this).val("1");//aps//
            
          }
         
          if (parseInt(qtyinput) > parseInt(maxord)) {
              //$(this).val(maxord);//aps//
              $(this).val("");
              $("#" + idqty + "").val("");
              $("#textAlertWarning").empty();
              $("#textAlertWarning").text("ไม่สามารถทำรายการตามจำนวนที่ระบุได้ โปรดติดต่อพนักงานขาย");
              $("#myModalWarning").modal();return false;
          }
          if (parseFloat(qtyinput) < parseFloat(Seqvalmoq)) {

              $("#textAlertWarning").empty();
              $("#textAlertWarning").text("จำนวนที่สั่งซื้อห้ามน้อยกว่า MOQ");
              $("#myModalWarning").modal();// return false;
              // $(this).parents("tr:eq(0)").find(".tQty").val(cQty);
              $(this).val(""); //return false;
              $("#" + idqty + "").val("");
             // ShoppingCartNumber();
          }
          var QtPas = parseFloat(qtyinput.replace(',', '').replace(' ', ''));
          if (parseFloat(qtyinput) >= parseFloat(spackuom)) {
              var _val = parseFloat(qtyinput) / parseFloat(spackuom);

              if (typeof _val === 'number') {
                  if (_val % 1 === 0) {
                      // int
                      // alert(_val);
                  } else {
                      $("#textAlertWarning").empty();
                      $("#textAlertWarning").text("ใส่จำนวนสั่งซื้อสินค้าเบอร์ " + _NoAr[0] + " ไม่ถูกต้อง จำนวนสั่งซื้อไม่ลงตัว (Sales Packing Standard) = " + spackuom);
                      $("#myModalWarning").modal();// return false;
                      $(this).val(""); //return false;
                     // $("#" + idqty + "").val("");
                     // ShoppingCartNumber();
                  }
              } else {
                  // not a number
              }
              // alert(_val);
              // if()
          } else {

              if (isNaN(QtPas)) {

                  return false;
              } else {

                  $("#textAlertWarning").empty();
                  $("#textAlertWarning").text("จำนวนที่สั่งซื้อสินค้าเบอร์ " + _NoAr[0] + " ห้ามน้อยกว่า " + spackuom + " (Sales Packing Standard )");
                  $("#myModalWarning").modal();// return false;
                  $(this).val(""); //return false;
                  //$("#" + idqty + "").val("");
                 // ShoppingCartNumber();
              }
          }
        })
        $("#fixed-table-container-1").on('change', "input[name='S_Qty']", function () {
            var maxord = $(this).attr('max');
            var Seqvalmoq = $(this).attr('moq');
            var spackuom = $(this).attr('ratspackuom');
            // alert(spackuom)
            var idqty = $(this).parents("tr:eq(0)").find(".tQty").attr('id');
            var qtyinput = $(this).val();
            var _StkNo = $('#fixed-table-container-1').find('tbody').find('tr').find('td figcaption .STKCODdiv').html();
            var _NoAr = _StkNo.split("|");
            if (parseInt(qtyinput) == 0) {
                $(this).val("1");//aps//

            }
            var MyIndexValueSalePrice;
            MyIndexValueSalePrice = $(this).parents("tr:eq(0)").find('td .rat0').html();
            var bytes0 = CryptoJS.AES.decrypt(MyIndexValueSalePrice.toString(), 'secret key 123');
            MyIndexValueSalePrice = bytes0.toString(CryptoJS.enc.Utf8);
            //alert(MyIndexValueSalePrice)

            if (MyIndexValueSalePrice == "0") {
                //$(this).val(maxord);//aps//
                $(this).val("");
                $("#" + idqty + "").val("");
                $("#textAlertWarning").empty();
                $("#textAlertWarning").text("ไม่สามารถทำรายการตามจำนวนที่ระบุได้ โปรดติดต่อพนักงานขาย");
                $("#myModalWarning").modal(); return false;
            }
            if (parseInt(qtyinput) > parseInt(maxord)) {
                //$(this).val(maxord);//aps//
                $(this).val("");
                $("#" + idqty + "").val("");
                $("#textAlertWarning").empty();
                $("#textAlertWarning").text("ไม่สามารถทำรายการตามจำนวนที่ระบุได้ โปรดติดต่อพนักงานขาย");
                $("#myModalWarning").modal(); return false;
            }
            if (parseFloat(qtyinput) < parseFloat(Seqvalmoq)) {

                $("#textAlertWarning").empty();
                $("#textAlertWarning").text("จำนวนที่สั่งซื้อห้ามน้อยกว่า MOQ");
                $("#myModalWarning").modal();// return false;
                // $(this).parents("tr:eq(0)").find(".tQty").val(cQty);
                $(this).val(""); //return false;
                $("#" + idqty + "").val("");
                // ShoppingCartNumber();
            }
            var QtPas = parseFloat(qtyinput.replace(',', '').replace(' ', ''));
            if (parseFloat(qtyinput) >= parseFloat(spackuom)) {
                var _val = parseFloat(qtyinput) / parseFloat(spackuom);

                if (typeof _val === 'number') {
                    if (_val % 1 === 0) {
                        // int
                        // alert(_val);
                    } else {
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("ใส่จำนวนสั่งซื้อสินค้าเบอร์ " + _NoAr[0] + " ไม่ถูกต้อง จำนวนสั่งซื้อไม่ลงตัว (Sales Packing Standard) = " + spackuom);
                        $("#myModalWarning").modal();// return false;
                        $(this).val(""); //return false;
                        // $("#" + idqty + "").val("");
                        // ShoppingCartNumber();
                    }
                } else {
                    // not a number
                }
                // alert(_val);
                // if()
            } else {

                if (isNaN(QtPas)) {

                    return false;
                } else {

                    $("#textAlertWarning").empty();
                    $("#textAlertWarning").text("จำนวนที่สั่งซื้อสินค้าเบอร์ " + _NoAr[0] + " ห้ามน้อยกว่า " + spackuom + " (Sales Packing Standard )");
                    $("#myModalWarning").modal();// return false;
                    $(this).val(""); //return false;
                    //$("#" + idqty + "").val("");
                    // ShoppingCartNumber();
                }
            }
            ShoppingCartNumber();
        });
        $.fn.digits = function () {
            return this.each(function () {
                $(this).text($(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,"));
            })
        }
        
        function getcatalog(maker, Model, submodel, company, catalogue, brand, _productgroup, _productline, textfree, itemsegment, sortby, itemno) {
            //console.log(_productgroup);
            //alert(submodel)
             _submodel = "";
            var _maker = maker;
            var _Model = Model;
            var _submodel = submodel;
            var _company = company;
            var _catalogue = catalogue;
            var _brand = brand;
            var productgroup = _productgroup;
            var productline = _productline;
            // var textfree = $("#textfree").val();
            var textfree = textfree;
            textfree = splitval(textfree);
            var _itemsegment = itemsegment
            //alert(textfree);
           
           // $('#fixbox').empty();
            var MyRows = $('#fixed-table-container-1').find('tbody').find('tr');
            for (var i = 0; i < MyRows.length; i++) {

                var MyIndexValueQty = $(MyRows[i]).find('td .tQty').val();

                // alert(MyIndexValueQty)
                if (MyIndexValueQty == "") {
                    $(MyRows[i]).find('td .tQty').parent().parent().remove();
                }
            }
            //$('.loader').css("display", "block");
            var loading = new Loading({ direction: 'hor', discription: 'Loading...', defaultApply: true, });
            // $("#scrollUp").trigger("click");
          
            $.ajax({
                url: '@Url.Action("Getdataitemdetail", "Home")',
                data: {
                    maker: _maker,
                    modelno: _Model,
                    submodel: _submodel,
                    company: _company,
                    catalogue: _catalogue,
                    brand: _brand,
                    textfree: textfree,
                    cuscod: cuscod,
                    yrStart: "",
                    yrEnd: "",
                    itemno: itemno,
                    engine: "",
                    productgroup: productgroup,
                    productline: productline,
                    itemsegment: _itemsegment,
                    sortby: sortby,
                    usrtyp: usertype
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                   // console.log(data);
                    employees = data;

                    $('#fixbox').empty();
                    if (employees.length > 0) {
                        var favitm = "";
                        var displ = "";
                        var displstr = "";
                        var displnew = "";
                        var displstrnew = "";
                        var newitem = "";
                        var strph = "";
                        var strphsrc = "";
                        var _strinactive = "";
                        var displinactive = "";
                        var imgdisplinactive = "";
                        var displbut = "";
                        var SalePrice = "";
                        var moq = "";
                        var fastar = "";
                        var PlcPrice = "";
                        var SpcPrice = "";
                        var PromotionCode = "";
                        var PromoDesc = "";
                        var PromoPrice = "";
                        var Maxord = "";
                        var idlink = "";
                        var imgpromotion = "";
                        var procodsub = "";
                        var prclstno = "";
                      
                        //$('.loader').css("display", "none");
                        loading.out()
                        var SubmithtmlPage = "";
                        for (var i = 0; i < employees.length; i++) {
                            ItemNo = employees[i].ItemNo;
                           //Supdescri = splitval2(employees[i].Description).substr(0, 50);
                            //Supdescri = nl2br(employees[i].Description);
                            Supdescri = employees[i].Description;
                            Price = employees[i].Price;
                            Company = employees[i].Company;
                            Available_Stock = employees[i].Available_Stock;
                            SalePrice = employees[i].SalePrice;
                            PlcPrice = employees[i].PlcPrice;//ราคาป้าย//
                            SpcPrice = employees[i].SpcPrice;//ราคาพิเศษ//
                            PromotionCode = employees[i].PromotionCode;//PromotionCode//
                            var strprocodsub = PromotionCode;
                            procodsub = strprocodsub.substring(8, 13);
                            PromoDesc = employees[i].PromoDesc;
                            PromoPrice = employees[i].PromoPrice;//ราคาโปรโมชั่น//
                            strph = employees[i].PATH;
                            Maxord = employees[i].maxord;
                            moq = employees[i].minord;
                            spackuom = employees[i].spackuom;
                            if (Available_Stock != "Y") {
                                Stravailable_Stock = "Sold out"
                                Stravailable_Stock = "";
                            } else { Stravailable_Stock = "" }
                            favitm = employees[i].FavoriteItem;
                            newitem = employees[i].NewItem;
                            _strinactive = employees[i].Inactive;
                            prclstno = employees[i].prclst_no;
                            //console.log(favitm)
                            if (favitm != "") {
                               
                                displ = "display:block"
                                displstr = "data-selected='true'";
                                if (favitm == "1") {
                                    fastar = '<i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star"  style="font-size:15px;color: #b1b148;" aria-hidden="true"></i>';
                                } else if (favitm == "2") {
                                    fastar = '<i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-half-o"  style="font-size:15px;color: #b1b148;" aria-hidden="true"></i>';
                                } else if (favitm == "3") {
                                    fastar = '<i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o"  style="font-size:15px;color: #b1b148;" aria-hidden="true"></i>';
                                } else if (favitm == "4") {
                                    fastar = '<i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-half-o" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o"  style="font-size:15px;color: #b1b148;" aria-hidden="true"></i>';
                                } else if (favitm == "5") {
                                    fastar = '<i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o"  style="font-size:15px;color: #b1b148;" aria-hidden="true"></i>';
                                } else if (favitm == "6") {
                                    fastar = '<i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-half-o" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o"  style="font-size:15px;color: #b1b148;" aria-hidden="true"></i>';
                                } else if (favitm == "7") {
                                    fastar =  '<i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o"  style="font-size:15px;color: #b1b148;" aria-hidden="true"></i>';
                                } else if (favitm == "8") {
                                    fastar = '<i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-half-o" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o"  style="font-size:15px;color: #b1b148;" aria-hidden="true"></i>';
                                } else if (favitm == "9") {
                                    fastar = '<i class="fa fa-star" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o"  style="font-size:15px;color: #b1b148;" aria-hidden="true"></i>';
                                } else if (favitm == "10") {
                                    fastar = '<i class="fa fa-star-half-o" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o" style="font-size:15px;color: #b1b148;" aria-hidden="true"></i><i class="fa fa-star-o"  style="font-size:15px;color: #b1b148;" aria-hidden="true"></i>';
                                }
                            } else {
                                
                                displ = "display:none";
                                displstr = "";
                                fastar = "";
                            }
                            if (newitem != "") {
                                // displnew = "<div style='background-color: red;width: 111px;color: white;font-size: smaller;'>New</div>";
                                displnew = "<i style='font-size: inherit;color: red;float: right;'>New item</i>";
                                displstrnew = "data-selected='true'";
                            } else {
                                displnew = ""
                                displstrnew = "";

                            }
                            var ustypdisp
                            var ustyp = usertype;
                            if (ustyp == "") {
                                ustypdisp = "display:none";
                            } else {
                                ustypdisp = "";
                            }
                            if (strph == "") {
                                strph = 'holder.js/100px225?theme=thumb&amp;bg=55595c&amp;fg=eceeef&amp;text=Thumbnail';
                                strphsrc = 'data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22348%22%20height%3D%22225%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20348%20225%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_1754a3eb838%20text%20%7B%20fill%3A%23eceeef%3Bfont-weight%3Abold%3Bfont-family%3AArial%2C%20Helvetica%2C%20Open%20Sans%2C%20sans-serif%2C%20monospace%3Bfont-size%3A17pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_1754a3eb838%22%3E%3Crect%20width%3D%22348%22%20height%3D%22225%22%20fill%3D%22%2355595c%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%22116.71875%22%20y%3D%22120.3%22%3EThumbnail%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E'
                            } else {
                                strph = strph;
                                strphsrc = strph;
                            }
                            if (_strinactive == "Y") {
                                //RED//
                                // displinactive = "<i class='fa fa-circle text-danger'></i> InActive"
                                displinactive = "<i class=''></i>"
                                imgdisplinactive = '<img src="../images/logo/cancelled.png" style="width: 127px;"/>';
                                displbut = "display:none";
                                idlink = "";
                            } else {
                                //Graee//
                                //displinactive = "<i class='fa fa-circle text-success'></i> Active"
                                imgdisplinactive = '';
                                displbut = "display:block";
                                idlink = "id='_btnlinkdetail'";
                            }
                            if (PromotionCode != "") {
                                if (procodsub != "Flash") {
                                    imgpromotion = '<img src="../images/promotion_png.png" style="width: 88px;"/>';
                                } else {
                                    imgpromotion = '<img src="../images/flash_sale_f.gif"/>';
                                }
                            } else {
                                imgpromotion = '';
                            }
                            // //<div class="col-sm-3 d-flex align-items-stretch">' +
                            //console.log(fastar);

                            SubmithtmlPage += '<tr>';
                            SubmithtmlPage += '<td>';
                           
                            SubmithtmlPage += '<figure class="media">';
                            SubmithtmlPage += '<div class="img-wrap" style="margin-right: 6px;"><img src=' + strphsrc + '  class="img-thumbnail img-sm" style="width: 65px;"></div>';
                            SubmithtmlPage += '<div style="width: 10%;">' + imgpromotion + '</div>';
                            SubmithtmlPage += '<figcaption class="media-body" style="width: 500px;">';
                            SubmithtmlPage += '<a class="STKCODdiv" ' + idlink + '  card__buy=' + CryptoJS.AES.encrypt(Company, 'secret key 123') + ' card__item="' + CryptoJS.AES.encrypt(ItemNo, 'secret key 123') + '">' + ItemNo + ' </a>';
                           
                            SubmithtmlPage += '<dl class="param param-inline small">';
                            SubmithtmlPage += '<div>' + fastar +'</div>';
                           // SubmithtmlPage += '<div>' + favitm + '</div>';
                            SubmithtmlPage += '<dt><p style="margin-block-start:auto;position:inherit;z-index: 9999;">' + imgdisplinactive + '</p></dt>';
                            SubmithtmlPage += '</dl>';
                            SubmithtmlPage += '<dl class="param param-inline small" style="margin-bottom: -51px;">';
                            // SubmithtmlPage += '<dd>' + Supdescri + ' </dd>';
                            SubmithtmlPage += '<div style="word-break: break-all;display: flex; align-items: stretch;flex-wrap: nowrap;align-content: space-between;flex-direction: column;width: 454px;">' + Supdescri + ' </div>';
                            SubmithtmlPage += '<dd style="width: 168px;"></span><span class="rat__qun">(MOQ:' + moq + ')</span>&nbsp;<span class="rat__sp"> (standard packing:' + spackuom + ')</span><p style="margin-block-start:auto;">' + displinactive + "<br>  " + displnew + '</p><span class="rat0" id="second-element">' + CryptoJS.AES.encrypt(commaSeparateNumber(Price), 'secret key 123') + '</span><span class="ratmoq" id="second-element">' + CryptoJS.AES.encrypt(moq, 'secret key 123') + '</span><span class="ratcy" id="second-element">' + CryptoJS.AES.encrypt(Company, 'secret key 123') + '</dd>';
                            SubmithtmlPage += '<span class="ratplc" id="second-element">' + CryptoJS.AES.encrypt(commaSeparateNumber(PlcPrice), 'secret key 123') + '</span><span class="ratprc" id="second-element">' + CryptoJS.AES.encrypt(SalePrice, 'secret key 123') + '</span><span class="ratspc" id="second-element">' + CryptoJS.AES.encrypt(SpcPrice, 'secret key 123') + '</span><span class="ratprcod" id="second-element">' + CryptoJS.AES.encrypt(PromotionCode, 'secret key 123') + '</span><span class="ratprde" id="second-element">' + CryptoJS.AES.encrypt(PromoDesc, 'secret key 123') + '</span><span class="ratprpr" id="second-element">' + CryptoJS.AES.encrypt(PromoPrice, 'secret key 123') + '</span><span class="rttprclst" id="second-element">' + CryptoJS.AES.encrypt(prclstno, 'secret key 123') + '</span></dd>';
                            
                            //SubmithtmlPage += '<dd>(MOQ:' + moq + ')</dd>';
                            SubmithtmlPage += '</dl>';
                            SubmithtmlPage += '</figcaption>';
                            SubmithtmlPage += '</figure>';
                            SubmithtmlPage += '</td>';
                          
                            SubmithtmlPage += '<td>';
                         
                            SubmithtmlPage += '<input  name="S_Qty" class="tQty" maxlength="5" min="1" max=' + Maxord + ' moq=' + moq + '  ratspackuom =' + spackuom + '  type="number" style=" background-color:white; color: blue; width: 81px; height: 35px;font-size: 20px;' + displbut + '">';
                           
                            SubmithtmlPage += '</td>';
                           
                            SubmithtmlPage += '<td>';
                            SubmithtmlPage += '<div class="price-wrap">';
                           
                            SubmithtmlPage += '<var style="' + displbut + '"  class="price">' + commaSeparateNumber(Price) + '</var>';
                            SubmithtmlPage += '<small class="text-muted" style=" text-decoration: line-through;color: deeppink;font-family: cursive;font-size:revert;text-align: left;margin-left: 1rem;' + displbut + '"  class="pricehot">฿ ' + commaSeparateNumber(PlcPrice) + ' </small>';
                            SubmithtmlPage += '</div> ';
                            SubmithtmlPage += '</td>';
                            SubmithtmlPage += '<td>';
                            SubmithtmlPage += '<input  name="S_Linenote" class="tlinenote" style=" background-color:white;' + displbut + '">';
                            SubmithtmlPage += '</td>';
                            //SubmithtmlPage += '<td class="text-right">';
                                        @*<a title="" href="" class="btn btn-outline-success" data-toggle="tooltip" data-original-title="Save to Wishlist"> <i class="fa fa-heart"></i></a>*@
                                        @*<a href="" class="btn btn-outline-danger"> × Remove</a>*@
                           // SubmithtmlPage += '</td>';
                            SubmithtmlPage += '</tr>';



                        }
                        //$('#fixed-table-container-1  tbody:last-child').append(SubmithtmlPage);
                          $('#fixed-table-container-1  tbody:last-child').prepend(SubmithtmlPage);
                    } else {
                        //$('.loader').css("display", "none");
                        loading.out()
                        $('#fixbox').empty();

                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("No Data.....");
                        $("#myModalWarning").modal();
                    }
                
                }
                 
            });
        }
        $("table").on("click", "tr #_btnlinkdetail", function () {
        //$(document).on("click", "#_btnlinkdetail", function () {
            var _vcom = $(this).attr('card__buy');
            
            var _vfd = $(this).attr('card__item');
           
            var bytesc = CryptoJS.AES.decrypt(_vcom.toString(), 'secret key 123');
            var MyIndexValuecom = bytesc.toString(CryptoJS.enc.Utf8);
            var bytesitm = CryptoJS.AES.decrypt(_vfd.toString(), 'secret key 123');
            var MyIndexValuitm = bytesitm.toString(CryptoJS.enc.Utf8);
          
            if (usertype == "6") {
                if (cuscod != "") {
                    ///var wi = window.open("../Product_details/frmViewLabel.aspx?ClmNUM=" + btoa(nokey) + "/" + btoa(nosubkey));
                    var wi = window.open("../Productdetails/Index?prodenum=" + btoa(MyIndexValuitm) + "/" + btoa(MyIndexValuecom) + "/" + btoa(cuscod));
                    wi.focus();
                } else {
                    //login//
                }
            }

            else if (usertype == "1" || usertype == "2") {//saleman//

                if (cuscod != "") {
                    var wi = window.open("../Productdetails/Index?prodenum=" + btoa(MyIndexValuitm) + "/" + btoa(MyIndexValuecom) + "/" + btoa(cuscod));
                    wi.focus();

                } else {
                    $("#myModal").modal('show');
                    $.ajax({
                        url: '@Url.Action("Getdateslm", "DataCenter")',
                        data: {

                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            //console.log(data)

                            var select = $("#selslm");
                            select.children().remove();
                            select.append($("<option>").val("").text("Sales Man"));
                            $(data).each(function (index, item) {
                                select.append($("<option custyp=" + item.SLMCOD + ">").val(item.SLMCOD).text(item.SLMCOD + "/" + item.SLMNAM));
                            });
                        }
                    });
                }
            }
            else if (usertype == "5") {
                var cu = "110Z0001O";

                var wi = window.open("../Productdetails/Index?prodenum=" + btoa(MyIndexValuitm) + "/" + btoa(MyIndexValuecom) + "/" + btoa(cu));
                wi.focus();

            }
        });
      //Lock show code display //
        //$(document).bind("contextmenu", function (e) {
        //    e.preventDefault();
        //    alert('not allowed');
        //})
        //document.onkeydown = function (e) {
         
        //    if (e.ctrlKey &&
        //    (e.keyCode === 85)) {
        //        return false;
        //        alert('not allowed');
        //    }else {
        //          return true;

        //      }
        //};
        //Lock show code display //
        $('#fixed-table-container-1 .compan').hide();
        $(document).on("click", "#btnsubmitinsert", function () {
            // $("#btnsubmitinsert").attr("disabled", "disabled");rttprclst
            var data = new Array();
            var dataPro = new Array();
            var res = "";
            var chksop = "";
            var MyRows = $('#fixed-table-container-1').find('tbody').find('tr');

            for (var i = 0; i < MyRows.length; i++) {
             
                var MyIndexValueSTKCOD = $(MyRows[i]).find('td .STKCODdiv').html();
                if(MyIndexValueSTKCOD !== ""){
                    res = MyIndexValueSTKCOD.split("|");

                } else { res[0] = ""; }
                
                var MyIndexValueQty = $(MyRows[i]).find('td .tQty').val().replace(',', '').replace(' ', '');
                var MyIndexValueMoq;
                  MyIndexValueMoq = $(MyRows[i]).find('td .ratmoq').html();
                  var bytesm = CryptoJS.AES.decrypt(MyIndexValueMoq.toString(), 'secret key 123');
                  MyIndexValueMoq = bytesm.toString(CryptoJS.enc.Utf8);
            
                var MyIndexValueLinenote = $(MyRows[i]).find('td .tlinenote').val();
              
                var MyIndexValueSalePrice;
                MyIndexValueSalePrice = $(MyRows[i]).find('td .rat0').html();
                var bytes0 = CryptoJS.AES.decrypt(MyIndexValueSalePrice.toString(), 'secret key 123');
                MyIndexValueSalePrice= bytes0.toString(CryptoJS.enc.Utf8);

                var MyIndexValuecompany;
                    MyIndexValuecompany = $(MyRows[i]).find('td .ratcy').html();
             
                var bytesc = CryptoJS.AES.decrypt(MyIndexValuecompany.toString(), 'secret key 123');
                MyIndexValuecompany = bytesc.toString(CryptoJS.enc.Utf8);
                
                var MyIndexValueratplc;
                MyIndexValueratplc = $(MyRows[i]).find('td .ratplc').html();

                var byteplc = CryptoJS.AES.decrypt(MyIndexValueratplc.toString(), 'secret key 123');
                MyIndexValueratplc= byteplc.toString(CryptoJS.enc.Utf8);
                
                var MyIndexValueratspc;
                MyIndexValueratspc = $(MyRows[i]).find('td .ratspc').html();

                var byteratspc = CryptoJS.AES.decrypt(MyIndexValueratspc.toString(), 'secret key 123');
                MyIndexValueratspc = byteratspc.toString(CryptoJS.enc.Utf8);
               
                var MyIndexValueratprcod;
                MyIndexValueratprcod = $(MyRows[i]).find('td .ratprcod').html();

                var byteratprcod = CryptoJS.AES.decrypt(MyIndexValueratprcod.toString(), 'secret key 123');
                MyIndexValueratprcod = byteratprcod.toString(CryptoJS.enc.Utf8);

                var MyIndexValueratprde;
                MyIndexValueratprde = $(MyRows[i]).find('td .ratprde').html();

                var byteratprde = CryptoJS.AES.decrypt(MyIndexValueratprde.toString(), 'secret key 123');
                MyIndexValueratprde = byteratprde.toString(CryptoJS.enc.Utf8);

                var MyIndexValuerratprpr;
                MyIndexValuerratprpr = $(MyRows[i]).find('td .ratprpr').html();

                var byteratprpr = CryptoJS.AES.decrypt(MyIndexValuerratprpr.toString(), 'secret key 123');
                MyIndexValuerratprpr = byteratprpr.toString(CryptoJS.enc.Utf8);


                var MyIndexValuerrttprclst;
                MyIndexValuerrttprclst = $(MyRows[i]).find('td .rttprclst').html();

                var byterttprclst = CryptoJS.AES.decrypt(MyIndexValuerrttprclst.toString(), 'secret key 123');
                MyIndexValuerrttprclst = byterttprclst.toString(CryptoJS.enc.Utf8);
                //ratplc = PlcPrice
                //ratprc = SalePrice
                //ratspc = SpcPrice
                //ratprcod = PromotionCode
                //ratprde = PromoDesc
                //ratprpr = PromoPrice  .replace(',', '').replace(' ', '').replace(',', '').replace(' ', '') 
                //(age >= 21) ? "Beer" : "Juice";

             
                var ItemList = {
                    CUSCOD: cuscod.toUpperCase(),
                    STKCOD: res[0],
                    company: MyIndexValuecompany,
                    Qty: MyIndexValueQty,
                    LineNote: MyIndexValueLinenote,
                    User: userid,
                    Moq: MyIndexValueMoq,
                    Price: (MyIndexValueSalePrice.replace(',', '').replace(' ', '').replace(',', '').replace(' ', '') !="0") ? MyIndexValueSalePrice.replace(',', '').replace(' ', '').replace(',', '').replace(' ', '') : "0.00",
                    PlcPrice: (MyIndexValueratplc.replace(',', '').replace(' ', '').replace(',', '').replace(' ', '') != "0") ? MyIndexValueratplc.replace(',', '').replace(' ', '').replace(',', '').replace(' ', '') : "0.00",
                    SpcPrice: (MyIndexValueratspc.replace(',', '').replace(' ', '').replace(',', '').replace(' ', '') != "0") ? MyIndexValueratspc.replace(',', '').replace(' ', '').replace(',', '').replace(' ', '') : "0.00",
                    PromotionCode: MyIndexValueratprcod,
                    PromoDesc: MyIndexValueratprde,
                    PromoPrice: (MyIndexValuerratprpr.replace(',', '').replace(' ', '').replace(',', '').replace(' ', '') != "0" ) ? MyIndexValuerratprpr.replace(',', '').replace(' ', '').replace(',', '').replace(' ', '') : "0.00",
                    PRCLST_NO: MyIndexValuerrttprclst
                };
             
                if (ItemList.Qty != "") {
                    if (ItemList.Qty != "0") {
                        data.push(ItemList);

                    }
                }

            }
            
            var DataSend = JSON.stringify(data);
           
            if (data.length == 0 ) {
                $("#btnsubmitinsert").attr("disabled", false);
                $("#textAlertWarning").empty();
                $("#textAlertWarning").text("ไม่มีสินค้าที่จะสั่งซื้อ");
                $("#myModalWarning").modal();
                $(".fixed_headers > tbody").empty();
                $("#example1 > tbody").empty();
                return false;
            }
           
            $.ajax({
                url: '@Url.Action("Confirmationdata", "Orderlist")',
                data: {
                    DataSend: DataSend,

                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    if (data == "Y") {
                        $("#btnsubmitinsert").attr("disabled", false);
                        $("#fixed-table-container-1 > tbody").empty();
                        $("#example1 > tbody").empty();
                        $("#textAlertSucces").empty();
                        $("#textAlertSucces").text("บันทึกสินค้าเข้าตะกร้าสำเร็จ");
                        $("#myModalSucces").modal();
                        ShoppingCartNumber()
                        //location.reload();
                        //setTimeout(function () { window.close() }, 2000); //2วิ

                    } else {
                        $("#btnsubmitinsert").attr("disabled", false);
                        $("#textAlertWarninglog").empty();
                        $("#textAlertWarninglog").text("บันทึกสินค้าเข้าตะกร้าไม่สำเร็จกรุณาทำรายการใหม่");
                        $("#myModalWarninglog").modal();

                    }
                }

            });

        });
       
        $("#sortby").change(function () {
            var vb = $(this).val();

            var maker = $("#maker").val();
            var Model = $("#Model").val();
            var submodel = $("#submodel").val();
            var company = $("#company").val();
            var catalogue = $("#catalogue").val();
            var brand = $("#brand").val();
            var _productgroup = $("#productgroup").val();
            var _productline = $("#productline").val();
            var textfree = $("#textfree").val();
            textfree = splitval(textfree);
            var itemsegment = $("#segment").val();
            var sortby = vb;
            var itemno = $("#textfreeoe").val();
            getcatalog(maker, Model, submodel, company, catalogue, brand, _productgroup, _productline, textfree, itemsegment, sortby, itemno);


        });

        $("#catalogue").change(function () {
            var maker = $("#maker").val();
            var Model = $("#Model").val();
            var submodel = $("#submodel").val();
            var company = $("#company").val();
            var catalogue = $("#catalogue").val();
            var brand = $("#brand").val();
            var _productgroup = $("#productgroup").val();
            var _productline = $("#productline").val();
            var textfree = $("#textfree").val();
            textfree = splitval(textfree);
            var itemsegment = $("#segment").val();

            $("#sortby").val("0");

            //  getcatalog(maker, Model, submodel, company, catalogue, brand, _productgroup, _productline, textfree, itemsegment);


        });
        function clearval() {
            $("#sortby").val("0");
        }
        $("#maker").change(function () {
            var _var = $(this).val();

            var select = $("#submodel");
            select.children().remove();
            $.ajax({
                url: '@Url.Action("GetdateRelation", "DataCenter")',
                data: {
                    Name: _var,
                    sty: '1'
               },
           
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                   // //console.log(data)
                    $("#submodel").append($("<option>").val("").text("submodel"));
                    var select = $("#Model");
                    select.children().remove();
                    select.append($("<option>").val("").text("Model"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.Code + ">").val(item.Code).text(item.Code));

                    });
                    $('.selectpicker').selectpicker('refresh');
                    //$('.selectpicker').selectpicker('val', '');
                   // $("#Model").val("");
                }
            });

            var maker = $("#maker").val();
            var Model = $("#Model").val();
            var submodel = $("#submodel").val();
            var company = $("#company").val();
            var catalogue = $("#catalogue").val();
            var brand = $("#brand").val();
            var _productgroup = $("#productgroup").val();
            var _productline = $("#productline").val();
            var textfree = $("#textfree").val();
            textfree = splitval(textfree);
            var itemsegment = $("#segment").val();

            $("#sortby").val("0");

            // getcatalog(maker, Model, submodel, company, catalogue, brand, _productgroup, _productline, textfree, itemsegment);
        });
        $("#Model").change(function () {
            var _var = $(this).val();
            @*$.ajax({
                url: '@Url.Action("GetdateRelation", "DataCenter")',
                data: {
                    Name: _var,
                    sty: '2'
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    //console.log(data)*@
                    var select = $("#submodel");
                    select.children().remove();
                    select.append($("<option>").val("").text("Submodel"));
                    //$(data).each(function (index, item) {

                    //    select.append($("<option custyp=" + item.Code + ">").val(item.Code).text(item.Type));

                    //});
                //}
            //});
            var maker = $("#maker").val();
            var Model = $("#Model").val();
            var submodel = $("#submodel").val();
            var company = $("#company").val();
            var catalogue = $("#catalogue").val();
            var brand = $("#brand").val();
            var _productgroup = $("#productgroup").val();
            var _productline = $("#productline").val();
            var textfree = $("#textfree").val();
            textfree = splitval(textfree);
            var itemsegment = $("#segment").val();

            $("#sortby").val("0");

            // getcatalog(maker, Model, submodel, company, catalogue, brand, _productgroup, _productline, textfree, itemsegment);
        });
        $("#submodel").change(function () {

            var maker = $("#maker").val();
            var Model = $("#Model").val();
            var submodel = $(this).val();
            var company = $("#company").val();
            var catalogue = $("#catalogue").val();
            var brand = $("#brand").val();
            var _productgroup = $("#productgroup").val();
            var _productline = $("#productline").val();
            var textfree = $("#textfree").val();
            textfree = splitval(textfree);
            var itemsegment = $("#segment").val();
            // getcatalog(maker, Model, submodel, company, catalogue, brand, _productgroup, _productline, textfree, itemsegment);
        });

        $(document).on("click", ".fv-btn", function () {


            var customer = cuscod;
            var stkcod = $(this).attr('stock');
            var company = $(this).attr('com');
            var moq = $(this).attr('moq');
            var price = $(this).attr('price');
            var saleprice = $(this).attr('saleprice');

            var loading = new Loading({ direction: 'hor', discription: 'กำลังบันทึกสินค้าเข้าตระกร้า...', defaultApply: true, });
            $.ajax({
                url: '@Url.Action("GetdataitemdetailbyMoq", "productdetails")',
                data: {
                    Nodisplay: stkcod,
                    Comdisplay: company,
                    strcustome: customer,
                    moq : moq
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    //console.log(data);

                    if (data.length > 0) {
                        loading.out()
                        var price = data[0].val.Price0
                        var sprice = data[0].val.Price;
                        //var price = price;
                       // var sprice = saleprice;
                        //var qty = "1";
                        var qty = moq;
                        var bckorder = "0";
                        var expectprice = "0";
                        var linenote = "";
                        var foc = "0";
                        if (qty == "0") {
                            if (foc == "0") {
                                $("#textAlertWarninglog").empty();
                                $("#textAlertWarninglog").text("กรุณาใส่จำนวนสั่งซื้อ");
                                $("#myModalWarninglog").modal();

                                return false;
                            }
                        }
                        if (qty == "") {
                            if (foc == "0") {
                                $("#textAlertWarninglog").empty();
                                $("#textAlertWarninglog").text("กรุณาใส่จำนวนสั่งซื้อ");
                                $("#myModalWarninglog").modal();

                                return false;
                            }
                        }

                        //else {
                        //    foc = "0"
                        //}

                        if (usertype == "6") {

                            if (sprice == "0") {
                                //if (expectprice == "0") {
                                $("#textAlertWarninglog").empty();
                                $("#textAlertWarninglog").text("กรุณาติดต่อพนักงานขาย");
                                $("#myModalWarninglog").modal();
                                $(".fv-btn").attr("disabled", false)
                                return false;
                                //}
                                //return false;
                            }
                            if (sprice == "999999") {
                                //if (expectprice == "0") {
                                $("#textAlertWarninglog").empty();
                                $("#textAlertWarninglog").text("กรุณาติดต่อพนักงานขาย");
                                $("#myModalWarninglog").modal();
                                $(".fv-btn").attr("disabled", false)
                                return false;
                                //}
                                //return false;
                            }
                        } else {
                            if (sprice == "0") {

                                $("#textAlertWarninglog").empty();
                                $("#textAlertWarninglog").text("กรุณากดปุ่ม See Detail เพื่อใส่ราคาต่อรอง  เนื่องจากราคา 0 บาท");
                                $("#myModalWarninglog").modal();
                                return false;
                            }
                            if (sprice == "999999") {
                                //if (expectprice == "0") {

                                $("#textAlertWarninglog").empty();
                                $("#textAlertWarninglog").text("กรุณากดปุ่ม See Detail เพื่อใส่ราคาต่อรอง  เนื่องจากราคา Indent");
                                $("#myModalWarninglog").modal();
                                return false;
                            }
                        }
                        var insertedby = userid;

                        var pomocode = data[0].val.PromotionCode;

                        // var minord = data[0].val.minord;
                        var minord = moq;
                        var prclstno = data[0].val.PRCLST_NO;
                        var specprice = data[0].val.Special_Price;

                        var promoprice = "";
                        promoprice = data[0].val.PromoPrice;
                        if (promoprice == "") {
                            promoprice = "0";
                        } else {
                            promoprice = data[0].val.PromoPrice;
                        }
                        var promodesc = data[0].val.PromoDesc;
                        var lastinvprice = data[0].val.LastInvPrice;
                        var lastinvdate = data[0].val.LastInvdate;

                        $.ajax({
                            url: '@Url.Action("Confirmationdata", "Productdetails")',
                            data: {
                                customer: customer,
                                stkcod: stkcod,
                                company: company,
                                price: price,
                                sprice: sprice,
                                qty: qty,
                                bckorder: bckorder,
                                expectprice: expectprice,
                                linenote: linenote,
                                insertedby: insertedby,
                                pomocode: pomocode,
                                foc: foc,
                                minord: minord,
                                prclstno: prclstno,
                                specprice: specprice,
                                promoprice: promoprice,
                                promodesc: promodesc,
                                lastinvprice: lastinvprice,
                                lastinvdate: lastinvdate
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                //console.log(data)
                                //alert(data)
                                //if (data.length > 0) {
                                if (data == "Y") {
                                    $("#textAlertSucces").empty();
                                    $("#textAlertSucces").text("บันทึกสินค้าเข้าตะกร้าสำเร็จ");
                                    $("#myModalSucces").modal();

                                    //location.reload();
                                    setTimeout(function () { window.close() }, 2000); //2วิ
                                    countorder();
                                } else {

                                    $("#textAlertWarninglog").empty();
                                    $("#textAlertWarninglog").text("บันทึกสินค้าเข้าตะกร้าไม่สำเร็จกรุณาทำรายการใหม่");
                                    $("#myModalWarninglog").modal();
                                }
                                //}
                            }
                        });

                    } else {
                        loading.out()
                        $("#textAlertWarninglog").empty();
                        $("#textAlertWarninglog").text("บันทึกราการไม่สำเร็จ กรุณาทำรายการใหม่");
                        $("#myModalWarninglog").modal();

                    }
                }
            });










            return false;
            //////////////////// save/////////////////////////


        });
            $("#crsearchbox").click(function () {
               
            $("#maker").val("");
            $("#Model").val("");
            $("#submodel").val("");
            $("#company").val("ALL");
            $("#catalogue").val("");
            $("#brand").val("");
            $("#productgroup").val("");
            $("#productline").val("");
            $("#textfree").val("");
            $("#segment").val("");
            $("#textfreeoe").val("");
            var _var = $("#company").val();
            $.ajax({
                url: '@Url.Action("GetCatProductGroupline", "DataCenter")',
                data: {
                    com: _var,
                    progroup: "",
                    brand: "",
                    cuscod: cuscod
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    //console.log(data)
                    var select = $("#productline");
                    select.children().remove();
                    select.append($("<option>").val("").text("Product Line All"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.ProductLine + ">").val(item.ProductLine).text(item.ProductLine));

                    });
                    $('.selectpicker').selectpicker('refresh');
                   // $('.selectpicker').selectpicker('val', '');
                    // $("#productline").val("").change();

                 
                }
            });
        });
      $("#searchbox").click(function () {
         // alert("xxxxx");
            var maker = $("#maker").val();
            var Model = $("#Model").val();
            var submodel = $("#submodel").val();
            var company = $("#company").val();
            var catalogue = $("#catalogue").val();
            var brand = $("#brand").val();
            var _productgroup = $("#productgroup").val();
            var _productline = $("#productline").val();
            var textfree = $("#textfree").val();
            textfree = splitval(textfree);
            var itemsegment = $("#segment").val();
            var sortby = $("#sortby").val();
            var itemno = $("#textfreeoe").val();
            getcatalog(maker, Model, submodel, company, catalogue, brand, _productgroup, _productline, textfree, itemsegment, sortby, itemno);
        });
       


            // getcatalog(maker, Model, submodel, company, catalogue, brand, _productgroup, _productline, textfree, itemsegment);
    
        $("#textfree").click(function () {
            this.select();
            countorder();
        });
        $("#textfree").autocomplete({
            selectFirst: true,
            autoFocus: true,
            timeout: 1000000,

            source: function (request, response) {
                //alert('99');

                var param = {
                    maker: $("#maker").val(),
                    modelno: $("#Model").val(),
                    submodel: $("#submodel").val(),
                    XvalCompany: $("#company").val(),
                    catalogue: $("#catalogue").val(),
                    brand: $("#brand").val(),
                    Name: $("#textfree").val(),
                    Xcus: cuscod,
                    yrStart: "",
                    yrEnd: "",
                    itemno: "",
                    engine: "",
                    productgroup: $("#productgroup").val(),
                    productline: $("#productline").val(),
                    itemsegment: $("#segment").val(),
                    Xval: $("#optionsearch").val()
                };
                // $('#fixbox').empty();
                // $('.loader').css("display", "block");
               
                $.ajax({
                    url: '@Url.Action("GetdateStockCode", "Home")',
                    data: JSON.stringify(param),
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataFilter: function (data) { return data; },
                    success: function (data) {
                        //console.log(data.length
                        // //console.log("xxxx:" + data);
                        response($.map(data.slice(0, 50), function (item) {
                            return {
                                value: item
                            }
                        }))
                    },
                    error: function (XMLhttpsRequest, textStatus, errorThrown) {
                        //  alert(textStatus + '&&' + errorThrown + '&&' + XMLhttpsRequest);
                        alert(request.term);
                    }
                });
            },
            select: function (event, ui) {
                var maker = $("#maker").val();
                var Model = $("#Model").val();
                var submodel = $("#submodel").val();
                // var company= $("#company").val();
                var catalogue = $("#catalogue").val();
                var brand = $("#brand").val();
                var _productgroup = $("#productgroup").val();
                var _productline = $("#productline").val();
                var textfree = ui.item.value;

                var _splval = splitval(textfree);
                var company = splitval3(textfree);
                
                var itemsegment = $("#segment").val();
                var sortby = $("#sortby").val();
                //var itemno = _splval;
                var itemno = $("#textfreeoe").val();
                if (usertype == "1" || usertype == "2") {
                    if (cuscod != "") {
                        ///var wi = window.open("../Product_details/frmViewLabel.aspx?ClmNUM=" + btoa(nokey) + "/" + btoa(nosubkey));
                        var wi = window.open("../Productdetails/Index?prodenum=" + btoa(_splval) + "/" + btoa(company) + "/" + btoa(cuscod));
                        wi.focus();
                    } else {
                        //login//
                    }
                } else {

                    getcatalog(maker, Model, submodel, company, catalogue, brand, _productgroup, _productline, _splval, itemsegment, sortby, itemno);
                }
                countorder();
            },
            minLength: 2//minLength as 2, it means when ever user enter 2 character in TextBox the AutoComplete method will fire and get its source data.
        });
        @*$('#selslm').change(function () {

            var SLM = $(this).val()
            var SLMt = $("#Slm option:selected").text();
            $.ajax({
                url: '@Url.Action("Getdatabyslm", "DataCenter")',
                data: {
                    SLXX: SLM,
                    SLMNAME: SLMt
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    // //console.log(data);
                    var select = $("#selcus");
                    select.children().remove();
                    select.append($("<option>").val("0").text("ลูกค้า"));
                    $(data).each(function (index, item) {
                        select.append($("<option custyp=" + item.CUSTYP + ">").val(item.CUSCOD).text(item.CUSCOD + "|" + item.CUSNAM + "----ที่อยู่ " + item.ADDR_01 + "/" + item.PRO));
                    });
                    var CUSCODt = $("#CUSCOD option:selected").text();
                    //$('#UserID').val(CUSCODt);
                }
            });
         

        });*@
        // $("#nextsp").click(function () {
        if (usertype != "6") {
            if (usertype == "5") {

            } else {
                if (cuscod == "") {

                    var wi = window.open("../SeleScrCustomer/dashboard");
                    wi.focus();
                } else {
                    $.ajax({
                        url: '@Url.Action("GetdatabyCus", "DataCenter")',
                        data: {
                            cusel: cuscod
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            //console.log(data);
                            //$("#cusname").text("Custome Code:" + data[0].CUSCOD + "/" + data[0].CUSNAM);
                            $("#cusname").text(data[0].CUSNAM + " (" + data[0].CUSCOD + ")");
                            $("#addcus").text(data[0].ADDR_01 + data[0].ADDR_02);
                            $("#crlicusaac").text("AAC: " + commaSeparateNumber(data[0].AACCrlimit));
                            $("#crlicustac").text("TAC: " + commaSeparateNumber(data[0].TACCrlimit));
                            $("#crbarcusaac").text("AAC: " + commaSeparateNumber(data[0].AACBalance));
                            $("#crbarcustac").text("TAC: " + commaSeparateNumber(data[0].TACBalance));
                            $("#d1").text(data[0].CUSNAM + " (" + data[0].CUSCOD + ")");
                            getCreditcuskey(cuscod);//ดึงวงเงินจากร้านแม่
                        }
                    });
                }
            }
        } else if (usertype == "6") {
            $("#menu").css("display", "block");
            if (cuscod == "") {
                var wi = window.open("../Account/LogIn");
                wi.focus();
            } else {
                $.ajax({
                    url: '@Url.Action("GetdatabyCus", "DataCenter")',
                    data: {
                        cusel: cuscod
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        //console.log(data);
                        // $("#cusname").text("Custome Code" + data[0].CUSCOD + "  Customer Name" + data[0].CUSNAM);
                        $("#cusname").text(data[0].CUSNAM + " (" + data[0].CUSCOD + ")");
                        $("#addcus").text(data[0].ADDR_01 + data[0].ADDR_02);
                        $("#crlicusaac").text("AAC: " + commaSeparateNumber(data[0].AACCrlimit));
                        $("#crlicustac").text("TAC: " + commaSeparateNumber(data[0].TACCrlimit));
                        $("#crbarcusaac").text("AAC: " + commaSeparateNumber(data[0].AACBalance));
                        $("#crbarcustac").text("TAC: " + commaSeparateNumber(data[0].TACBalance));
                        $("#d1").text(data[0].CUSNAM + " (" + data[0].CUSCOD + ")");
                        getCreditcuskey(cuscod);//ดึงวงเงินจากร้านแม่
                    }
                });
            }
        } else if (usertype == "") {
            var wi = window.open("../Account/LogIn");
            wi.focus();
        }
        function getCreditcuskey(cusel) {
            $.ajax({
                url: '@Url.Action("GetdCustomerCredit", "DataCenter")',
                data: {
                    cusel: cusel
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    //console.log(data);

                    $("#crlicusaac").text("AAC: " + commaSeparateNumber(data[0].AACCrlimit));
                    $("#crlicustac").text("TAC: " + commaSeparateNumber(data[0].TACCrlimit));


                }
            });
        }
        $(document).on('click', '#btncheck', function () {
            window.location.replace("../Cart/Index?numcuber=" + btoa(cuscod));

        });
        $('#navbarcart').click(function () {
            // $(document).on("click", "#navbarcart", function () {

            //var wi = window.open("../Cart/Index");
            if (cuscod == "") {
                var wi = window.open("../Account/LogIn");
                wi.focus();
            } else {
                var wi = window.open("../Cart/Index?numcuber=" + btoa(cuscod));
                wi.focus();
            }
        });
        $(document).on("click", "#btnhome", function () {
            //var wi = window.open("../Cart/Index");
            if (cuscod == "") {
                var wi = window.open("../Account/LogIn");
                wi.focus();
            } else {
                var wi = window.open("../Home/Index?numcuber=" + btoa(cuscod));
                wi.focus();
            }
        });
        $(document).on("click", "#btncart", function () {
            //var wi = window.open("../Cart/Index");
            if (cuscod == "") {
                var wi = window.open("../Account/LogIn");
                wi.focus();
            } else {
                var wi = window.open("../Cart/Index?numcuber=" + btoa(cuscod));
                wi.focus();
            }
        });
        $(document).on("click", "#btndetail", function () {
            //var wi = window.open("../Cart/Index");

            if (cuscod == "") {
                var wi = window.open("../Account/LogIn");
                wi.focus();
            } else {
                window.location.replace("../SeleScrCustomer/dashboard?numcuber=" + btoa(cuscod));
            }
            // var wi = window.open("../SeleScrCustomer/Index?numcuber=" + btoa(cuscod));
            // wi.focus();

        });
        $(document).on("click", "#btnstatus", function () {
            //var wi = window.open("../Cart/Index");
            //var wi = window.open("../Statuslist/Index?numcuber=" + btoa(cuscod));
            //wi.focus();
            if (cuscod == "") {
                var wi = window.open("../Account/LogIn");
                wi.focus();
            } else {
                window.location.replace("../Statuslist/Index?numcuber=" + btoa(cuscod));
            }
        });
        $("#segment").selectpicker({
            noneSelectedText: 'ประเภทรถยนต์(segment)' // by this default 'Nothing selected' -->will change to Please Select
        });
        $("#productgroup").selectpicker({
            noneSelectedText: 'หมวดสินค้า(Product Group)' // by this default 'Nothing selected' -->will change to Please Select
        });
        $("#productline").selectpicker({
            noneSelectedText: 'ประเภทสินค้า(Product Line)' // by this default 'Nothing selected' -->will change to Please Select
        });
        $("#brand").selectpicker({
            noneSelectedText: 'Brand' // by this default 'Nothing selected' -->will change to Please Select
        });
        $("#maker").selectpicker({
            noneSelectedText: 'ยี่ห้อรถ(Maker)' // by this default 'Nothing selected' -->will change to Please Select
        });
        $("#Model").selectpicker({
            noneSelectedText: 'รุ่น(Model)' // by this default 'Nothing selected' -->will change to Please Select
        });
        $("#catalogue").selectpicker({
            noneSelectedText: 'Group' // by this default 'Nothing selected' -->will change to Please Select
        });
        //$(".selectpicker").selectpicker({
        //    noneSelectedText: 'Please Select' // by this default 'Nothing selected' -->will change to Please Select
        //});
    </script>
    
    <script src="https://www.google-analytics.com/analytics.js" async></script>
</body>
</html>
