@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/layout_tmart.cshtml";
    // Layout = "~/Views/Shared/View3.cshtml";
    var Xcusdiscount = ViewBag.Xcusdiscount;
    var Xcompany = ViewBag.company;
    var XTermDay = ViewBag.TermDay;
}

<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Cart Totals</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=1024, initial-scale=1, shrink-to-fit=no">

    <link href="~/Content/Normalize.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>
    <script src="~/CSS/jQueryv3.1.1.js"></script>

    <link href="~/Content/w3css.css" rel="stylesheet" />
    <style>
      
        .hidden {
            display: none;
        }

        input[type=checkbox] {
            transform: scale(1.8);
        }
        /*Responsive table*/
        #exampletb {
            width: 100%;
            border-collapse: collapse;
            background: #34495e36;
            color: #382626fa;
        }
            /* Zebra striping */
            #exampletb tr:nth-of-type(odd) {
                /*background: #16a085;*/
                /*background: rgb(161, 195, 207);*/
                background: rgb(246 249 250);
            }

            #exampletb th {
                /*background: #2c3e50;
                font-weight: bold;*/
                background: #454fae;
                font-weight: bold;
                color: bisque;
                font-size: smaller;
            }

        #tbaddr {
            width: 100%;
            border-collapse: collapse;
            border-bottom: 1px solid #15c;
            color: #382626fa;
        }

            #tbaddr tr td {
                padding-left: 16px;
                padding-bottom: 10px;
            }

            #tbaddr th {
                padding-left: 16px;
                padding-bottom: 10px;
            }

        #changepass {
            color: #0275d8;
            text-decoration: none;
            margin-bottom: 18px;
            text-align: center;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <!--[if lt IE 8]>
        <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
    <!-- Body main wrapper start -->
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <div class="wrapper fixed__footer">
        <!-- Start Header Style -->
        <!-- End Header Style -->
        @*<div class="body__overlay"></div>*@
        <!-- Start Offset Wrapper -->
        <div class="offset__wrapper">
            <!-- Start Search Popap -->
            @*<div class="search__area">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="search__inner">
                                    <form action="#" method="get">
                                        <input placeholder="Search here... " type="text">
                                        <button type="submit"></button>
                                    </form>
                                    <div class="search__close__btn">
                                        <span class="search__close__btn_icon"><i class="zmdi zmdi-close"></i></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>*@
            <!-- End Search Popap -->
            <!-- Start Cart Panel -->
            <!-- <div class="shopping__cart">
                <div class="shopping__cart__inner">
                    <div class="offsetmenu__close__btn">
                        <a href="#"><i class="zmdi zmdi-close"></i></a>
                    </div>
                    <div class="shp__cart__wrap">
                        <div class="shp__single__product">
                            <div class="shp__pro__thumb">
                                <a href="#">
                                    <img src="images/product/sm-img/1.jpg" alt="product images">
                                </a>
                            </div>
                            <div class="shp__pro__details">
                                <h2><a href="product-details.html">BO&Play Wireless Speaker</a></h2>
                                <span class="quantity">QTY: 1</span>
                                <span class="shp__price">$105.00</span>
                            </div>
                            <div class="remove__btn">
                                <a href="#" title="Remove this item"><i class="zmdi zmdi-close"></i></a>
                            </div>
                        </div>
                        <div class="shp__single__product">
                            <div class="shp__pro__thumb">
                                <a href="#">
                                    <img src="images/product/sm-img/2.jpg" alt="product images">
                                </a>
                            </div>
                            <div class="shp__pro__details">
                                <h2><a href="product-details.html">Brone Candle</a></h2>
                                <span class="quantity">QTY: 1</span>
                                <span class="shp__price">$25.00</span>
                            </div>
                            <div class="remove__btn">
                                <a href="#" title="Remove this item"><i class="zmdi zmdi-close"></i></a>
                            </div>
                        </div>
                    </div>
                    <ul class="shoping__total">
                        <li class="subtotal">Subtotal:</li>
                        <li class="total__price">$130.00</li>
                    </ul>
                    <ul class="shopping__btn">
                        <li><a href="cart.html">View Cart</a></li>
                        <li class="shp__checkout"><a href="checkout.html">Checkout</a></li>
                    </ul>
                </div>
            </div> -->
            <!-- End Cart Panel -->
        </div>
        <!-- End Offset Wrapper -->
        <!-- cart-main-area start -->
        <div class="cart-main-area ptb--150 bg__white">
            <div class="container">
                <div class="row">
                    <div class="col-md-8">
                        <div class="form-group">
                            <form role="form">
                                <div class="form-group">
                                    <div class="input-group ">

                                    </div>
                                </div>
                            </form>

                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <form role="form">
                                <div class="form-group">
                                    <div class="input-group ">
                                        <a href="#" id="nextspold"><<<< Shopping เวอร์ชั่นเก่า <<<<</a>
                                    </div>
                                </div>
                            </form>

                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-md-4">
                        <form role="form">
                            <div class="form-group">
                                <div class="input-group ">
                                    @*<span class="input-group-addon alert-info"><input id="checkboxall" type="checkbox"></span>*@
                                    <span class="input-group-addon"><input id="checkboxAll" type="checkbox"></span>
                                    <span class="input-group-btn">
                                        <div id="btncheck" class="btn btn-info btn-block" style="cursor: no-drop;"><span></span>เลือกสินค้าทั้งหมด</div>

                                    </span>
                                    <div class="input-group-addon" id="cancelxall" style=" color: red; cursor: pointer; ">ลบ</div>
                                </div>
                            </div>
                        </form>

                    </div>
                    <div class="col-md-2">
                        <form role="form">
                            <div class="form-group">
                                <div class="input-group ">
                                    <select class="form-control custom-select" id="company">
                                        <option selected="selected" value="ALL">ALL</option>
                                        <option value="TAC">TAC</option>
                                        <option value="AAC">AAC</option>
                                        <option value="OMP">OMP</option>
                                    </select>
                                </div>
                            </div>
                        </form>

                    </div>
                    <div class="col-md-2" style="text-align:right; margin-right: 40px;">
                        <div class="form-group">
                            <form role="form">
                                <div class="form-group">
                                    <div class="input-group ">
                                        @*<span class="input-group-addon alert-info"><input id="checkboxall" type="checkbox"></span>*@

                                        <span class="input-group-btn">
                                            <div id="btncheck" class="btn btn-default btn-block " style="cursor: no-drop;">จำนวนสินค้าในตระกร้า</div>
                                        </span>
                                        <span class="input-group-addon"><i id="Cuqty" style="color: crimson; font-size: large; font: icon;"></i> ชิ้น</span>
                                        <span class="input-group-addon"><i id="Cuitem" style="color: crimson; font-size: large; font: icon;">0</i> เบอร์</span>
                                    </div>
                                </div>
                            </form>

                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-md-8" id="qoutsw">

                        <div class="input-group">
                            <span class="input-group-addon ">Quotation No.<span class=" glyphicon glyphicon-hand-right"></span></span>

                            <select id="qpono" class="form-control" style="color:black"></select>
                        </div>

                    </div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <input type="hidden" id="accessIdCurrent" value="" />
                        </div>
                    </div>
                    @*<div class="col-md-2">
                            <div class="form-group">
                                <form id="search-form" method="get" name="searchForm">
                                    <div class="search-input-container">
                                        <span id="search-icon" data-search-img="search-icon">By:</span>
                                        <select>
                                            <option value="0">ALL</option>
                                            <option value="1">SalesCo</option>
                                            <option value="2">Sales Man</option>
                                            <option value="3">SalesCo&Sales Man</option>
                                            <option value="4">Customer</option>
                                        </select>


                                    </div>
                                </form>

                            </div>
                        </div>*@
                </div>
                <div class="row">
                    <div class="col-md-12 col-sm-12 col-xs-12">


                        <div class="fixed-table-container" id="fixed-table-container-1" style="z-index: 1;">
                            <table id="exampletb" style="border-bottom: 1px solid #ccc;">
                                <thead>
                                    <tr>
                                        <th class="product-thumbnail" style="line-height: 31px;">เลือก</th>
                                        <th class="product-thumbnail">ลำดับ</th>
                                        <th class="product-remove">ลบ</th>

                                        @*<th class="product-name">Type</th>*@
                                        <th class="product-name">เบอร์สินค้า</th>
                                        <th class="product-name">ชื่อสินค้า</th>
                                        @*<th class="product-quantity">Stkgrp</th>*@
                                        <th class="product-thumbnail">จำนวนสั่งซื้อ</th>
                                        <th class="product-price">ราคาต่อชิ้น</th>
                                        @*<th class="product-price">ส่วนลด</th>
                                            <th class="product-price">ราคาซื้อ</th>*@
                                        <th class="product-price" id="column-i">ราคาต่อรอง</th>

                                        <th class="product-price">ราคารวม</th>
                                        <th class="product-subtotal">Back<br>order</th>
                                        <th class="product-subtotal" id="column-l">Stock</th>
                                        <th class="product-subtotal" id="column-lKDC">Stock<br>KDC</th>
                                        <th class="product-subtotal" id="column-lPDC">Stock<br>PDC</th>
                                        <th class="product-subtotal" id="column-lWH">WH<br>Location</th>
                                        <th class="product-name">Line Note</th>
                                        <th class="product-name">หมายเหตุ PM</th>
                                        <th class="product-name">วันที่เลือกซื้อ</th>
                                        <th class="product-name">โปรโมชั่น</th>

                                        @*<th class="product-name">สถานะสินค้า</th>*@
                                        <th class="product-name">Type</th>
                                        @*<th class="product-name" style="display:none">Status</th>
                                            <th class="product-name" style="display:none">PromotionDes</th>*@
                                    </tr>
                                </thead>
                                <tbody></tbody>

                            </table>
                        </div>
                        <div class="row">
                            <div class="col-md-8 col-sm-7 col-xs-12">
                                <!--  <div class="buttons-cart">
                                    <input type="submit" value="Update Cart" />
                                    <a href="#">Continue Shopping</a>
                                </div>-->
                                <!-- <div class="coupon">
                                    <h3>Coupon</h3>
                                    <p>Enter your coupon code if you have one.</p>
                                    <input type="text" placeholder="Coupon code" />
                                    <input type="submit" value="Apply Coupon" />
                                </div>-->
                            </div>
                            <input type="text" id="CustomerShipping" style="display:none" disabled="disabled" class="form-control input-lg" name="example">
                            <input type="text" id="codeShipping" style="display:none" disabled="disabled" class="form-control input-lg" name="example">
                            <input type="text" id="NameShipping" class="form-control" style="display:none" disabled="disabled">
                            <input type="text" id="AddressShipping" class="form-control" style="display:none" disabled="disabled">
                            <div class="col-md-12">
                                <h2>การจัดส่ง</h2>
                                <div>
                                    <table id="tbaddr">
                                        <tbody>
                                            <tr>
                                                <th>ที่อยู่ในการจัดส่ง/ใบกำกับภาษี</th>
                                                <td colspan="4">
                                                    <textarea class="form-control" rows="3" id="shipadd" style="z-index: 0;background-color: white;border: 0px;" disabled="disabled" name="example"></textarea>
                                                </td>
                                            </tr>
                                            <tr class="cart-subtotal">
                                                <th>เปลี่ยนที่อยู่จัดส่ง</th>
                                                <td>
                                                    <div class="col-md-2">
                                                        <div class="form-group">
                                                            <div class="input-group">
                                                                <span class="input-group-addon" id="ClickShipping" style="background-color: #7FC1A9;cursor: pointer;color: white;">Ship To Code<span class=" glyphicon glyphicon-hand-right"></span></span>
                                                                <!--<input type="text" id="ClickShipping" style="background-color:white;cursor: pointer;" class="form-control input-lg" name="example">-->

                                                                <span class="input-group-addon " style="background-color: currentColor;"><span id="scs" style="color: cyan;"></span><span></span></span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </td>
                                                <td colspan="4"><textarea class="form-control" rows="3" id="changeshipadd" style="z-index: 0;background-color: white;border: 0px;" disabled="disabled" name="example"></textarea> </td>
                                            </tr>



                                            <tr class="cart-subtotal">
                                                <th>Delivery Mode</th>
                                                <th style="width: 30px;"><select id="Modtype_ID" class="form-control"></select></th>
                                                <td>
                                                    Date Received
                                                </td>
                                                <td>
                                                    <input type="text" id="ModdatepickerStart" style="z-index: 0; color: rgb(6, 6, 6); background-color: white; text-align: right; border: 0px;" disabled="disabled" class="form-control input-lg" name="example">
                                                </td>
                                                <td>
                                                    Time Received
                                                </td>
                                                <td>
                                                    <input type="text" id="Modtime" style="z-index: 0; color: rgb(6, 6, 6); background-color: white; text-align: right; border: 0px;" disabled="disabled" class="form-control input-lg" name="example">
                                                </td>
                                            </tr>
                                            <tr class="cart-subtotal">
                                                <th>Type ส่งสินค้า</th>

                                                <td>
                                                    <select id="Ordertype_ID" class="form-control"></select>
                                                </td>
                                                <td>
                                                    วันที่ส่งสินค้า
                                                </td>
                                                <td>
                                                    <input id="datepickerStart" type="text" class="form-control" disabled="disabled" name="begin">

                                                </td>
                                                <td>
                                                    เวลา HH:mm:ss
                                                </td>
                                                <td>
                                                    <input type="text" id="time" class="form-control input-lg" name="example" style="z-index: 0; color: rgb(6, 6, 6); background-color: white; text-align: right; border: 0px;" disabled="disabled">
                                                </td>
                                            </tr>
                                            <tr class="cart-subtotal">
                                                <th>ขนส่ง</th>
                                                <th>
                                                    <select id="codetransportation" class="form-control" style="color:black">
                                                        <option value="0">เลือก ขนส่ง</option>
                                                    </select>
                                                </th>
                                                <td>
                                                    Customer PO
                                                </td>
                                                <td>
                                                    <input type="text" id="CusPo" class="form-control">
                                                </td>
                                            </tr>

                                            <tr class="cart-subtotal">
                                                <th>Comment By Order</th>
                                                <td colspan="4">
                                                    <textarea class="form-control" rows="3" id="CommentByOrder"></textarea>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                </div>
                            </div>
                            <div class="col-md-1">
                            </div>
                            <div class="col-md-12">
                                @*<div class="cart_totals" style="z-index: 1; overflow: auto; position: relative;">*@
                                <div class="table-responsive">
                                    <h2 style="float: right;">สรุปรายการสั่งซื้อ</h2><br />
                                    <table class="table">
                                        <tbody>
                                            <tr class="cart-subtotal">
                                                <td>จำนวนสินค้า/Total Qty</td>
                                                <td></td>
                                                <td></td>
                                                <td style="float: right;"><span class="amount"><input id="bQty" style="z-index: 0; color: rgb(6, 6, 6); background-color: white; text-align: right; border: 0px; font-weight: bold;" disabled="disabled" /></span></td>
                                            </tr>
                                            <tr class="cart-subtotal">
                                                <td>จำนวนเบอร์สินค้า/No of Product</td>
                                                <td></td>
                                                <td></td>
                                                <td style="float: right;"><span class="amount"><input id="bQtystk" style="z-index: 0; color: rgb(6, 6, 6); background-color: white; text-align: right; border: 0px; font-weight: bold;" disabled="disabled" /></span></td>
                                            </tr>
                                            <tr class="cart-subtotal">
                                                <td>Subtotal</td>
                                                <td></td>
                                                <td></td>
                                                <td style="float: right;"><span class="amount"><input id="bAmtSalePrices" style="z-index: 0; color: rgb(6, 6, 6); background-color: white; text-align: right; border: 0px; font-weight: bold;" disabled="disabled" /></span></td>
                                            </tr>

                                            <tr class="cart-subtotal">
                                                <td>เครดิต/Credit Term</td>
                                                <td></td>
                                                <td><select class="form-control" id="cho-pay" style="background-color: rgba(208, 182, 75, 0.31);"><option value="1">ชำระปกติ</option><option value="2">ชำระเงินสด</option></select></td>
                                                <td>
                                                    <span class="amount">
                                                        <input type="text" class="form-control" id="CreditTerm" style="z-index: 0; color: rgb(6, 6, 6); background-color: white; text-align: right; border: 0px; font-weight: bold;" disabled="disabled" />
                                                        @*@Html.DropDownList("CreditTerm", (IEnumerable<SelectListItem>)XTermDay, new { @class = "form-control input-lg " })*@
                                                    </span>
                                                </td>
                                            </tr>

                                            <tr class="cart-subtotal" id="boxdis">
                                                <td><input type="checkbox" checked="checked" id="ckeckdiscount" name="vehicle" value="1">     ส่วนลดท้ายบิล</td>
                                                <td><input id="inputdis" type="number" min="0" style="width: 89px;" class="form-control"></td>
                                                <td style="text-align:left;">
                                                    <select id="discon" style="width: 89px;" class="form-control">
                                                        <option value="2">Baht</option>
                                                        <option value="0">%</option>
                                                    </select>
                                                    <a id="btncal" style="cursor: pointer; font-size: medium; font-weight: bold;">>>>กดคํานวณส่วนลด<<<</a>
                                                </td>
                                                <td style="float: right;"> <span class="amount"><input id="sumdiscountprice" style="z-index: 0; color: rgb(6, 6, 6); background-color: white; text-align: right; border: 0px; font-weight: bold;" /></span></td>
                                            </tr>
                                            <tr class="cart-subtotal" id="boxlabo">
                                                <td><input type="checkbox" id="checklabor" name="vehiclelabor" value="2">     ค่าแรง</td>
                                                <td><input id="inputlabor" type="number" min="0" style="width: 89px;" class="form-control" disabled="disabled"></td>
                                                <td style="text-align:left;">
                                                    <select id="disconlabor" style="width: 89px;" class="form-control">
                                                        <option value="2">Baht</option>
                                                        <option value="0">%</option>
                                                    </select>
                                                    <a id="btncallabor" style="cursor: pointer; font-size: medium; font-weight: bold;">>>>กดคํานวณค่าแรง<<<</a>
                                                </td>
                                                <td style="float: right;"><span class="amount"><input id="sumdiscountpricelabor" style="z-index: 0; color: rgb(6, 6, 6); background-color: white; text-align: right; border: 0px; font-weight: bold;" /></span></td>
                                            </tr>
                                            <tr class="cart-subtotal">
                                                <td>ส่วนลดเงินสด % /Cash Discount</td>
                                                <td></td>
                                                <td>
                                                    @*<input id="dCredit" style="width: 89px;color: rgb(6, 6, 6);background-color: rgba(208, 182, 75, 0.31);text-align: right;/* border: 9px blue; */font-weight: bold;line-height: initial;" disabled="disabled">*@

                                                    @if (Xcusdiscount != "")
                                                    {
                                                        <select id="dCredit" class="form-control" style="width: 89px;color: rgb(6, 6, 6);background-color: rgba(208, 182, 75, 0.31);text-align: right;/* border: 9px blue; */font-weight: bold;line-height: initial;">
                                                            <option selected="selected" value="@Xcusdiscount">@Xcusdiscount%</option>
                                                            <option value="0">0</option>
                                                            <option value="1">1%</option>
                                                            <option value="1.5">1.5%</option>
                                                            <option value="2">2%</option>
                                                            <option value="2.5">2.5%</option>
                                                            <option value="3">3%</option>
                                                        </select>
                                                    }
                                                    else
                                                    {
                                                        <select id="dCredit" class="form-control" style="width: 89px;color: rgb(6, 6, 6);background-color: rgba(208, 182, 75, 0.31);text-align: right;/* border: 9px blue; */font-weight: bold;line-height: initial;">

                                                            <option value="0">0</option>
                                                            <option value="1">1%</option>
                                                            <option value="1.5">1.5%</option>
                                                            <option value="2">2%</option>
                                                            <option value="2.5">2.5%</option>
                                                            <option value="3">3%</option>
                                                        </select>
                                                    }
                                                </td>

                                                <td colspan="2"><span class="amount"><input type="text" id="bdicAmt" readonly="readonly" style="z-index: 0; color: rgb(6, 6, 6); background-color: white; text-align: right; border: 0px; font-weight: bold;" /></span></td>
                                            </tr>
                                            <tr class="cart-subtotal">
                                                <td>จำนวนเงินก่อนภาษี/Net</td>
                                                <td></td>
                                                <td></td>
                                                <td style="float: right;"><span class="amount"><input id="texttotDis" style="z-index: 0; color: rgb(6, 6, 6); background-color: white; text-align: right; border: 0px; font-weight: bold;" /></span></td>
                                            </tr>
                                            <tr class="cart-subtotal">
                                                <td>ภาษี 7% /Vat</td>
                                                <td></td>
                                                <td></td>
                                                <td style="float: right;"><span class="amount"><input id="bvat" style="z-index: 0; color: rgb(6, 6, 6); background-color: white; text-align: right; border: 0px; font-weight: bold;" /></span></td>
                                            </tr>

                                            <!-- <tr class="shipping">
                                                <th>Shipping</th>
                                                <td>
                                                    <ul id="shipping_method">
                                                        <li>
                                                            <input type="radio" />
                                                            <label>
                                                                Flat Rate: <span class="amount">£7.00</span>
                                                            </label>
                                                        </li>
                                                        <li>
                                                            <input type="radio" />
                                                            <label>
                                                                Free Shipping
                                                            </label>
                                                        </li>
                                                        <li></li>
                                                    </ul>
                                                    <p><a class="shipping-calculator-button" href="#">Calculate Shipping</a></p>
                                                </td>
                                            </tr>-->
                                            <tr class="order-total">
                                                <td>ยอดเงิน/Total</td>
                                                <td></td>
                                                <td></td>
                                                <td style="float: right;">
                                                    <strong><span class="amount"><input id="bAmt" style="z-index: 0; color: rgb(6, 6, 6); background-color: white; text-align: right; border: 0px; font-weight: bold;" /></span></strong>
                                                </td>
                                            </tr>
                                            <tr class="cart-subtotal">
                                                <td colspan="2">
                                                    @*<span class="fa fa-print" style="color: blue; cursor: pointer; font-size: x-large;" id="btnsubmitinsertquote">Print Quotation</span>*@
                                                    <div class="contact-btn">
                                                        <button type="submit" class="fv-btn" id="btnsubmitinsertquote" style="background-color: #d75581;">
                                                            Quotation
                                                        </button>
                                                    </div>
                                                </td>
                                                <td colspan="2">
                                                    <div class="contact-btn">
                                                        <button type="submit" class="fv-btn" id="btnsubmitinsert" style="background-color: aqua;">
                                                            Confirm Order
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                </div>
                            </div>





                        </div>

                    </div>
                </div>
            </div>
        </div>
        <!-- cart-main-area end -->
        <!-- Start Footer Area -->
        @*<footer class="htc__foooter__area gray-bg">
                <div class="container">
                    <div class="row">
                        <div class="footer__container clearfix">
                            <!-- Start Single Footer Widget -->
                            <div class="col-md-3 col-lg-3 col-sm-6">
                                <div class="ft__widget">
                                    <div class="ft__logo">
                                        <a href="index.html">
                                            <img src="images/logo/logo.png" alt="footer logo">
                                        </a>
                                    </div>
                                    <div class="footer-address">
                                        <ul>
                                            <li>
                                                <div class="address-icon">
                                                    <i class="zmdi zmdi-pin"></i>
                                                </div>
                                                <div class="address-text">
                                                    <p>194 Main Rd T, FS Rayed <br> VIC 3057, USA</p>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="address-icon">
                                                    <i class="zmdi zmdi-email"></i>
                                                </div>
                                                <div class="address-text">
                                                    <a href="#"> info@example.com</a>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="address-icon">
                                                    <i class="zmdi zmdi-phone-in-talk"></i>
                                                </div>
                                                <div class="address-text">
                                                    <p>+012 345 678 102 </p>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                    <ul class="social__icon">
                                        <li><a href="#"><i class="zmdi zmdi-twitter"></i></a></li>
                                        <li><a href="#"><i class="zmdi zmdi-instagram"></i></a></li>
                                        <li><a href="#"><i class="zmdi zmdi-facebook"></i></a></li>
                                        <li><a href="#"><i class="zmdi zmdi-google-plus"></i></a></li>
                                    </ul>
                                </div>
                            </div>
                            <!-- End Single Footer Widget -->
                            <!-- Start Single Footer Widget -->
                            <div class="col-md-3 col-lg-2 col-sm-6 smt-30 xmt-30">
                                <div class="ft__widget">
                                    <h2 class="ft__title">Categories</h2>
                                    <ul class="footer-categories">
                                        <li><a href="shop-sidebar.html">Men</a></li>
                                        <li><a href="shop-sidebar.html">Women</a></li>
                                        <li><a href="shop-sidebar.html">Accessories</a></li>
                                        <li><a href="shop-sidebar.html">Shoes</a></li>
                                        <li><a href="shop-sidebar.html">Dress</a></li>
                                        <li><a href="shop-sidebar.html">Denim</a></li>
                                    </ul>
                                </div>
                            </div>
                            <!-- Start Single Footer Widget -->
                            <div class="col-md-3 col-lg-2 col-sm-6 smt-30 xmt-30">
                                <div class="ft__widget">
                                    <h2 class="ft__title">Infomation</h2>
                                    <ul class="footer-categories">
                                        <li><a href="about.html">About Us</a></li>
                                        <li><a href="contact.html">Contact Us</a></li>
                                        <li><a href="#">Terms & Conditions</a></li>
                                        <li><a href="#">Returns & Exchanges</a></li>
                                        <li><a href="#">Shipping & Delivery</a></li>
                                        <li><a href="#">Privacy Policy</a></li>
                                    </ul>
                                </div>
                            </div>
                            <!-- Start Single Footer Widget -->
                            <div class="col-md-3 col-lg-3 col-lg-offset-1 col-sm-6 smt-30 xmt-30">
                                <div class="ft__widget">
                                    <h2 class="ft__title">Newsletter</h2>
                                    <div class="newsletter__form">
                                        <p>Subscribe to our newsletter and get 10% off your first purchase .</p>
                                        <div class="input__box">
                                            <div id="mc_embed_signup">
                                                <form action="#" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
                                                    <div id="mc_embed_signup_scroll" class="htc__news__inner">
                                                        <div class="news__input">
                                                            <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Email Address" required>
                                                        </div>
                                                        <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                                                        <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_6bbb9b6f5827bd842d9640c82_05d85f18ef" tabindex="-1" value=""></div>
                                                        <div class="clearfix subscribe__btn">
                                                            <input type="submit" value="Send" name="subscribe" id="mc-embedded-subscribe" class="bst__btn btn--white__color">

                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- End Single Footer Widget -->
                        </div>
                    </div>
                    <!-- Start Copyright Area -->
                    <div class="htc__copyright__area">
                        <div class="row">
                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                <div class="copyright__inner">
                                    <div class="copyright">
                                        <p>
                                            © 2017 <a href="https://freethemescloud.com/">Free themes Cloud</a>
                                            All Right Reserved.
                                        </p>
                                    </div>
                                    <ul class="footer__menu">
                                        <li><a href="index.html">Home</a></li>
                                        <li><a href="shop.html">Product</a></li>
                                        <li><a href="contact.html">Contact Us</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Copyright Area -->
                </div>
            </footer>*@
        <!-- End Footer Area -->
    </div>
    <!-- Body main wrapper end -->
    <!-- Placed js at the end of the document so the pages load faster -->
    <!-- jquery latest version -->
    <div class="body__overlay"></div>
    <!-- Start Offset MEnu -->
    <div class="offsetmenu">
        <div class="offsetmenu__inner">
            <div class="offsetmenu__close__btn">
                <a href="#"><i class="zmdi zmdi-close"></i></a>
            </div>
            <div class="off__contact">
                <div class="logo">
                    <a href="">
                        My Account Customer

                    </a>
                </div>
                <div class="offset__single">
                    <div id="cusname">

                    </div>

                </div>
                <p>DEFAULT BILLING ADDRESS</p>
                <div class="offset__single">
                    <div id="addcus">

                    </div>

                </div>
            </div>

            <div class="offset__widget">
                <div class="offset__single">
                    <h4 class="offset__title">Credit Limit</h4>
                    <div id="crlicusaac">

                    </div>
                    <div id="crlicustac">

                    </div>
                </div>
                <div class="offset__single">
                    <h4 class="offset__title">Credit Balance</h4>
                    <div id="crbarcusaac">

                    </div>
                    <div id="crbarcustac">

                    </div>
                </div>
            </div>
            <div class="offset__sosial__share">
                <div class="offset__title" id="changepass">Change password</div>

                @*<h4 class="offset__title">Follow Us On Social</h4>
                    <ul class="off__soaial__link">
                        <li><a class="bg--twitter" href="#" title="Twitter"><i class="zmdi zmdi-twitter"></i></a></li>

                        <li><a class="bg--instagram" href="#" title="Instagram"><i class="zmdi zmdi-instagram"></i></a></li>

                        <li><a class="bg--facebook" href="#" title="Facebook"><i class="zmdi zmdi-facebook"></i></a></li>

                        <li><a class="bg--googleplus" href="#" title="Google Plus"><i class="zmdi zmdi-google-plus"></i></a></li>

                        <li><a class="bg--google" href="#" title="Google"><i class="zmdi zmdi-google"></i></a></li>
                    </ul>*@
            </div>
        </div>
    </div>
    <!-- End Offset MEnu -->
    <!-- Modalsuccess -->
    <div class="modal" id="myModalSucces" role="dialog">
        <div class="modal-dialog">
            <div class="alert alert-success alert-dismissible" role="alert">
                <strong>Succes</strong>
                <button type="button" class="close" data-dismiss="modal" aria-label=" close"><span aria-hidden="true">&times;</span></button>

                <div class="modal-body">
                    <div id="textAlertSucces">Save success</div>
                </div>

            </div>
        </div>
    </div>
    <!-- EndModalsuccess -->
    <div class="modal" id="confirm-delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    ยืนยันการลบข้อมูล
                </div>
                <div class="modal-body">
                    คุณต้องการลบข้อมูลหรือไม่
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">ไม่ต้องการ</button>

                    <button type="button" id="del" class="btn btn-danger btn-ok" data-dismiss="modal">ต้องการ</button>
                </div>
            </div>
        </div>

    </div>
    <!-- EndModalsuccess -->
    <div class="modal" id="confirm-deleteall" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    ยืนยันการลบข้อมูล
                </div>
                <div class="modal-body">
                    คุณต้องการลบสินค้าทั้งหมดหรือไม่
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">ไม่ต้องการ</button>

                    <button type="button" id="delall" class="btn btn-danger btn-ok" data-dismiss="modal">ต้องการ</button>
                </div>
            </div>
        </div>

    </div>
    <!-- ModalWarning -->
    <div class="modal" id="myModalWarning" role="dialog">
        <div class="modal-dialog">
            <div class="alert alert-warning alert-dismissible" role="alert">
                <strong>Warning!</strong>
                <button type="button" class="close" data-dismiss="modal" aria-label=" close"><span aria-hidden="true">&times;</span></button>

                <div class="modal-body">
                    <div id="textAlertWarning">Some text in the modal.</div>
                </div>
            </div>
        </div>
    </div>
    <!-- ModalWarningConfirmorder -->
    <div class="modal fade" role="dialog" id="ModalConfirmorder" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" style="color:black;"> <i class="fa fa-info-circle" style="color: #dd8d1b;"></i> พบข้อผิดพลาด </h4>
                </div>
                <div class="modal-body">
                  @*  <h6> มี user ท่านอื่นแก้ไขหน้ารายการสินค้า กรุณากดปุ่ม <b>Refresh</b> เพื่อดำเนินการอีกครั้ง </h6>*@
                    <h6 id="textConfirmorder"></h6>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-info" id="btnConfirmorder" data-dismiss="modal"><i class="fa fa-refresh"></i> Refresh</button>
                </div>
            </div>

        </div>
    </div>
    <!-- ModalShipping -->
    <div class="modal fade" role="dialog" id="ModalShipping" data-backdrop="static" data-keyboard="false" data-focus-on="input:first">
        @*<div class="modal" id="ModalShipping" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">*@
        <div class="modal-dialog modal-lg">

            <!-- Modal content-->
            <div class="modal-content " id="ColorboxError">
                <div class="modal-header">
                    <h4 class="modal-title" style="color:black;">เลือกที่อยู่จัดส่งสินค้า</h4>
                    @*<button type="button" class="close" data-dismiss="modal" aria-label=" close"><span aria-hidden="true">&times;</span></button>*@


                </div>
                <div class="modal-body" style="overflow-y: scroll;overflow-x: scroll;">
                    <div id="textAlert">
                        <table class="table table-bordered" id="Shipping">
                            <thead style="background-color: rgb(51, 51, 51);color: white;">
                                <tr>
                                    <th>Customer</th>
                                    <th>Code</th>
                                    <th>Name</th>
                                    <th>Name2</th>
                                    <th>Address</th>
                                    <th>Address2</th>
                                    <th>City</th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                </div>

                <div class="modal-footer">

                    @*<button type="button" class="btn btn-default" id="CancalShippto" data-dismiss="modal">Cancel Ship To Code</button>*@
                    <button type="button" class="btn btn-default" id="CancalShippto" data-dismiss="modal">ส่งตามที่อยู่ในใบกำกับภาษี</button>
                    <!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
                </div>
            </div>

        </div>
    </div>
    <!-- EndModalShipping -->
    <!-- Modal summary-->

    <div class="modal" id="myModalsummary" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">

                    <h4 class="modal-title">Summary</h4>

                    <p style="color:red;" id="textProcheck"></p>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">

                    <table class="table1" style=" width:100%">
                        <thead>
                            <tr>
                                <th></th>
                                <th scope="col" abbr="Starter" colspan="4" style="text-align: right;"></th>

                            </tr>
                        </thead>

                        <tbody>
                            <tr>
                                <th scope="row">จำนวนสินค้า</th>
                                <td><p id="sumqty"></p></td>
                                <td>ชิ้น</td>
                            </tr>
                            <tr>
                                <th scope="row">จำนวนเบอร์สินค้า</th>
                                <td><p id="sumstk"></p></td>
                                <td>เบอร์</td>
                            </tr>
                            <tr style="display:none;">
                                <th scope="row">ราคาก่อนส่วนลด:</th>
                                <td><p id="Msumbeforprice"></p></td>
                                <td>บาท</td>
                            </tr>
                            <tr>
                                <th scope="row">Sub total/ราคารวมทั้งสิ้น:</th>
                                <td><p id="TotalAmt"></p></td>
                                <td>บาท</td>

                            </tr>
                            <tr>
                                <th scope="row">Discount/ส่วนลดท้ายบิล:</th>
                                <td><p id="Msumbedisprice"></p></td>
                                <td>บาท</td>
                            </tr>
                            <tr>
                                <th scope="row">ค่าแรง:</th>
                                <td><p id="summarylaber"></p></td>
                                <td>บาท</td>
                            </tr>
                            <tr style="display:none">
                                <th scope="row">ส่วนลดโปรโมชั่น:</th>
                                <td><p id="sumPro"></p></td>
                                <td>บาท</td>

                            </tr>
                            <tr>
                                <th scope="row">Cash Discount/ส่วนลดเงินสด<i id="cr"></i>:</th>
                                <td><p id="sumDiscount"></p></td>
                                <td>บาท</td>

                            </tr>
                            <tr>
                                <th scope="row">Net/จำนวนเงินก่อนภาษี:</th>
                                <td><p id="sumAmt"></p></td>
                                <td>บาท</td>

                            </tr>

                            <tr>
                                <th scope="row">Vat/ภาษี 7% :</th>
                                <td><p id="sumvat"></p></td>
                                <td>บาท</td>
                            </tr>
                            <tr style="border: 1px solid #56922a;display:none ">
                                <th scope="row">ราคาสินค้าพร้อมส่ง:</th>
                                <td><p id="sumrealprices"></p></td>
                                <td>บาท</td>
                            </tr>
                            <tr style="display:none">
                                <th scope="row">ค่าขนส่ง:</th>
                                <td><p id="sumtarnport"></p></td>
                                <td>บาท</td>
                            </tr>
                            <tr>
                                <th scope="row">Total/จำนวนเงินทั้งสิ้น :</th>
                                <td><p id="sumTol"></p></td>
                                <td>บาท</td>
                            </tr>
                            <tr>
                                <th scope="row"> <input type="hidden" id="accessIdCurrentPop" value="" /> </th>
                                <th scope="row"> <input type="hidden" id="cuscodPop" value="" /> </th>
                            </tr>

                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-success" id="btnOK" data-dismiss="modal">OK</button>
                </div>
            </div>
        </div>
    </div>
    <!-- ModalShipping -->
    <!-- Modalconfirm-Shipto-->

    <div class="modal" id="confirm-Shipto" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">

                </div>
                <div class="modal-body">
                    คุณต้องการเลือก Ship To Code หรือไม่ <i class="fa fa-shopping-cart fa-3x"></i><i class="fa fa-shopping-cart fa-2x"></i>
                </div>
                <div class="modal-footer">
                    <button type="button" id="btncancelShiptoQuote" class="btn btn-default" data-dismiss="modal" style="display:none;">No</button>
                    <button type="button" id="btncancelShipto" class="btn btn-default" data-dismiss="modal">No</button>

                    <button type="button" id="btnnext" class="btn btn-success btn-ok" data-dismiss="modal">Yes</button>
                </div>
            </div>
        </div>
        <!-- EndModaldelete -->
    </div>
    <!-- Modalconfirm-Shipto-->

    <div class="modal" id="confirm-nextshopping" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="alert alert-warning alert-dismissible" role="alert">
                <div class="modal-content">
                    <div class="modal-header">
                        <div id="textAlertnextshopping">Some text in the modal.</div>
                    </div>
                    <div class="modal-body">

                        คุณต้องการเลือก Shopping ต่อหรือไม่ <i class="fa fa-shopping-cart fa-2x"></i><i class="fa fa-shopping-cart fa-2x"></i>
                    </div>
                    <div class="modal-footer">

                        <button type="button" id="btncancelnextshopping" class="btn btn-default" data-dismiss="modal">No</button>

                        <button type="button" id="btnnextshopping" class="btn btn-success btn-ok" data-dismiss="modal">Yes</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- EndModaldelete -->
    </div>

    <div class="modal" id="myModal3" style="background-color: black;">

        <div class="modal-dialog" role="document" style="width: 360px;">

            <div class="modal-content">

                <div class="modal-header" style="background-color: #337AB7; padding: 16px 16px; color: #FFF; border-bottom: 2px dashed #337AB7; ">

                    @*<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>*@

                    <h4 class="modal-title" id="myModalLabel"></h4>

                </div>

                <div class="modal-body" id="texterror">
                </div>

                <div class="modal-footer">

                    @*<button type="button" class="btn btn btn-primary" data-dismiss="modal">OK</button>*@

                    <button type="button" class="btn btn btn-success" data-dismiss="modal" id="btnlogin">เข้าสู่ระบบอีกครั้ง</button>

                    @*<button type="button" class="btn btn-orange" data-dismiss="modal">Cancel</button>*@

                </div>

            </div>

        </div>

    </div>
    <input type="submit" id="btnChk" style="display:none" value="คำนวนcheck">
    <button type="button" data-column="#column-i" style="display:none"></button>
    <button type="button" data-column="#column-l" style="display:none"></button>
    <button type="button" data-column="#column-lKDC" style="display:none"></button>
    <button type="button" data-column="#column-lPDC" style="display:none"></button>
    <button type="button" data-column="#column-lWH" style="display:none"></button>
    <a id="btnlog" style="display:none" href="~/Account/LogIn"></a>
    <input id="ordidtemp" type="hidden">
    <script src="~/tmartcss/js/vendor/jquery-1.12.0.min.js"></script>
    <!-- Bootstrap framework js -->
    <script src="~/tmartcssjs/bootstrap.min.js"></script>
    <!-- All js plugins included in this file. -->
    <script src="~/tmartcss/js/plugins.js"></script>
    <script src="~/tmartcss/js/slick.min.js"></script>
    <script src="~/tmartcss/js/owl.carousel.min.js"></script>
    <!-- Waypoints.min.js. -->
    <script src="~/tmartcss/js/waypoints.min.js"></script>
    <!-- Main js file that contents all jQuery plugins activation. -->
    <script src="~/tmartcss/js/main.js"></script>

    <script src="~/fixed-table-master/fixed-table.js"></script>
    <link href="~/fixed-table-master/fixed-table.css" rel="stylesheet" />

    <script src="~/Loadingmodal/js/modal-loading.js"></script>
    <link href="~/Loadingmodal/css/modal-loading-animate.css" rel="stylesheet" />
    <link href="~/Loadingmodal/css/modal-loading.css" rel="stylesheet" />

    <script src="~/bootstrap-select-1.13.14/Bootstrapv4.1.0.js"></script>
    <link href="~/Scripts/bootstrap-datepicker.css" rel="stylesheet" />


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
    <script src="~/Scripts/webAddress.js"></script>
    <script src="~/Scripts/bootstrap-datepicker.js"></script>
    <script src="~/Scripts/CheckFuntion/Loginexpire.js"></script>
    @*<input type="hidden" id="_udernumber" value="@number" />
        <input type="hidden" id="_udercompan" value="@compan" />*@
    <script type="text/javascript">
            var id = '@Request.RequestContext.HttpContext.Session["ID"]';
            var userid = '@Request.RequestContext.HttpContext.Session["UserID"]';
            var usertype = '@Request.RequestContext.HttpContext.Session["UserType"]';
            var usrexpire = '@Request.RequestContext.HttpContext.Session["expdatecal"]';
            $(document).ready(function () {
                @*$.ajax({
                    url: '@Url.Action("CusDiscount", "Cart")',
                    data: {
                        cuscod: cuscod

                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        //console.log(data)
                        if (data != "") {
                            var select = $("#dCredit");
                            select.children().remove();
                            select.prepend($("<option>").val(data).text(data + '%'));
                            select.append($("<option>").val('0').text('0%'));
                            select.append($("<option>").val('2').text('2%'));
                            select.append($("<option>").val('2.5').text('2.5%'));
                            select.append($("<option>").val('3').text('3%'));
                            //$("#dCredit").val(data)

                            // $("#dCredit").attr("placeholder", data + '%');
                        } else {
                            //var select = $("#dCredit");
                            //select.children().remove();
                            //select.append($("<option>").val('0').text('0%'));
                            // $("#dCredit").val('0')
                            var select = $("#dCredit");
                            select.children().remove();
                            select.append($("<option>").val('0').text('0%'));
                            select.append($("<option>").val('2').text('2%'));
                            select.append($("<option>").val('2.5').text('2.5%'));
                            select.append($("<option>").val('3').text('3%'));
                            //  $("#dCredit").attr("placeholder", '0%');
                        }
                        //});
                        //  var CUSCODt = $("#CUSCOD option:selected").text();
                    }
                });*@

                function checkPrivilege(userid, cuscod) {
                    $.ajax({
                        url: '@Url.Action("GetdataPrivilege", "DataCenter")',
                        data: {
                            UsrID: userid,
                            cuscod: cuscod

                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            var splitstring = data.StrStstuslogin;
                            //console.log(splitstring);
                            //let text = splitstring;
                            //const myArray = text.split("|");
                            //let mysession = myArray[1];
                            //let mystatus = myArray[0];
                            // console.log("mystatus " + mystatus + "//////" + "mysession " + mysession);
                            if (splitstring == "1") {
                                $("#texterror").empty();
                                $("#texterror").text("ขออภัย ท่านทำรายการเกินระยะเวลาที่กำหนด กรุณาเข้าใช้งานใหม่อีกครั้ง");
                                $("#myModal3").modal();
                                return false;

                            }
                        }
                    });

                }
                function checklogin(userid, id) {
                    $.ajax({
                        url: '@Url.Action("GetdataSessionlogin", "DataCenter")',
                        data: {
                            UsrID: userid,
                            SessionId: id

                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            var splitstring = data.StrStstuslogin;
                            console.log(splitstring);
                            let text = splitstring;
                            const myArray = text.split("|");
                            let mysession = myArray[1];
                            let mystatus = myArray[0];

                            if (id != mysession) {
                                $("#texterror").empty();
                                $("#texterror").text("ขออภัย ท่านทำรายการเกินระยะเวลาที่กำหนด กรุณาเข้าใช้งานใหม่อีกครั้ง");
                                $("#myModal3").modal();
                                //window.location.replace("../Account/LogIn");
                            } else {

                                if (mystatus == "0") {
                                    $("#texterror").empty();
                                    $("#texterror").text("ขออภัย ท่านทำรายการเกินระยะเวลาที่กำหนด กรุณาเข้าใช้งานใหม่อีกครั้ง");
                                    $("#myModal3").modal();
                                    //window.location.replace("../Account/LogIn");
                                }
                            }
                        }
                    });

                }
                if (usertype == "6") {
                    if (cuscod != "") {
                        checkPrivilege(userid, cuscod)
                    }
                    $(window).on('load', function () {
                        //alert("load")
                        checklogin(userid, id)
                    });
                    window.onclick = function () {
                        //alert("onclick")
                        checklogin(userid, id)
                    };
                    $('.navbar-nav').click(function () {
                        // alert("navbar-nav")
                        checklogin(userid, id)
                    });
                    $(document).bind('mousedown keydown', function (ed, e) {

                        checklogin(userid, id)
                    });
                    $(window).scroll(function (e) {

                        checklogin(userid, id)
                    });
                    $("#qoutsw").css("display", "none");
                    $("#btnsubmitinsertquote").css("display", "none");
                }
                $('#btnlogin').click(function () {
                    if (usertype == "6") {
                        window.location.replace("../Account/LogIn");
                    }
                });
                $(document).on("click", "#myModal3", function () {
                    // $('#myModal3').click(function () {
                    if (usertype == "6") {
                        $("#myModal3").modal({ backdrop: "static" });
                    }
                });

                $('#changepass').click(function () {
                    if (usertype == "6") {
                        window.location.replace("../ChangePassword/Index");
                    }
                });
                $('.button-left').click(function () {
                    $('.sidebar').toggleClass('fliph');

                });
                $('li a .toggle__menu').on('click', function () {


                    $('.offsetmenu').addClass('offsetmenu__on');
                    $('.body__overlay').addClass('is-visible');

                });
                $('.offsetmenu__close__btn').on('click', function () {

                    $('.offsetmenu').removeClass('offsetmenu__on');
                    $('.body__overlay').removeClass('is-visible');


                });
                $('.body__overlay').on('click', function () {

                    $('.offsetmenu').removeClass('offsetmenu__on');
                    $('.body__overlay').removeClass('is-visible');


                });

            });
            $('#myModalsummary').modal({
                backdrop: 'static',
                keyboard: true,
                show: false
            });
            var fixedTable1 = fixTable(document.getElementById('fixed-table-container-1'));
            //fixTable(document.getElementById('fixed-table-container-2'));
            function nl1br(el) {

                var html = el.substring(0, 40) + "<br>" + el.substring(40, 80) + "<br>" + el.substring(80, 120);
                return html;
            }


        function ShoppingCart_list(shipto, quatation) {
                var valStatus = "N,W";
                var valQuatation = "";
                if (quatation != "") {
                    valQuatation = quatation;
                    valStatus = "Q";
                }
                var CUSCOD = cuscod;
                var Company = $("#company").val();
                var loading = new Loading({ direction: 'hor', discription: 'Loading...', defaultApply: true });
                //var loading = "";
                $.ajax({
                    url: '@Url.Action("GetdataShopping", "Cart")',
                    data: {
                        CUSCOD: CUSCOD,
                        Company: Company,
                        usrlogin: userid,
                        usrtype: usertype,
                        shiptocode: shipto,
                        quatation: valQuatation,
                        status: valStatus,
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        // $("#exampletb").empty();
                        //console.log(data)

                        if (data.exerror != "") {
                            //waitingDialog.hide();
                            loading.out()
                            $("#textAlertWarning").empty();
                            $("#textAlertWarning").text(data.exerror);
                            $("#myModalWarning").modal();
                            return false;
                        }
                        $("#Cuqty").text(data.sumQty);
                        var datacount = new Array();
                        var datacountfoc = new Array();
                        var datacountsum = new Array();
                        var datacountQty = new Array();
                        var chunk = 0;
                        var chunkfoc = 0;
                        var chunksum = 0;
                        for (var i = 0; i < data.Getdata.length; i++) {
                            var Item_Type = data.Getdata[i].val.Item_Type;
                            if (Item_Type == "FOC") {
                                datacountfoc.push(Item_Type);
                            }
                        }
                        var Fsumfoc = datacountfoc.length;
                        for (var i = 0; i < data.Getdata.length; i++) {

                            chunk += parseFloat(data.Getdata[i].val.Qty);
                            datacount.push(data.Getdata[i].val.Qty);
                            var cc = data.Getdata[i].val.STKCOD;
                            datacountsum.push(cc);
                        }
                        var arrInput = datacountsum;
                        var sorted_arr = datacountsum.sort();
                        var sorted_arrnum = 0;
                        var results = [];
                        for (var i = 0; i < sorted_arr.length - 1; i++) {
                            var x = $.trim(sorted_arr[i]);
                            var y = $.trim(sorted_arr[i + 1]);
                            if (y == x) {
                                results.push(x);
                            }
                        }
                        var bsum = sorted_arr.length;
                        var fsum = results.length;
                        // $("#Cuqty").text(chunk + chunkfoc);
                        //$("#Cuqty").digits();
                        $("#Cuitem").text(bsum - fsum);
                        var list = new Array();
                        var listfoc = new Array();
                        var sumlist;
                        for (var i = 0; i < data.Getdata.length; i++) {
                            var exparr = data.Getdata[i].val.ExpectPrice;
                            var Typearr = data.Getdata[i].val.Item_Type;
                            var sta = data.Getdata[i].val.Status;

                            if (sta == "N") {
                                if (exparr != "0.00") {
                                    list.push(data.Getdata[i].val.STKCOD);
                                }
                            }
                            if (Typearr == "FOC") {
                                if (sta == "N") {
                                    if (sta != "C") {
                                        listfoc.push(data.Getdata[i].val.STKCOD);
                                    }
                                }
                            }
                        }
                        sumlist = list.length + listfoc.length;
                        if (data.Getdata.length != 0) {

                            loading.out()
                            $('#fixed-table-container-1 tbody:last-child').html("");
                            var list = new Array();
                            var listfoc = new Array();
                            var sumlist;
                            for (var i = 0; i < data.Getdata.length; i++) {
                                var exparr = data.Getdata[i].val.ExpectPrice;
                                var Typearr = data.Getdata[i].val.Item_Type;
                                var sta = data.Getdata[i].val.Status;
                                if (sta == "N") {
                                    if (exparr != "0.00") {
                                        list.push(data.Getdata[i].val.STKCOD);
                                    }
                                }
                                if (Typearr == "FOC") {
                                    if (sta == "N") {
                                        if (sta != "C") {
                                            listfoc.push(data.Getdata[i].val.STKCOD);
                                        }
                                    }
                                }
                            }
                            sumlist = list.length + listfoc.length;
                            var disbck = "";
                            var discol = "";
                            var disdisbackorder = "";
                            var SubmithtmlPage = "";
                            for (var i = 0; i < data.Getdata.length; i++) {
                                var company = data.Getdata[i].val.Company;
                                var Type = data.Getdata[i].val.Item_Type;
                                var Prcby = data.Getdata[i].val.PrcApproveBy;
                                var expdel = data.Getdata[i].val.ExpectPrice;
                                var exp = data.Getdata[i].val.ExpectPrice;
                                var STKGRPType = data.Getdata[i].val.STKGRP;
                                var stabor = data.Getdata[i].val.LineNote;
                                var restatus = data.Getdata[i].val.Ready_Status;
                                var bck = data.Getdata[i].val.Backorder;
                                var bck = data.Getdata[i].val.Backorder;
                                var accessId = data.Getdata[0].val.AccessID;

                                //เก็บเลข accessLog ของตัวเอง
                                if (accessId != "") {
                                    $("#accessIdCurrent").val(accessId);
                                }


                                if (bck != "0") {
                                    discol = "color:red;";
                                    disdisbackorder = "disabled: disabled";
                                } else {
                                    discol = "color:green;";
                                    disdisbackorder = "";
                                }

                                var substabor = stabor.substring(0, 3);
                                if (substabor == "Bck") {
                                    //disbck = "display:none";
                                } else {
                                    // disbck = "display:block";
                                }
                                if (Type == '-') { SubmithtmlPage += '<tr PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '">'; }
                                else { SubmithtmlPage += '<tr style="background-color: rgba(130, 198, 223, 0.3);" PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '">'; }

                                var sta = data.Getdata[i].val.Status;
                                if (sta != "N") {
                                    if (sta == "Q") {
                                        //SubmithtmlPage += '<td style="width: 79px;"><input  id="idchk' + (i + 1) + '" class="chk"  CartID="' + data.Getdata[i].val.CartID + '"  PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" exp="' + expdel + '"  Instock="' + data.Getdata[i].val.InStock + '"  iType="' + data.Getdata[i].val.Item_Type + '" Uom="' + data.Getdata[i].val.UOM + '"  Qty="' + data.Getdata[i].val.Qty + '" wlo="' + data.Getdata[i].val.WH_Location + '" Backorderqty="' + data.Getdata[i].val.Backorder + '"     STKCOD="' + data.Getdata[i].val.STKCOD + '" Company="' + data.Getdata[i].val.Company + '" STKGRP="' + data.Getdata[i].val.STKGRP + '" Price="' + data.Getdata[i].val.Price + '" TotalPrice="' + data.Getdata[i].val.TotalPrice + '" SalePrice="' + data.Getdata[i].val.SalePrice + '" Amt="' + data.Getdata[i].val.Amt + '" Discount="' + data.Getdata[i].val.Discount + '" TotalDiscount="' + data.Getdata[i].val.TotalDiscount + '" ORDDAT="' + data.Getdata[i].val.ORDDAT + '" LineNote="' + data.Getdata[i].val.LineNote + '"  Promotion="' + data.Getdata[i].val.Promotion + '" type="checkbox"  name="chektb" class="form-control input-lg" ></td>';
                                        SubmithtmlPage += '<td style="width: 79px;"><input  id="idchk' + (i + 1) + '" class="chk"  bck="' + bck + '"  CartID="' + data.Getdata[i].val.CartID + '"  PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" exp="' + expdel + '"  Instock="' + data.Getdata[i].val.InStock + '"  iType="' + data.Getdata[i].val.Item_Type + '" Uom="' + data.Getdata[i].val.UOM + '"  Qty="' + data.Getdata[i].val.Qty + '"  Backorderqty="' + data.Getdata[i].val.Backorder + '"     STKCOD="' + data.Getdata[i].val.STKCOD + '" Company="' + data.Getdata[i].val.Company + '" STKGRP="' + data.Getdata[i].val.STKGRP + '" Price="' + data.Getdata[i].val.Price + '" TotalPrice="' + data.Getdata[i].val.TotalPrice + '" SalePrice="' + data.Getdata[i].val.SalePrice + '" Amt="' + data.Getdata[i].val.Amt + '" Discount="' + data.Getdata[i].val.Discount + '" TotalDiscount="' + data.Getdata[i].val.TotalDiscount + '" ORDDAT="' + data.Getdata[i].val.ORDDAT + '" LineNote="' + data.Getdata[i].val.LineNote + '"  Promotion="' + data.Getdata[i].val.Promotion + '" wlo="' + data.Getdata[i].val.WH_Location + '" type="checkbox"  name="chektb" class="form-control input-lg" ></td>';
                                    } else {
                                        SubmithtmlPage += '<td></td>';
                                    }
                                    //SubmithtmlPage += '<td></td>';

                                    //SubmithtmlPage += '<td style="width: 79px;"><input id="checkbox" style="display:none;" id="checkbox" class="chk"  CartID="' + data.Getdata[i].val.CartID + '" PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '"Instock="' + data.Getdata[i].val.InStock + '" iType="' + data.Getdata[i].val.Item_Type + '" Uom="' + data.Getdata[i].val.UOM + '"  Qty="' + data.Getdata[i].val.Qty + '" STKCOD="' + data.Getdata[i].val.STKCOD + '"  Company="' + data.Getdata[i].val.Company + '" STKDES="' + data.Getdata[i].val.STKDES + '" STKGRP="' + data.Getdata[i].val.STKGRP + '" Price="' + data.Getdata[i].val.Price + '" SalePrice="' + data.Getdata[i].val.SalePrice + '" Amt="' + data.Getdata[i].val.Amt + '" Discount="' + data.Getdata[i].val.Discount + '" ORDDAT="' + data.Getdata[i].val.ORDDAT + '" LineNote="' + data.Getdata[i].val.LineNote + '"  type="checkbox"  class="form-control input-lg" ></td>';
                                    //SubmithtmlPage += '<td><div  style="display:none;" class="glyphicon glyphicon-trash fa-2x" id="cancelx" PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" style=" color: red; cursor: pointer; "></div></td>';
                                } else {
                                    // if (Fsumfoc > 0) {
                                    //   SubmithtmlPage += '<td style="width: 79px;"><input  style="" id="checkbox" class="chk"  CartID="' + data.Getdata[i].val.CartID + '" PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" Instock="' + data.Getdata[i].val.InStock + '" iType="' + data.Getdata[i].val.Item_Type + '" Uom="' + data.Getdata[i].val.UOM + '"  Qty="' + data.Getdata[i].val.Qty + '"  Backorderqty="' + data.Getdata[i].val.Backorder + '"     STKCOD="' + data.Getdata[i].val.STKCOD + '" Company="' + data.Getdata[i].val.Company + '" STKGRP="' + data.Getdata[i].val.STKGRP + '" Price="' + data.Getdata[i].val.Price + '" TotalPrice="' + data.Getdata[i].val.TotalPrice + '" SalePrice="' + data.Getdata[i].val.SalePrice + '" Amt="' + data.Getdata[i].val.Amt + '" Discount="' + data.Getdata[i].val.Discount + '" TotalDiscount="' + data.Getdata[i].val.TotalDiscount + '" ORDDAT="' + data.Getdata[i].val.ORDDAT + '" LineNote="' + data.Getdata[i].val.LineNote + '"  Promotion="' + data.Getdata[i].val.Promotion + '" type="checkbox"  checked=checked  disabled class="form-control input-lg" ></td>';
                                    // } else {
                                    // SubmithtmlPage += '<td>Not Approved</td>';
                                    SubmithtmlPage += '<td style="width: 79px;"><input  id="idchk' + (i + 1) + '" class="chk"  bck="' + bck + '"  CartID="' + data.Getdata[i].val.CartID + '"  PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" exp="' + expdel + '"  Instock="' + data.Getdata[i].val.InStock + '"  iType="' + data.Getdata[i].val.Item_Type + '" Uom="' + data.Getdata[i].val.UOM + '"  Qty="' + data.Getdata[i].val.Qty + '"  Backorderqty="' + data.Getdata[i].val.Backorder + '"     STKCOD="' + data.Getdata[i].val.STKCOD + '" Company="' + data.Getdata[i].val.Company + '" STKGRP="' + data.Getdata[i].val.STKGRP + '" Price="' + data.Getdata[i].val.Price + '" TotalPrice="' + data.Getdata[i].val.TotalPrice + '" SalePrice="' + data.Getdata[i].val.SalePrice + '" Amt="' + data.Getdata[i].val.Amt + '" Discount="' + data.Getdata[i].val.Discount + '" TotalDiscount="' + data.Getdata[i].val.TotalDiscount + '" ORDDAT="' + data.Getdata[i].val.ORDDAT + '" LineNote="' + data.Getdata[i].val.LineNote + '"  Promotion="' + data.Getdata[i].val.Promotion + '" wlo="' + data.Getdata[i].val.WH_Location + '" type="checkbox"  name="chektb" class="form-control input-lg" ></td>';
                                    //SubmithtmlPage += '<td><div class="glyphicon glyphicon-trash fa-2x" id="cancelx" PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" style=" color: red; cursor: pointer; "></div></td>';
                                    // }
                                }
                                // SubmithtmlPage += '<input id="checkbox" class="chk"  CartID="' + data.Getdata[i].val.CartID + '" PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" Uom="' + data.Getdata[i].val.UOM + '"  Qty="' + data.Getdata[i].val.Qty + '" STKCOD="' + data.Getdata[i].val.STKCOD + '" STKDES="' + data.Getdata[i].val.STKDES + '" STKGRP="' + data.Getdata[i].val.STKGRP + '" Price="' + data.Getdata[i].val.Price + '" SalePrice="' + data.Getdata[i].val.SalePrice + '" Amt="' + data.Getdata[i].val.Amt + '" Discount="' + data.Getdata[i].val.Discount + '" ORDDAT="' + data.Getdata[i].val.ORDDAT + '" LineNote="' + data.Getdata[i].val.LineNote + '"  type="checkbox"  class="form-control input-lg" >';
                                SubmithtmlPage += '<td>' + (i + 1) + '</td>';


                                if (sumlist == "0") {//glyphicon glyphicon-remove glyphicon glyphicon-trash
                                    //alert("1 " + data.Getdata[i].val.STKCOD)
                                    SubmithtmlPage += '<td style="text-align: center;"><div class="fas fa-trash" style="font-size: 24px;color: #d62828f7;' + disbck + '" id="cancelx" PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" CartID="' + data.Getdata[i].val.CartID + '" style=" color: red; cursor: pointer; "></div></td>';
                                } else {
                                    if (expdel != "0.00") {
                                        //  alert("2" + data.Getdata[i].val.STKCOD)
                                        SubmithtmlPage += '<td style="text-align: center;"><div class="fas fa-trash" style="font-size: 24px;color: #d62828f7;" id="cancelx" PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" CartID="' + data.Getdata[i].val.CartID + '" style=" color: red; cursor: pointer; "></div></td>';
                                    } else {
                                        if (Type != "FOC") {

                                            SubmithtmlPage += '<td style="text-align: center;"><div class="fas fa-trash" style="font-size: 24px;color: #d62828f7;' + disbck + '" id="cancelx"  PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" CartID="' + data.Getdata[i].val.CartID + '" style=" color: red; cursor: pointer;"></div></td>';
                                        } else {
                                            //  alert("4" + data.Getdata[i].val.STKCOD)
                                            SubmithtmlPage += '<td style="text-align: center;"><div class="fas fa-trash" style="font-size: 24px;color: #d62828f7;" id="cancelx"  PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" CartID="' + data.Getdata[i].val.CartID + '" style=" color: red; cursor: pointer;display:block"></div></td>';
                                        }
                                    }
                                }
                                // }



                                // SubmithtmlPage += '<td style="color: blue;">' + data.Getdata[i].val.Item_Type + '</td>';
                                if (company == "TAC") {
                                    SubmithtmlPage += '<td><i style="color: red;  font-size: 14px; font: icon;">' + data.Getdata[i].val.Company + "</i>/" + data.Getdata[i].val.STKCOD + '<br><div style=' + discol + '>' + restatus + '</div></td>';
                                } else if (company == "AAC") {

                                    SubmithtmlPage += '<td><i style="color: rgb(0, 119, 255);  font-size: 14px; font: icon;">' + data.Getdata[i].val.Company + "</i>/" + data.Getdata[i].val.STKCOD + '<br><div style=' + discol + '>' + restatus + '</div></td>';
                                } else if (company == "OMP") {

                                    SubmithtmlPage += '<td><i style="color: rgb(0, 119, 255);  font-size: 14px; font: icon;">' + data.Getdata[i].val.Company + "</i>/" + data.Getdata[i].val.STKCOD + '<br><div style=' + discol + '>' + restatus + '</div></td>';
                                }
                                else if (company == "") {

                                    SubmithtmlPage += '<td><i style="font-size: 14px; font: icon;">' + data.Getdata[i].val.STKCOD + '</td>';
                                }
                                //SubmithtmlPage += '<td><i style="color: red;  font-size: 14px;">' + data.Getdata[i].val.Company + "</i>/" + data.Getdata[i].val.STKCOD + '</td>';
                                SubmithtmlPage += '<td>' + nl1br(data.Getdata[i].val.STKDES) + '</td>';

                                if (exp == "0.00") {
                                    if (Type != "FOC") {
                                        if (substabor == 'Bck') { //bckOrd disabled จำนวน
                                            SubmithtmlPage += '<td><input type="number" id="quantity" name="quantity" class="tQty"  old=' + CryptoJS.AES.encrypt(data.Getdata[i].val.Qty, 'secret key 123') + '  style="width: 78px;"  disabled="disabled" value=' + data.Getdata[i].val.Qty + ' min="0" elca=' + CryptoJS.AES.encrypt(data.Getdata[i].val.maxord, 'secret key 123') + ' ></td>';
                                        } else {
                                            SubmithtmlPage += '<td><input type="number" id="quantity" name="quantity" class="tQty"  old=' + CryptoJS.AES.encrypt(data.Getdata[i].val.Qty, 'secret key 123') + '  style="width: 78px;" ' + disdisbackorder + '    value=' + data.Getdata[i].val.Qty + ' min="0" elca=' + CryptoJS.AES.encrypt(data.Getdata[i].val.maxord, 'secret key 123') + '></td>';
                                        }
                                    } else {
                                        SubmithtmlPage += '<td><input type="number" id="quantity" name="quantity" class="tQty" old=' + CryptoJS.AES.encrypt(data.Getdata[i].val.Qty, 'secret key 123') + '  style="width: 78px;" disabled="disabled" value=' + data.Getdata[i].val.Qty + ' min="0"  elca=' + CryptoJS.AES.encrypt(data.Getdata[i].val.maxord, 'secret key 123') + '></td>';
                                    }
                                } else {
                                    SubmithtmlPage += '<td><input type="number" id="quantity" name="quantity" class="tQty" old=' + CryptoJS.AES.encrypt(data.Getdata[i].val.Qty, 'secret key 123') + '  style="width: 78px;" disabled="disabled" value=' + data.Getdata[i].val.Qty + ' min="1"  elca=' + CryptoJS.AES.encrypt(data.Getdata[i].val.maxord, 'secret key 123') + '></td>';
                                }
                                //if (STKGRPType != "") {
                                //    var STKGRPNam = data.Getdata[i].val.STKGRPNam;

                                //    if (STKGRPNam != "-") {
                                //        SubmithtmlPage += '<td>' + data.Getdata[i].val.STKGRP + "|" + data.Getdata[i].val.STKGRPNam + '</td>';
                                //    } else {
                                //        SubmithtmlPage += '<td>' + data.Getdata[i].val.STKGRP + '</td>';
                                //    }
                                //}
                                //else { SubmithtmlPage += '<td>-</td>'; }
                                if (Type != "FOC") {
                                    SubmithtmlPage += '<td><div style="text-decoration: line-through;">' + commaSeparateNumber(data.Getdata[i].val.Price) + '</div><div id="newprice"> ' + commaSeparateNumber(data.Getdata[i].val.SalePrice) + '</div></td>';
                                } else {
                                    SubmithtmlPage += '<td>' + commaSeparateNumber(data.Getdata[i].val.Price) + '</td>';
                                }
                                //SubmithtmlPage += '<td>' + commaSeparateNumber(data.Getdata[i].val.Discount) + '</td>';
                                //SubmithtmlPage += '<td>' + commaSeparateNumber(data.Getdata[i].val.SalePrice) + '</td>';


                                //if (usertype != "6") {
                                if (exp != "0.00") {
                                    //รายการส่งไปต่อรองราคาสินค้าขาย//
                                    if (sta != "N" && sta != "Q") {
                                        if (sta != "C") {
                                            //รออนุมัติ//
                                            SubmithtmlPage += '<td style="color:rgb(180, 239, 35);color: rgba(212, 25, 84, 0.98);/* text-align: right; *//* background-color: burlywood; */font-weight: bold;">' + commaSeparateNumber(data.Getdata[i].val.ExpectPrice) + '<br><div style="color: rgb(249, 160, 22);">รออนุมัติ<br>ราคาต่อรอง</div></td>';

                                        }
                                        else {
                                            //ไม่อนุมัติ//
                                            SubmithtmlPage += '<td style="color:rgb(180, 239, 35);color: rgba(212, 25, 84, 0.98);/* text-align: right; *//* background-color: burlywood; */font-weight: bold;color:rgb(180, 239, 35);color: rgba(25, 185, 212, 0.98);/* text-align: right; *//* background-color: burlywood; */font-weight: bold;">' + commaSeparateNumber(data.Getdata[i].val.ExpectPrice) + '<br><div style="color:rgb(255, 0, 116);">ไม่อนุมัติ</div></td>';
                                        }
                                    }
                                    else if (sta == "N" || sta == "Q" && Prcby != "") {

                                        // SubmithtmlPage += '<td>Not Approved</td>';
                                        if (Prcby != "") {
                                            SubmithtmlPage += '<td style="font-weight: bold;color:rgba(31, 113, 21, 0.98);">' + commaSeparateNumber(data.Getdata[i].val.ExpectPrice) + '<br><div style="color:rgb(255, 0, 116);">ราคาอนุมัติ</div></td>';
                                        } else {
                                            SubmithtmlPage += '<td></td>';
                                        }
                                    }
                                } else {
                                    if (Type != "FOC") {

                                        SubmithtmlPage += '<td style="">' + commaSeparateNumber(data.Getdata[i].val.ExpectPrice) + '</td>';
                                    } else {
                                        if (sta != "N" && sta != "Q") {
                                            if (sta != "C") {
                                                SubmithtmlPage += '<td style="color:rgb(180, 239, 35);color: rgba(212, 25, 84, 0.98);/* text-align: right; *//* background-color: burlywood; */font-weight: bold;">' + commaSeparateNumber(data.Getdata[i].val.ExpectPrice) + '<br><div style="color: rgb(249, 160, 22);">รออนุมัติ<br>รายการของแถม</div></td>';
                                            } else {
                                                SubmithtmlPage += '<td style="color:rgb(180, 239, 35);color: rgba(212, 25, 84, 0.98);/* text-align: right; *//* background-color: burlywood; */font-weight: bold;">' + commaSeparateNumber(data.Getdata[i].val.ExpectPrice) + '<br><div style="color: rgb(249, 160, 22);">ไม่อนุมัติ<br>รายการของแถม</div></td>';
                                            }
                                        } else {
                                            SubmithtmlPage += '<td style="color:rgb(180, 239, 35);color: rgba(212, 25, 84, 0.98);/* text-align: right; *//* background-color: burlywood; */font-weight: bold;">' + commaSeparateNumber(data.Getdata[i].val.ExpectPrice) + '<br><div style="color: rgb(249, 160, 22);">อนุมัติ<br>รายการของแถม</div></td>';
                                        }
                                    }
                                }
                                // }
                                // SubmithtmlPage += '<td>' + commaSeparateNumber(data.Getdata[i].val.Qty) + '</td>';

                                SubmithtmlPage += '<td><div class="tamt" id="idamt' + (i + 1) + '">' + commaSeparateNumber(data.Getdata[i].val.Amt) + '</div></td>';
                                //<input type="number"  name="quantity" class="tamt" id="idamt' + (i + 1) + '"  style="width: 78px;z-index: 0; color: rgb(6, 6, 6); background-color: white; text-align: right; border: 0px;" value=' + commaSeparateNumber(data.Getdata[i].val.Amt) + ' disabled="disabled">

                                //SubmithtmlPage += '<td>' + commaSeparateNumber(data.Getdata[i].val.Amt) + '</td>';
                                SubmithtmlPage += '<td><div class="tbck" id="idbck' + (i + 1) + '">' + commaSeparateNumber(data.Getdata[i].val.Backorder) + '</div></td>';
                                // if (usertype != "6") {
                                SubmithtmlPage += '<td><div class="tstock">' + commaSeparateNumber(data.Getdata[i].val.Stock) + '</div></td>';

                                SubmithtmlPage += '<td><div class="tstock">' + commaSeparateNumber(data.Getdata[i].val.KDC_QTY) +  '</div></td>';
                                SubmithtmlPage += '<td><div class="tstock">' +  commaSeparateNumber(data.Getdata[i].val.PDC_QTY) + '</div></td>';
                                SubmithtmlPage += '<td><div class="tstock">' + data.Getdata[i].val.WH_Location + '</div></td>';
                                //  }
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.LineNote + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.PrcRemark + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.ORDDAT.substring(0, 10) + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.Promotion + '</td>';

                                SubmithtmlPage += '<td>' + data.Getdata[i].val.Item_Type + '</td>';
                                // SubmithtmlPage += '<td style="display:none;">' + data.Getdata[i].val.UOM + '</td>';
                                // SubmithtmlPage += '<td style="display:none;">' + data.Getdata[i].val.CartID + '</td>';
                                SubmithtmlPage += '</tr>';
                                //$("#exampletb").append(SubmithtmlPage);

                            }
                            console.log('Cart');
                            $('#fixed-table-container-1  tbody:last-child').append(SubmithtmlPage);

                            if (usertype == "6") {

                                $("[data-column]").trigger("click");
                            }
                        }
                        else {
                            $("#ModalShipping").modal('hide');
                            $('#fixed-table-container-1 tbody:last-child').html("");
                            loading.out()
                        }
                        var fixedTable1 = fixTable(document.getElementById('fixed-table-container-1'));

                    }
                });
            }
            $(document).on("click", "[data-column]", function () {
                var button = $(this),
                    header = $(button.data("column")),
                    table = header.closest("table"),
                    index = header.index() + 1, // convert to CSS's 1-based indexing
                    selector = "tbody tr td:nth-child(" + index + ")",
                    column = table.find(selector).add(header);
                column.toggleClass("hidden");

            });
            $('#datepickerStart').datepicker({
                format: "dd-mm-yyyy"
            });

            function commaSeparateNumber(val) {
                while (/(\d+)(\d{3})/.test(val.toString())) {
                    val = val.toString().replace(/(\d+)(\d{3})/, '$1' + ',' + '$2');
                }
                return val;
            }


            resourceAddress.hash();
            var cuscod = atob(param_values.numcuber)
            expire(usrexpire)
            if (usertype != "6") {
                if (cuscod == "") {
                    var wi = window.open("../SeleScrCustomer/dashboard");
                    wi.focus();
                } else {

                    $.ajax({
                        url: '@Url.Action("GetdatabyCus", "DataCenter")',
                        data: {
                            cusel: cuscod
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            //console.log(data);
                            if (data.length == 1) {
                                $("#CreditTerm").val(data[0].TACPAYTRM);
                                $("#cusname").text(data[0].CUSNAM + " (" + data[0].CUSCOD + ")");
                                // $("#cusname").text("Custome Code:" + data[0].CUSCOD + "/" + data[0].CUSNAM);
                                $("#addcus").text(data[0].ADDR_01 + data[0].ADDR_02);
                                $("#crlicusaac").text("AAC: " + commaSeparateNumber(data[0].AACCrlimit));
                                $("#crlicustac").text("TAC: " + commaSeparateNumber(data[0].TACCrlimit));
                                $("#crbarcusaac").text("AAC: " + commaSeparateNumber(data[0].AACBalance));
                                $("#crbarcustac").text("TAC: " + commaSeparateNumber(data[0].TACBalance));
                                $("#d1").text(data[0].CUSNAM + " (" + data[0].CUSCOD + ")");
                                $("#shipadd").val("ร้าน:" + data[0].CUSNAM + "(รหัสร้าน:" + data[0].CUSCOD + ")" + "\n" + "ที่อยู่จัดส่งสินค้า" + data[0].ADDR_01 + "  " + data[0].ADDR_02);
                                getCreditcuskey(cuscod);//ดึงวงเงินจากร้านแม่
                                $.ajax({
                                    url: '@Url.Action("Getdateslmbysalmcod", "DataCenter")',
                                    data: {
                                        codeslm: data[0].SLMCOD
                                    },
                                    type: "POST",
                                    dataType: "JSON",
                                    success: function (data) {
                                        //console.log(data)
                                        optText = "(" + data[0].SLMCOD + ")" + data[0].SLMNAM;
                                        optValue = data[0].SLMCOD;
                                        $('#d1').append(" พนักงาน :" + optText);
                                        // $('#SalepersonCode').append(new Option(optText, optValue));
                                        // $("#SalepersonCode option[value='ALL']").remove();
                                        // $("#SalepersonCode option[value='ALL']").remove();
                                    }
                                });
                            }

                        }
                    });
                }
                $("#changepass").css("display", "none");
            } else if (usertype == "6") {

                $("#menu").css("display", "none");
                $('#nextspold').css("display", "none");
                $('#boxdis').css("display", "none");
                $('#boxlabo').css("display", "none");
                $("#changepass").css("display", "block");
                //$('#dCredit').disble
                $('#dCredit').prop('disabled', true);
                if (cuscod == "") {
                    var wi = window.open("../Account/LogIn");
                    wi.focus();
                } else {
                    $.ajax({
                        url: '@Url.Action("GetdatabyCus", "DataCenter")',
                        data: {
                            cusel: cuscod
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            // //console.log(data);
                            if (data.length) {
                                $("#CreditTerm").val(data[0].TACPAYTRM);
                                $("#cusname").text("Custome Code" + data[0].CUSCOD + "  Customer Name" + data[0].CUSNAM);
                                $("#addcus").text(data[0].ADDR_01 + data[0].PRO);
                                $("#crlicusaac").text("AAC: " + commaSeparateNumber(data[0].AACCrlimit));
                                $("#crlicustac").text("TAC: " + commaSeparateNumber(data[0].TACCrlimit));
                                $("#crbarcusaac").text("AAC: " + commaSeparateNumber(data[0].AACBalance));
                                $("#crbarcustac").text("TAC: " + commaSeparateNumber(data[0].TACBalance));
                                // $("#shipadd").val("ร้าน:" + data[0].CUSNAM + "(รหัสร้าน:" + data[0].CUSCOD + ")" + "\n" + "ที่อยู่จัดส่งสินค้า" + data[0].ADDR_01 + data[0].PRO)
                                $("#shipadd").val("ร้าน:" + data[0].CUSNAM + "(รหัสร้าน:" + data[0].CUSCOD + ")" + "\n" + "ที่อยู่จัดส่งสินค้า" + data[0].ADDR_01 + data[0].ADDR_02);
                                getCreditcuskey(cuscod);//ดึงวงเงินจากร้านแม่
                            }
                        }
                    });
                }
            }
            function getCreditcuskey(cusel) {
                $.ajax({
                    url: '@Url.Action("GetdCustomerCredit", "DataCenter")',
                    data: {
                        cusel: cusel
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        //console.log(data);

                        $("#crlicusaac").text("AAC: " + commaSeparateNumber(data[0].AACCrlimit));
                        $("#crlicustac").text("TAC: " + commaSeparateNumber(data[0].TACCrlimit));


                    }
                });
            }
            // $("#dCredit").attr("disabled", "disabled");
            if (usertype != "6") {
                var strcom = "@Xcompany";
                $("#cho-pay").attr("disabled", "disabled");
                if (strcom == "") {
                    $("#company").val("TAC");
                    //$("#company").val("ALL");
                } else {
                    $("#company").val(strcom);
                    //$("#company").val("ALL");
                }
            }

            $.ajax({
                url: '@Url.Action("GetTransportation", "Cart")',
                data: {
                    cucod: cuscod,
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    //console.log(data)
                    var select = $("#codetransportation");
                    select.children().remove();
                    select.append($("<option>").val("0").text("เลือก ขนส่ง"));
                    $(data).each(function (index, item) {

                        select.append($("<option>").val(item.Code).text(item.Code + "/" + item.Name));
                    });

                }
            });
            function commaSeparateNumber(val) {
                while (/(\d+)(\d{3})/.test(val.toString())) {
                    val = val.toString().replace(/(\d+)(\d{3})/, '$1' + ',' + '$2');
                }
                return val;
            }
            $.fn.digits = function () {
                return this.each(function () {
                    $(this).text($(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,"));
                })
            }
            //ShoppingCart_list();
            $("#btnlog").click(function () {

            });

            $("#cho-pay").change(function () {

                var chopay = $(this).val();
                if (chopay == "2") {
                    $.ajax({
                        url: '@Url.Action("CusDiscount", "Cart")',
                        data: {
                            cuscod: cuscod,
                            type: usertype
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            // alert(data.CashDiscount)
                            var chkcashdis = "0";
                            chkcashdis = data.CashDiscount;
                            if (chkcashdis == "") {
                                chkcashdis = "0"
                            } else {
                                chkcashdis = data.CashDiscount;
                            }
                            //console.log(data);
                            if (data.CashDiscount != "") {
                                // $('#CreditTerm').val(data);
                                $('#CreditTerm').val("0");
                                $('#dCredit').val(data.CashDiscount);
                                var cr = $('#dCredit').val();

                                $("#cr").text(cr + "%");
                                $("#btnChk").trigger('click');
                            } else {
                                $("#cho-pay").val("1");
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("ไม่สามารถชำระเงินสดได้ กรุณาติดต่อแผนก Credit Control หรือ Sales Admin");
                                $("#myModalWarning").modal();
                                $("#myModal").modal('hide');
                                return false;
                            }
                        }
                    });
                } else {
                    $.ajax({
                        url: '@Url.Action("CusDiscount", "Cart")',
                        data: {
                            cuscod: cuscod,
                            type: usertype
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            //console.log(data);
                            if (data != "") {
                                // $('#CreditTerm').val(data);

                                $('#dCredit').val(data.discount);
                                var cr = $('#dCredit').val();

                                $("#cr").text(cr + "%");
                                $("#btnChk").trigger('click');
                            } else {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("ไม่สามารถชำระเงินสดได้ กรุณาติดต่อแผนก Credit Control หรือ Sales Admin");
                                $("#myModalWarning").modal();
                                $("#myModal").modal('hide');
                                return false;
                            }
                        }
                    });
                }
            });
            $("#CreditTerm").change(function () {
                var term = $(this).val();
                $.ajax({
                    url: '@Url.Action("CusCreditTerm", "Cart")',
                    data: {
                        crdterm: term

                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        //console.log(data);
                        if (data != "") {
                            $('#dCredit').val(data);
                            var cr = $('#dCredit').val();

                            $("#cr").text(cr + "%");
                            $("#btnChk").trigger('click');
                        } else {
                            $("#textAlertWarning").empty();
                            $("#textAlertWarning").text("ไม่มีเครดิต/Credit Term นี้ในระบบ");
                            $("#myModalWarning").modal();
                            $("#myModal").modal('hide');
                            return false;
                        }
                    }
                });

            });
            $("#datepickerStart").change(function () {
                var dateche = $("#datepickerStart").val();
                // alert(dateche);
                if (dateche != '') {
                    var d = new Date();
                    var time2 = d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds();
                    var date = new Date(time2);
                    if (date.getHours() >= 12) {
                        var hour = parseInt(date.getHours()) - 12;
                        var amPm = "PM";
                    } else {
                        var hour = date.getHours();
                        var amPm = "AM";
                    }
                    //var time = d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds().toFixed("0");
                    //  //console.log(time);
                    // //console.log(time);
                    var Hours = d.getHours();
                    Hours = Hours > 9 ? Hours : '0' + Hours;
                    var Minutes = d.getMinutes();
                    Minutes = Minutes > 9 ? Minutes : '0' + Minutes;
                    var Seconds = d.getSeconds();
                    Seconds = Seconds > 9 ? Seconds : '0' + Seconds;
                    var time = Hours + ":" + Minutes + ":" + Seconds;
                    $("#time").val(time);
                }
            });
            $('#datepickerStart').keyup(function (e) {
                $(this).val("");
            })
            $(document).on("click", "#datepickerStart", function () {
                var x = $('#Ordertype_ID').val();

                var d = new Date();
                var currMonth = d.getMonth();

                var currYear = d.getFullYear();
                var currentDate = d.getDate();
                var startDate = new Date(currYear, currMonth, 1);
                if (x == "BO" || x == "ID") { //เลือกได้ +1 ปี
                    //$('#datepickerStart').datepicker('destroy');
                    //$("#datepickerStart").datepicker({

                    //    dateFormat: 'dd-mm-yy',
                    //    minDate: "1d",
                    //    maxDate: "+12m"
                    //});
                    $('#datepickerStart').datepicker('setStartDate', new Date());
                    $('#datepickerStart').datepicker('setEndDate', new Date(new Date().setDate(new Date().getDate() + 365)));
                    $("#ModdatepickerStart").datepicker({ dateFormat: 'dd-mm-yy' });
                } else if (x == "S") { //เลือกได้ +30 วัน
                    //  $('#datepickerStart').datepicker('destroy');
                    //$("#datepickerStart").datepicker({
                    //    autoclose: true,
                    //    dateFormat: 'dd-mm-yy',
                    //    setStartDate: "1d",
                    //    setEndDate: "+1m"
                    //});
                    $('#datepickerStart').datepicker('setStartDate', new Date());
                    $('#datepickerStart').datepicker('setEndDate', new Date(new Date().setDate(new Date().getDate() + 30)));
                    // $("#end").datepicker("option", "minDate", minDate2);
                    // $('#datepickerStart').datepicker('destroy');
                    $("#ModdatepickerStart").datepicker({ dateFormat: 'dd-mm-yy' });
                }
            });
            $(document).on("click", "#nextspold", function () {

                var cusel = cuscod;
                if (cusel == "") {
                    $("#textAlertWarning").empty();
                    $("#textAlertWarning").text("กรุณาเลือกลูกค้าที่ต้องการ Shopping");
                    $("#myModalWarning").modal();
                    $("#myModal").modal('hide');
                    return false;
                } else {

                    window.location.replace("../Shoppinglist/Index?numcuber=" + btoa(cusel));
                }
            });
            $("table").on("click", "#ClickShipping", function () {
                $(window).scrollTop(2);
                var qpono = $('#qpono').val();
                if (qpono == "0") {
                    location.reload();
                } else {
                    checkgetshipto();
                }
                //
                @*$.ajax({
                    url: '@Url.Action("GetdataCusShipping", "Cart")',
                    data: {
                        XXcus: cuscod

                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        //console.log(data);
                        $("#ModalShipping").modal();
                        $('#openShipping').css("display", "block");
                        $("#Shipping > tbody").empty();


                        for (var i = 0; i < data.length; i++) {
                            var SubmithtmlPage = '<tr style="cursor: pointer;" cus="' + data[i].val.customer + '"  Code="' + data[i].val.code + '"  Namecus="' + data[i].val.name + '" Address="' + data[i].val.address + '" Address_2="' + data[i].val.address2 + '" Postcode="' + data[i].val.postcode + '">';
                            SubmithtmlPage += '<td>' + data[i].val.customer + '</td>';
                            SubmithtmlPage += '<td>' + data[i].val.code + '</td>';
                            SubmithtmlPage += '<td>' + data[i].val.name + '</td>';
                            SubmithtmlPage += '<td>' + data[i].val.name2 + '</td>';
                            SubmithtmlPage += '<td>' + data[i].val.address + '</td>';
                            SubmithtmlPage += '<td>' + data[i].val.address2 + ' ' + data[i].val.postcode + '</td>';
                            SubmithtmlPage += '<td>' + data[i].val.city + '</td>';
                            SubmithtmlPage += '</tr>';
                            $("#Shipping").append(SubmithtmlPage);
                        }

                    }
                });*@
            });
              var loading = new Loading({ direction: 'hor', discription: 'Loading...', defaultApply: true });


                var CUSCOD = cuscod;
                var Company = $("#company").val();
                //var loading = new Loading({ direction: 'hor', discription: 'Loading...', defaultApply: true });
                //var loading = "";
                $.ajax({
                    url: '@Url.Action("GetdataCheckShopping", "Cart")',
                    data: {
                        CUSCOD: CUSCOD,
                        Company: Company,
                        usrlogin: userid,
                        usrtype: usertype

                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        // $("#exampletb").empty();
                        //console.log(data)

                        loading.out()
                        if (data.exerror != "") {
                            //waitingDialog.hide();
                         //   loading.out()
                            $("#textAlertWarning").empty();
                            $("#textAlertWarning").text(data.exerror);
                            $("#myModalWarning").modal();
                            return false;
                        }
                        if (data.Getdata.length > 0) {
                            //  loading.out()
                                 //step1//
                                    checkgetshipto()
                            //step2//

                                    //getshipto();


                        } else { loading.out();$("#ModalShipping").modal('hide'); }
                    }
                });


            //Page//
            function checkgetshipto(){
                $.ajax({
                    url: '@Url.Action("GetdataCusShipping", "Cart")',
                    data: {
                        XXcus: cuscod

                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        //loading.out()
                        //console.log(data);
                        if (data.length > 0) {
                            // alert("xxxxxx")
                            $("#ModalShipping").modal();

                            $('#openShipping').css("display", "block");
                            $("#Shipping > tbody").empty();


                            for (var i = 0; i < data.length; i++) {
                                var SubmithtmlPage = '<tr style="cursor: pointer;" cus="' + data[i].val.customer + '"  Code="' + data[i].val.code + '"  Namecus="' + data[i].val.name + '" Address="' + data[i].val.address + '" Address_2="' + data[i].val.address2 + '" Postcode="' + data[i].val.postcode + '">';
                                SubmithtmlPage += '<td>' + data[i].val.customer + '</td>';
                                SubmithtmlPage += '<td>' + data[i].val.code + '</td>';
                                SubmithtmlPage += '<td>' + data[i].val.name + '</td>';
                                SubmithtmlPage += '<td>' + data[i].val.name2 + '</td>';
                                SubmithtmlPage += '<td>' + data[i].val.address + '</td>';
                                SubmithtmlPage += '<td>' + data[i].val.address2 + ' ' + data[i].val.postcode + '</td>';
                                SubmithtmlPage += '<td>' + data[i].val.city + '</td>';
                                SubmithtmlPage += '</tr>';
                                $("#Shipping").append(SubmithtmlPage);
                            }

                        } else {
                            $("#ModalShipping").modal('hide');
                            ShoppingCart_list("", "");
                            //var Quatation = $('#qpono').val();
                            //let result = Quatation.substring(0,1);
                            //alert(result)
                           // if (result == "Q") { GetCusQuatation(Quatation); } else { ShoppingCart_list(""); }
                            //if (Quatation == "0" || Quatation == '' || Quatation == 'undefined' || Quatation == null) {
                            //    ShoppingCart_list("");
                            //} else {
                            //    GetCusQuatation(Quatation);
                            //}
                        }
                      }
                    });
            }
            function checkgetshiptoQ() {
                $.ajax({
                    url: '@Url.Action("GetdataCusShipping", "Cart")',
                    data: {
                        XXcus: cuscod

                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        //loading.out()
                        //console.log(data);
                        if (data.length > 0) {
                            // alert("xxxxxx")
                            $("#ModalShipping").modal();

                            $('#openShipping').css("display", "block");
                            $("#Shipping > tbody").empty();


                            for (var i = 0; i < data.length; i++) {
                                var SubmithtmlPage = '<tr style="cursor: pointer;" cus="' + data[i].val.customer + '"  Code="' + data[i].val.code + '"  Namecus="' + data[i].val.name + '" Address="' + data[i].val.address + '" Address_2="' + data[i].val.address2 + '" Postcode="' + data[i].val.postcode + '">';
                                SubmithtmlPage += '<td>' + data[i].val.customer + '</td>';
                                SubmithtmlPage += '<td>' + data[i].val.code + '</td>';
                                SubmithtmlPage += '<td>' + data[i].val.name + '</td>';
                                SubmithtmlPage += '<td>' + data[i].val.name2 + '</td>';
                                SubmithtmlPage += '<td>' + data[i].val.address + '</td>';
                                SubmithtmlPage += '<td>' + data[i].val.address2 + ' ' + data[i].val.postcode + '</td>';
                                SubmithtmlPage += '<td>' + data[i].val.city + '</td>';
                                SubmithtmlPage += '</tr>';
                                $("#Shipping").append(SubmithtmlPage);
                            }

                        } else {
                            $("#ModalShipping").modal('hide');
                            // ShoppingCart_list("");
                            var Quatation = $('#qpono').val();
                            ShoppingCart_list("", Quatation); // GetCusQuatation
                        }
                    }
                });
            }
            function getshipto() {
                var MyRowsShipp = $('#Shipping').find('tbody').find('tr').length;
                var MyRowsShippcart = $('#exampletb').find('tbody').find('tr').length;
                //$("#ModalShipping").modal();


                    if (MyRowsShipp != "0") {
                        var chkcusnull = $("#CustomerShipping").val();
                        if (chkcusnull == "") {
                            $('#btnnext').trigger("click");
                            //$("#confirm-Shipto").modal();
                            //alert("xxx")
                            return false;
                        }
                    } else {
                        $("#ModalShipping").modal('hide');
                        ShoppingCart_list("", "");
                        //alert("mmm")
                    }
                //} else {

                //    $("#ModalShipping").modal('hide');
                //}
            }
            //$(document).on('click', '[data-dismiss="modal"]', function(){
            //    alert("mmm")
            //        var sendship = $('#codeShipping').val();
            //       ShoppingCart_list(sendship);
            // })
            //$('#ModalShipping').on('hidden.bs.modal', function () {
            //    // do something…
            //    alert("mmm")
            //    var sendship = $('#codeShipping').val();
            //    //ShoppingCart_list(sendship);
            //})
            //$('#ModalShipping').on("click", function () {
            //    document.location.reload();
            //})
            $("#CancalShippto").on("click", function () {
                var cancalQuatation = $('#qpono').val();
                if (cancalQuatation == "0") {
                    ShoppingCart_list("", "");
                } else {
                    ShoppingCart_list("", cancalQuatation) //GetCusQuatation
                }
               // ShoppingCart_list("");

                $('#CustomerShipping').val("");
                $('#codeShipping').val("");
                $('#NameShipping').val("");
                $('#AddressShipping').val("");
                $("#ModalShipping").modal('hide');

                $.ajax({
                    url: '@Url.Action("GetdatabyCus", "DataCenter")',
                    data: {
                        cusel: cuscod
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {

                        // $("#shipadd").val("ร้าน:" + data[0].CUSNAM + "(รหัสร้าน:" + data[0].CUSCOD + ")" + "\n" + "ที่อยู่จัดส่งสินค้า" + data[0].ADDR_01 + data[0].PRO)
                        $("#shipadd").val("ร้าน:" + data[0].CUSNAM + "(รหัสร้าน:" + data[0].CUSCOD + ")" + "\n" + "ที่อยู่จัดส่งสินค้า" + data[0].ADDR_01 + "  " + data[0].ADDR_02);

                    }
                });
                $("#changeshipadd").val("");
            });
            $("#Shipping").on("click", "tr", function () {
                var cus = $(this).attr('cus');
                var code = $(this).attr('code');
                var name = $(this).attr('namecus');
                var _qpono =$("#qpono").val();
                if(_qpono =="0"){
                    ShoppingCart_list(code, "")
                }else{
                    ShoppingCart_list("", _qpono) //GetCusQuatation
                }

                //var name = $(this).attr('name');
                var address = $(this).attr('address');
                var Address_2 = $(this).attr('Address_2');
                var postcode = $(this).attr('Postcode');
                $('#CustomerShipping').val(cus);
                $('#codeShipping').val(code);
                $('#NameShipping').val(name);
                $('#AddressShipping').val(address + " " + Address_2);
                $("#ModalShipping").modal('hide');
                //$("#shipadd").val("Customer:" + cus + " Name:" + name + " ShipAddress:" + address + " " + Address_2);
                $("#changeshipadd").val("ร้าน:" + name + "(" + code + " )" + " ที่อยู่จัดส่งสินค้า:" + address + "  " + Address_2 + " " + postcode);
            });
            $.ajax({
                url: '@Url.Action("GetdataCusShipping", "Cart")',
                data: {
                    XXcus: cuscod

                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {

                    // if (data.length > 0) {
                    $("span >#scs").addClass('blink');
                    $("span >#scs").html(data.length);

                    //  }
                }
            });
            $.ajax({
                url: '@Url.Action("DeliveryMode", "Cart")',
                data: {
                    userid: userid,
                    cuscod: cuscod

                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {

                    var select = $("#Modtype_ID");
                    select.children().remove();
                    select.append($("<option>").val("ALL").text("เลือกDeliveryMode"));
                    $(data).each(function (index, item) {
                        select.append($("<option>").val(item.ORD_Type).text(item.ORD_Type + "/" + item.ORD_TypeName));
                    });
                }
            });
            function G_Delivertmode() {
                $.ajax({
                    url: '@Url.Action("DeliveryMode", "Cart")',
                    data: {
                        userid: userid,
                        cuscod: cuscod

                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {

                        var select = $("#Modtype_ID");
                        select.children().remove();
                        select.append($("<option>").val("ALL").text("เลือกDeliveryMode"));
                        $(data).each(function (index, item) {
                            select.append($("<option>").val(item.ORD_Type).text(item.ORD_Type + "/" + item.ORD_TypeName));
                        });
                    }
                });
                $("#ModdatepickerStart").val("");
                $("#Modtime").val("");
                $.ajax({
                    url: '@Url.Action("Getordertypeby", "Cart")',
                    data: {
                        type: "ALL"
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {

                        var select = $("#Ordertype_ID");
                        select.children().remove();

                        $(data).each(function (index, item) {
                            select.append($("<option>").val(item.ORD_Type).text(item.ORD_Type + "/" + item.ORD_TypeName));
                        });
                        var typeselect = $("#Ordertype_ID").val();

                        var mod = $("#Modtype_ID").val();
                        if (typeselect == "S") {
                            $("#datepickerStart").attr("disabled", false);

                        } else {

                            $("#datepickerStart").attr("disabled", true);
                        }
                        if (typeselect == "ID") {
                            $("#datepickerStart").attr("disabled", false);

                        } else {

                            $("#datepickerStart").attr("disabled", true);
                        } if (typeselect == "BO") {
                            $("#datepickerStart").attr("disabled", false);

                        } else {

                            $("#datepickerStart").attr("disabled", true);
                        }
                        if (typeselect == "CB") {
                            typeselect = "A";
                            mod = "MOT";
                        }
                        $.ajax({
                            url: '@Url.Action("GetOrdertype", "Cart")',
                            data: {
                                type: typeselect,
                                mod: mod
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                // //console.log(data);
                                //$("#datepickerStart").val(data.DateCal);

                                // $("#time").val(data.ORD_Time);
                                if (typeselect == "S") {
                                    $("#datepickerStart").val("");

                                    $("#time").val("");

                                } else {
                                    $("#datepickerStart").val(data.DateCal);

                                    $("#time").val(data.ORD_Time);
                                }
                            }
                        });
                    }
                });
            }
            $("#company").change(function () {

                //var code = $(this).attr('code');
                var code = $('#codeShipping').val();
                ShoppingCart_list(code, "")

            });
            function CheckCusQuatation(xQuatation) {
                var fixedTable1 = fixTable(document.getElementById('fixed-table-container-1'));
                var _valQuatation = xQuatation;
                var CUSCOD = cuscod;
                var usrlogin = userid;
                var valCompany = $('#company').val();
                var shipto = $('#codeShipping').val();
                $.ajax({
                    url: '@Url.Action("GetdataCheckQuatationShopping", "Cart")',
                    data: {

                        Quatation: _valQuatation,

                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        if (data.Getdata.length != 0) {
                            checkgetshiptoQ()
                            //getshipto()
                        } else {
                            $("#textAlertWarning").empty();
                            $("#textAlertWarning").text("ไม่มีข้อมูลที่ท่านต้องการ");
                            $("#myModalWarning").modal();
                            return false;
                        }
                    }
                    });
            }
            //ย้ายไปใช้ ShoppingCart_list เพื่อ mantain ร่วมกัน 4/08/66
            @*function GetCusQuatation(xQuatation) {

                var fixedTable1 = fixTable(document.getElementById('fixed-table-container-1'));
                var _valQuatation = xQuatation;
                var CUSCOD = cuscod;
                var usrlogin = userid;
                var shipto = $('#codeShipping').val();
                //$('#qpono').val(xQuatation);
                var loading = new Loading({ direction: 'hor', discription: 'Loading...', defaultApply: true, });
                $('#fixed-table-container-1 tbody:last-child').html("");
                $("#checkboxAll").prop('checked', false);
                $.ajax({
                    url: '@Url.Action("GetdataCusQuatation", "Cart")',
                    data: {
                        CUSCOD: CUSCOD,
                        Company: valCompany,
                        usrlogin: usrlogin,
                        _valQuatation: _valQuatation,
                        usrtype: usertype,
                        shiptocode: shipto
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        //console.log(data);


                        if (data.exerror != "") {
                            // waitingDialog.hide();
                            loading.out()
                            $("#textAlertWarning").empty();
                            $("#textAlertWarning").text(data.exerror);
                            $("#myModalWarning").modal();
                            return false;
                        }
                        $("#Cuqty").text(data.sumQty);
                        //$("#Cuitem").text(data.Getdata.length);
                        $("#CreditTerm").val(data.creditterm);
                        // $("#exampletb").empty();
                        ////console.log("Item_>>>>>>>>" + data.Getdata);
                        //alert("xxx");

                        if (_valQuatation != "") {

                            // $('#btnsubmitinsertquote').attr('disabled', 'disabled');
                            $("#CusPo").val(_valQuatation);
                        } else {
                            //$('#btnsubmitinsertquote').removeAttr('disabled');
                            $("#CusPo").val("");
                        }

                        if (data.Getdata.length != 0) {
                            //  alert(data.Getdata.length);
                            //  waitingDialog.hide();
                            loading.out()
                            var datacount = new Array();
                            var datacountfoc = new Array();
                            var datacountsum = new Array();
                            var datacountQty = new Array();
                            var chunk = 0;
                            var chunkfoc = 0;
                            var chunksum = 0;
                            //Modtype_ID
                            for (var i = 0; i < data.Getdata.length; i++) {

                                var Item_Type = data.Getdata[i].val.Item_Type;
                                ////console.log("Item_Type>>>>>>>>" + data.Getdata);
                                if (Item_Type == "FOC") {
                                    datacountfoc.push(Item_Type);
                                }
                            }
                            ////console.log(data.Getdata);
                            var Fsumfoc = datacountfoc.length;
                            //alert(Fsumfoc);
                            // return false;

                            // alert(data.Getdata.length);
                            // $("#Cuqty").text(data.Getdata.length);
                            var Type_Cal = data.Getdata[0].val.Type_Cal;

                            if (Type_Cal != '') {
                                $("#discon").val(Type_Cal);
                            }
                            var Special_Discount = data.Getdata[0].val.Special_Discount;
                            if (Special_Discount != '') {
                                $("#inputdis").val(Special_Discount);
                            }
                            var DiscountPercent = data.Getdata[0].val.DiscountPercent;

                            if (DiscountPercent != '') {
                                $("#dCredit").val(DiscountPercent);
                            }
                            for (var i = 0; i < data.Getdata.length; i++) {

                                chunk += parseFloat(data.Getdata[i].val.Qty);
                                datacount.push(data.Getdata[i].val.Qty);
                                var cc = data.Getdata[i].val.STKCOD;
                                ////console.log(cc);
                                datacountsum.push(cc);
                            }

                            var arrInput = datacountsum;
                            var sorted_arr = datacountsum.sort();
                            var sorted_arrnum = 0;
                            // //console.log("sorted_arr:  " + sorted_arr);
                            // var Datasorted_arr = JSON.stringify(sorted_arr);

                            // //console.log(' Datasorted_arrzzzz' + " " + sorted_arr.length)
                            var results = [];
                            // if (sorted_arr.length > 1) {
                            for (var i = 0; i < sorted_arr.length - 1; i++) {

                                var x = $.trim(sorted_arr[i]);
                                var y = $.trim(sorted_arr[i + 1]);
                                ////console.log("xxxxxx:  " + x);
                                // //console.log("yyy:  " + y);
                                if (y == x) {

                                    results.push(x);

                                }

                            }
                            var bsum = sorted_arr.length;
                            var fsum = results.length;
                            // $("#Cuqty").text(chunk + chunkfoc);
                            $("#Cuqty").digits();

                            $("#Cuitem").text(bsum - fsum);

                            //var Mod_Type = data.Getdata[0].val.ORDMOD_Type;
                            //$("#Modtype_ID").val(Mod_Type.trim());
                            //$("#Modtype_ID").trigger('change')
                            //var Ord_Type = data.Getdata[0].val.ORD_Type;

                            //$("#Ordertype_ID").val(Ord_Type.trim());

                            var SubmithtmlPage = "";
                            for (var i = 0; i < data.Getdata.length; i++) {
                                var company = data.Getdata[i].val.Company;
                                var Type = data.Getdata[i].val.Item_Type;
                                var Prcby = data.Getdata[i].val.PrcApproveBy;
                                var expdel = data.Getdata[i].val.ExpectPrice;
                                var STKGRPType = data.Getdata[i].val.STKGRP;
                                var accessId = data.Getdata[0].val.AccessID;
                                //เก็บเลข accessLog ของตัวเอง
                                console.log("accessIdQu = " + accessId);
                                if (accessId != "") {
                                    $("#accessIdCurrent").val(accessId);
                                }

                                if (Type == '-') { SubmithtmlPage += '<tr PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '">'; }
                                else { SubmithtmlPage += '<tr style="background-color: rgba(130, 198, 223, 0.3);" PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '">'; }

                                var sta = data.Getdata[i].val.Status;
                                if (sta != "N") {
                                    if (sta == "Q") {
                                        SubmithtmlPage += '<td style="width: 79px;"><input  id="idchk' + (i + 1) + '" class="chk"  CartID="' + data.Getdata[i].val.CartID + '"  PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" exp="' + expdel + '"  Instock="' + data.Getdata[i].val.InStock + '"  iType="' + data.Getdata[i].val.Item_Type + '" Uom="' + data.Getdata[i].val.UOM + '"  Qty="' + data.Getdata[i].val.Qty + '" wlo="' + data.Getdata[i].val.WH_Location + '" Backorderqty="' + data.Getdata[i].val.Backorder + '"     STKCOD="' + data.Getdata[i].val.STKCOD + '" Company="' + data.Getdata[i].val.Company + '" STKGRP="' + data.Getdata[i].val.STKGRP + '" Price="' + data.Getdata[i].val.Price + '" TotalPrice="' + data.Getdata[i].val.TotalPrice + '" SalePrice="' + data.Getdata[i].val.SalePrice + '" Amt="' + data.Getdata[i].val.Amt + '" Discount="' + data.Getdata[i].val.Discount + '" TotalDiscount="' + data.Getdata[i].val.TotalDiscount + '" ORDDAT="' + data.Getdata[i].val.ORDDAT + '" LineNote="' + data.Getdata[i].val.LineNote + '"  Promotion="' + data.Getdata[i].val.Promotion + '" type="checkbox"  name="chektb" class="form-control input-lg" ></td>';
                                    } else {
                                        SubmithtmlPage += '<td></td>';
                                    }

                                    //SubmithtmlPage += '<td style="width: 79px;"><input id="checkbox" style="display:none;" id="checkbox" class="chk"  CartID="' + data.Getdata[i].val.CartID + '" PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '"Instock="' + data.Getdata[i].val.InStock + '" iType="' + data.Getdata[i].val.Item_Type + '" Uom="' + data.Getdata[i].val.UOM + '"  Qty="' + data.Getdata[i].val.Qty + '" STKCOD="' + data.Getdata[i].val.STKCOD + '"  Company="' + data.Getdata[i].val.Company + '" STKDES="' + data.Getdata[i].val.STKDES + '" STKGRP="' + data.Getdata[i].val.STKGRP + '" Price="' + data.Getdata[i].val.Price + '" SalePrice="' + data.Getdata[i].val.SalePrice + '" Amt="' + data.Getdata[i].val.Amt + '" Discount="' + data.Getdata[i].val.Discount + '" ORDDAT="' + data.Getdata[i].val.ORDDAT + '" LineNote="' + data.Getdata[i].val.LineNote + '"  type="checkbox"  class="form-control input-lg" ></td>';
                                    //SubmithtmlPage += '<td><div  style="display:none;" class="glyphicon glyphicon-trash fa-2x" id="cancelx" PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" style=" color: red; cursor: pointer; "></div></td>';
                                } else {
                                    // if (Fsumfoc > 0) {
                                    //   SubmithtmlPage += '<td style="width: 79px;"><input  style="" id="checkbox" class="chk"  CartID="' + data.Getdata[i].val.CartID + '" PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" Instock="' + data.Getdata[i].val.InStock + '" iType="' + data.Getdata[i].val.Item_Type + '" Uom="' + data.Getdata[i].val.UOM + '"  Qty="' + data.Getdata[i].val.Qty + '"  Backorderqty="' + data.Getdata[i].val.Backorder + '"     STKCOD="' + data.Getdata[i].val.STKCOD + '" Company="' + data.Getdata[i].val.Company + '" STKGRP="' + data.Getdata[i].val.STKGRP + '" Price="' + data.Getdata[i].val.Price + '" TotalPrice="' + data.Getdata[i].val.TotalPrice + '" SalePrice="' + data.Getdata[i].val.SalePrice + '" Amt="' + data.Getdata[i].val.Amt + '" Discount="' + data.Getdata[i].val.Discount + '" TotalDiscount="' + data.Getdata[i].val.TotalDiscount + '" ORDDAT="' + data.Getdata[i].val.ORDDAT + '" LineNote="' + data.Getdata[i].val.LineNote + '"  Promotion="' + data.Getdata[i].val.Promotion + '" type="checkbox"  checked=checked  disabled class="form-control input-lg" ></td>';
                                    // } else {
                                    // SubmithtmlPage += '<td>Not Approved</td>';
                                    SubmithtmlPage += '<td style="width: 79px;"><input  id="idchk' + (i + 1) + '" class="chk"  CartID="' + data.Getdata[i].val.CartID + '"  PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" exp="' + expdel + '"  Instock="' + data.Getdata[i].val.InStock + '"  iType="' + data.Getdata[i].val.Item_Type + '" Uom="' + data.Getdata[i].val.UOM + '"  Qty="' + data.Getdata[i].val.Qty + '"  Backorderqty="' + data.Getdata[i].val.Backorder + '"     STKCOD="' + data.Getdata[i].val.STKCOD + '" Company="' + data.Getdata[i].val.Company + '" STKGRP="' + data.Getdata[i].val.STKGRP + '" Price="' + data.Getdata[i].val.Price + '" TotalPrice="' + data.Getdata[i].val.TotalPrice + '" SalePrice="' + data.Getdata[i].val.SalePrice + '" Amt="' + data.Getdata[i].val.Amt + '" Discount="' + data.Getdata[i].val.Discount + '" TotalDiscount="' + data.Getdata[i].val.TotalDiscount + '" ORDDAT="' + data.Getdata[i].val.ORDDAT + '" LineNote="' + data.Getdata[i].val.LineNote + '"  Promotion="' + data.Getdata[i].val.Promotion + '" type="checkbox"  name="chektb" class="form-control input-lg" ></td>';
                                    //SubmithtmlPage += '<td><div class="glyphicon glyphicon-trash fa-2x" id="cancelx" PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" style=" color: red; cursor: pointer; "></div></td>';
                                    // }
                                }
                                // SubmithtmlPage += '<input id="checkbox" class="chk"  CartID="' + data.Getdata[i].val.CartID + '" PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" Uom="' + data.Getdata[i].val.UOM + '"  Qty="' + data.Getdata[i].val.Qty + '" STKCOD="' + data.Getdata[i].val.STKCOD + '" STKDES="' + data.Getdata[i].val.STKDES + '" STKGRP="' + data.Getdata[i].val.STKGRP + '" Price="' + data.Getdata[i].val.Price + '" SalePrice="' + data.Getdata[i].val.SalePrice + '" Amt="' + data.Getdata[i].val.Amt + '" Discount="' + data.Getdata[i].val.Discount + '" ORDDAT="' + data.Getdata[i].val.ORDDAT + '" LineNote="' + data.Getdata[i].val.LineNote + '"  type="checkbox"  class="form-control input-lg" >';
                                SubmithtmlPage += '<td>' + (i + 1) + '</td>';


                                if (Fsumfoc == "0") {//glyphicon glyphicon-remove glyphicon glyphicon-trash
                                    SubmithtmlPage += '<td style="text-align: center;"><div class="fas fa-trash" style="font-size: 24px;color: #d62828f7;" id="cancelx" PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" CartID="' + data.Getdata[i].val.CartID + '" style=" color: red; cursor: pointer; "></div></td>';
                                } else {
                                    if (expdel != "0.00") {
                                        SubmithtmlPage += '<td style="text-align: center;"><div class="fas fa-trash" style="font-size: 24px;color: #d62828f7;" id="cancelx" PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" CartID="' + data.Getdata[i].val.CartID + '" style=" color: red; cursor: pointer; "></div></td>';
                                    } else {
                                        if (Type != "FOC") {
                                            SubmithtmlPage += '<td style="text-align: center;"><div class="fas fa-trash" style="font-size: 24px;color: #d62828f7;" id="cancelx"  PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" CartID="' + data.Getdata[i].val.CartID + '" style=" color: red; cursor: pointer;display:block "></div></td>';
                                        } else {
                                            SubmithtmlPage += '<td style="text-align: center;"><div class="fas fa-trash" style="font-size: 24px;color: #d62828f7;" id="cancelx"  PRCLST_NO="' + data.Getdata[i].val.PRCLST_NO + '" CartID="' + data.Getdata[i].val.CartID + '" style=" color: red; cursor: pointer;display:block"></div></td>';
                                        }
                                    }
                                }
                                // }
                                // SubmithtmlPage += '<td style="color: blue;">' + data.Getdata[i].val.Item_Type + '</td>';
                                if (company == "TAC") {
                                    SubmithtmlPage += '<td><i style="color: red;  font-size: 14px; font: icon;">' + data.Getdata[i].val.Company + "</i>/" + data.Getdata[i].val.STKCOD + '</td>';
                                } else if (company == "AAC") {

                                    SubmithtmlPage += '<td><i style="color: rgb(0, 119, 255);  font-size: 14px; font: icon;">' + data.Getdata[i].val.Company + "</i>/" + data.Getdata[i].val.STKCOD + '</td>';
                                }
                                else if (company == "") {

                                    SubmithtmlPage += '<td><i style="font-size: 14px; font: icon;">' + data.Getdata[i].val.STKCOD + '</td>';
                                }
                                //SubmithtmlPage += '<td><i style="color: red;  font-size: 14px;">' + data.Getdata[i].val.Company + "</i>/" + data.Getdata[i].val.STKCOD + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.STKDES + '</td>';

                                //จำนวนสั่งซื้อ
                                if (exp == "0.00") {

                                    if (Type != "FOC") {
                                        SubmithtmlPage += '<td><input type="number" id="quantity" name="quantity" class="tQty" style="width: 78px;" value=' + data.Getdata[i].val.Qty + ' min="0" ></td>';
                                    } else {
                                        SubmithtmlPage += '<td><input type="number" id="quantity" name="quantity" class="tQty" style="width: 78px;" value=' + data.Getdata[i].val.Qty + ' min="0"  disabled="disabled"></td>';
                                    }
                                } else {
                                    SubmithtmlPage += '<td><input type="number" id="quantity" name="quantity" class="tQty" style="width: 78px;" value=' + data.Getdata[i].val.Qty + ' min="1"  disabled="disabled"></td>';
                                }
                                if (Type != "FOC") {
                                    SubmithtmlPage += '<td><div style="text-decoration: line-through;">' + commaSeparateNumber(data.Getdata[i].val.Price) + '</div><div id="newprice"> ' + commaSeparateNumber(data.Getdata[i].val.SalePrice) + '</div></td>';
                                } else {
                                    SubmithtmlPage += '<td>' + commaSeparateNumber(data.Getdata[i].val.Price) + '</td>';
                                }

                                var exp = data.Getdata[i].val.ExpectPrice;
                                if (exp != "0.00") {
                                    if (sta != "N" && sta != "Q") {
                                        if (sta != "C") {

                                            SubmithtmlPage += '<td style="color:rgb(180, 239, 35);color: rgba(212, 25, 84, 0.98);/* text-align: right; *//* background-color: burlywood; */font-weight: bold;">' + commaSeparateNumber(data.Getdata[i].val.ExpectPrice) + '<br><div style="color: rgb(249, 160, 22);">รออนุมัติ<br>ราคาต่อรอง</div></td>';

                                        }
                                        else {
                                            SubmithtmlPage += '<td style="color:rgb(180, 239, 35);color: rgba(212, 25, 84, 0.98);/* text-align: right; *//* background-color: burlywood; */font-weight: bold;color:rgb(180, 239, 35);color: rgba(25, 185, 212, 0.98);/* text-align: right; *//* background-color: burlywood; */font-weight: bold;">' + commaSeparateNumber(data.Getdata[i].val.ExpectPrice) + '<br><div style="color:rgb(255, 0, 116);">ไม่อนุมัติ</div></td>';
                                        }
                                    }
                                    else if (sta == "N" || sta == "Q" && Prcby != '') {

                                        // SubmithtmlPage += '<td>Not Approved</td>';
                                        if (Prcby != "") {
                                            SubmithtmlPage += '<td style="font-weight: bold;color:rgba(31, 113, 21, 0.98);">' + commaSeparateNumber(data.Getdata[i].val.ExpectPrice) + '<br><div style="color:rgb(255, 0, 116);">ราคาอนุมัติ</div></td>';
                                        } else {
                                            SubmithtmlPage += '<td></td>';
                                        }
                                    }
                                } else {
                                    if (Type != "FOC") {

                                        SubmithtmlPage += '<td style="">' + commaSeparateNumber(data.Getdata[i].val.ExpectPrice) + '</td>';
                                    } else {

                                        if (sta != "N" && sta != "Q") {
                                            if (sta != "C") {
                                                SubmithtmlPage += '<td style="color:rgb(180, 239, 35);color: rgba(212, 25, 84, 0.98);/* text-align: right; *//* background-color: burlywood; */font-weight: bold;">' + commaSeparateNumber(data.Getdata[i].val.ExpectPrice) + '<br><div style="color: rgb(249, 160, 22);">รออนุมัติ<br>รายการของแถม</div></td>';
                                            } else {
                                                SubmithtmlPage += '<td style="color:rgb(180, 239, 35);color: rgba(212, 25, 84, 0.98);/* text-align: right; *//* background-color: burlywood; */font-weight: bold;">' + commaSeparateNumber(data.Getdata[i].val.ExpectPrice) + '<br><div style="color: rgb(249, 160, 22);">ไม่อนุมัติ<br>รายการของแถม</div></td>';
                                            }
                                        } else {
                                            SubmithtmlPage += '<td style="color:rgb(180, 239, 35);color: rgba(212, 25, 84, 0.98);/* text-align: right; *//* background-color: burlywood; */font-weight: bold;">' + commaSeparateNumber(data.Getdata[i].val.ExpectPrice) + '<br><div style="color: rgb(249, 160, 22);">อนุมัติ<br>รายการของแถม</div></td>';
                                        }
                                    }
                                }
                                // SubmithtmlPage += '<td>' + commaSeparateNumber(data.Getdata[i].val.Qty) + '</td>';


                               
                                SubmithtmlPage += '<td><div class="tamt" id="idamt' + (i + 1) + '">' + commaSeparateNumber(data.Getdata[i].val.Amt) + '</div></td>';
                                //<input type="number"  name="quantity" class="tamt" id="idamt' + (i + 1) + '"  style="width: 78px;z-index: 0; color: rgb(6, 6, 6); background-color: white; text-align: right; border: 0px;" value=' + commaSeparateNumber(data.Getdata[i].val.Amt) + ' disabled="disabled">

                                //SubmithtmlPage += '<td>' + commaSeparateNumber(data.Getdata[i].val.Amt) + '</td>';
                                SubmithtmlPage += '<td><div class="tbck" id="idbck' + (i + 1) + '">' + commaSeparateNumber(data.Getdata[i].val.Backorder) + '</div></td>';
                                SubmithtmlPage += '<td><div class="tstock">' + commaSeparateNumber(data.Getdata[i].val.Stock) + '</div></td>';
                                SubmithtmlPage += '<td><div class="tstock">' + commaSeparateNumber(data.Getdata[i].val.KDC_QTY) + '</div></td>';
                                SubmithtmlPage += '<td><div class="tstock">' + commaSeparateNumber(data.Getdata[i].val.PDC_QTY) + '</div></td>';
                                SubmithtmlPage += '<td><div class="tstock">' + data.Getdata[i].val.WH_Location + '</div></td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.LineNote + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.PrcRemark + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.ORDDAT + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.Promotion + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.Item_Type + '</td>';
                                // SubmithtmlPage += '<td style="display:none;">' + data.Getdata[i].val.UOM + '</td>';
                                // SubmithtmlPage += '<td style="display:none;">' + data.Getdata[i].val.CartID + '</td>';
                                SubmithtmlPage += '</tr>';
                                //$("#exampletb").append(SubmithtmlPage);

                            }

                            $('#fixed-table-container-1  tbody:last-child').append(SubmithtmlPage);


                            var fixedTable1 = fixTable(document.getElementById('fixed-table-container-1'));



                            //if (Fsumfoc > 0) {
                            //    $("#btnChk").trigger("click");

                            //} else {
                            //    $("#btnChk").trigger("click");
                            //}
                        } else {
                            loading.out()
                            $("#textAlertWarning").empty();
                            $("#textAlertWarning").text("ไม่มีข้อมูลที่ท่านต้องการค้นหา");
                            $("#myModalWarning").modal();
                            return false;
                        }
                    }
                });

            }*@
            $("#exampletb").on("blur", ".tQty", function () {

                //ShoppingCartNumber();
                var valqty = $(this).val();
                //var maxord = $(this).attr('max');


                var oldord = "";
                var oldord;
                oldord = $(this).closest('tr').find('.tQty').attr("old");

                var bytescold = CryptoJS.AES.decrypt(oldord.toString(), 'secret key 123');
                oldord = bytescold.toString(CryptoJS.enc.Utf8);
                var maxord = "";
                var Mymaxord;
                Mymaxord = $(this).closest('tr').find('.tQty').attr("elca");

                var bytesc = CryptoJS.AES.decrypt(Mymaxord.toString(), 'secret key 123');
                maxord = bytesc.toString(CryptoJS.enc.Utf8);
                if (maxord == "") {
                    maxord = "0";
                } else {
                    maxord = maxord;
                }

                var _price = $(this).parents("tr:eq(0)").find("#newprice").html();

                var _amt = $(this).parents("tr").find(".tamt").html();;
                // alert(_amt.replace(/,/g, ""))
                var sumnewamt = _price.replace(/,/g, "") * valqty.replace(/,/g, "");
                // alert(sumnewamt)
                var idamt = $(this).parents("tr:eq(0)").find(".tamt").attr('id');
                // alert(idamt)
                $("#" + idamt + "").html(commaSeparateNumber(sumnewamt.toFixed(2)));

                var _stock = $(this).parents("tr").find(".tstock").html();
                var sumbckord;
                sumbckord = _stock.replace(/,/g, "") - valqty.replace(/,/g, "");
                //var _bckord = $(this).parents("tr").find(".tbck").html();

                var idbckord = $(this).parents("tr:eq(0)").find(".tbck").attr('id');
                if (parseFloat(sumbckord) < 0) {
                    sumbckord = valqty.replace(/,/g, "") - _stock.replace(/,/g, "");
                    $("#" + idbckord + "").html(commaSeparateNumber(sumbckord));
                } else {

                    $("#" + idbckord + "").html(0);
                }
                var idchk = $(this).parents("tr:eq(0)").find(".chk").attr('id');

                var sumQty = 0;
                var qty = "";
                $('#exampletb tr').find('input[type="checkbox"]').each(function () {
                    if ($(this).closest('tr').find('.tQty').val() == "" || $(this).closest('tr').find('.tQty').val() == "0") {
                        qty = "0";
                    } else {
                        qty = $(this).closest('tr').find('.tQty').val();
                    }
                    sumQty += parseFloat(qty);

                });
                $('#Cuqty').html(sumQty);
                if (valqty == "0") {
                    //$(this).parents("tr:eq(0)").find(".chk").prop('disabled', true);
                    $("#" + idchk + "").attr('disabled', 'disabled');
                    return false;
                    //  $(this).closest('tr').find('.chk').prop('disabled', false);
                } else {
                    $("#" + idchk + "").removeAttr('disabled');
                }
                if (valqty == "") {
                    //$(this).parents("tr:eq(0)").find(".chk").prop('disabled', true);
                    $("#" + idchk + "").attr('disabled', 'disabled');

                    //  $(this).closest('tr').find('.chk').prop('disabled', false);
                } else {
                    $("#" + idchk + "").removeAttr('disabled');
                }
                if (maxord != "0") {
                    if (parseInt(valqty) > parseInt(maxord)) {
                        $(this).val(oldord);//aps//
                        // $(this).val("");
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("ไม่สามารถทำรายการตามจำนวนที่ระบุได้ โปรดติดต่อพนักงานขาย");
                        $("#myModalWarning").modal();


                    }
                }
            });
            $("#exampletb").on("change", ".tQty", function () {

                //ShoppingCartNumber();

                var valqty = $(this).val();

                var oldord = "";
                var oldord;
                oldord = $(this).closest('tr').find('.tQty').attr("old");

                var bytescold = CryptoJS.AES.decrypt(oldord.toString(), 'secret key 123');
                oldord = bytescold.toString(CryptoJS.enc.Utf8);

                var maxord = "";
                var Mymaxord;
                Mymaxord = $(this).closest('tr').find('.tQty').attr("elca");

                var bytesc = CryptoJS.AES.decrypt(Mymaxord.toString(), 'secret key 123');
                maxord = bytesc.toString(CryptoJS.enc.Utf8);
                if (maxord == "") {
                    maxord = "0";
                } else {
                    maxord = maxord;
                }
                if (maxord != "0") {
                    if (parseInt(valqty) > parseInt(maxord)) {
                        $(this).val(oldord);//aps//
                        //$(this).val("");
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("ไม่สามารถทำรายการตามจำนวนที่ระบุได้ โปรดติดต่อพนักงานขาย");
                        $("#myModalWarning").modal();


                    }
                }
                var _price = $(this).parents("tr:eq(0)").find("#newprice").html();

                var _amt = $(this).parents("tr").find(".tamt").html();;
                // alert(_amt.replace(/,/g, ""))
                var sumnewamt = _price.replace(/,/g, "") * valqty.replace(/,/g, "");
                // alert(sumnewamt)
                var idamt = $(this).parents("tr:eq(0)").find(".tamt").attr('id');
                // alert(idamt)
                $("#" + idamt + "").html(commaSeparateNumber(sumnewamt.toFixed(2)));

                var _stock = $(this).parents("tr").find(".tstock").html();
                var sumbckord;
                sumbckord = _stock.replace(/,/g, "") - valqty.replace(/,/g, "");
                //var _bckord = $(this).parents("tr").find(".tbck").html();

                var idbckord = $(this).parents("tr:eq(0)").find(".tbck").attr('id');
                if (parseFloat(sumbckord) < 0) {
                    sumbckord = valqty.replace(/,/g, "") - _stock.replace(/,/g, "");
                    $("#" + idbckord + "").html(commaSeparateNumber(sumbckord));
                } else {

                    $("#" + idbckord + "").html(0);
                }
                var idchk = $(this).parents("tr:eq(0)").find(".chk").attr('id');

                var sumQty = 0;
                var qty = "";
                $('#exampletb tr').find('input[type="checkbox"]').each(function () {
                    if ($(this).closest('tr').find('.tQty').val() == "" || $(this).closest('tr').find('.tQty').val() == "0") {
                        qty = "0";
                    } else {
                        qty = $(this).closest('tr').find('.tQty').val();
                    }
                    sumQty += parseFloat(qty);

                });
                $('#Cuqty').html(sumQty);
                if (valqty == "0") {
                    //$(this).parents("tr:eq(0)").find(".chk").prop('disabled', true);
                    $("#" + idchk + "").attr('disabled', 'disabled');
                    return false;
                    //  $(this).closest('tr').find('.chk').prop('disabled', false);
                } else {
                    $("#" + idchk + "").removeAttr('disabled');
                }
                if (valqty == "") {
                    //$(this).parents("tr:eq(0)").find(".chk").prop('disabled', true);
                    $("#" + idchk + "").attr('disabled', 'disabled');

                    //  $(this).closest('tr').find('.chk').prop('disabled', false);
                } else {
                    $("#" + idchk + "").removeAttr('disabled');
                }
            });;

            $('#checkboxAll').click(function (event) {  //on click APS
                if (this.checked) { // check select status


                    $(".chk").prop('checked', $(this).prop("checked"));
                    $('#exampletb tr').find('.tQty').prop('disabled', true);

                    $('#exampletb tr').find('input[type="checkbox"]').each(function () {

                        var chkqty = $(this).parents("tr:eq(0)").find('.tQty').val()
                        if (chkqty == "0") {
                            $(this).parents("tr:eq(0)").find('.chk').prop('checked', false);
                            $(this).parents("tr:eq(0)").find('.tQty').prop('disabled', false);
                        }
                    });
                    // $("input:checkbox").prop('checked', $(this).prop("checked"));
                    $("#btnChk").trigger("click");

                } else {
                    G_Delivertmode();
                    $("input[name='chektb']").prop('checked', false);
                    /// ShoppingCart_list()
                    $('#exampletb tr').find('input[type="checkbox"]').each(function () {
                        var itype = $(this).attr('itype');//APS//
                        var exp = $(this).attr('exp');
                        var bck = $(this).attr('bck');

                        if (exp == "0.00") {
                            if (itype != "-") {
                                $(this).parents("tr:eq(0)").find('.tQty').prop('disabled', true);
                            } else {
                                if (bck == "0") {
                                    $(this).parents("tr:eq(0)").find('.tQty').prop('disabled', false);
                                } else {
                                    $(this).parents("tr:eq(0)").find('.tQty').prop('disabled', true);
                                }
                            }
                        } else {
                            $(this).find('.tQty').prop('disabled', true);
                        }
                    });
                    $("#btnChk").trigger("click");
                }
            });
            $("#exampletb").on("click", "input[type='checkbox']", function () {
                var bck = $(this).attr('bck');

                if (this.checked) {
                    $(this).closest('tr').find('.tQty').prop('disabled', true);
                } else {
                    G_Delivertmode();
                    if (bck == "0") {

                        $(this).closest('tr').find('.tQty').prop('disabled', false);
                    } else {

                        $(this).closest('tr').find('.tQty').prop('disabled', true);
                    }
                }
                var checkchecked = $('#exampletb tr').find('input[type="checkbox"]:checked');

                // $("#codetransportation").val("0");
                // checkDenyK99()
                if (checkchecked.length == 1) { $('#checkboxAll').prop('checked', false); $('#bQty').val("0"); $('#bQtystk').val("0"); }
                $("#btnChk").trigger("click");
                $('#exampletb tr').find('input[type="checkbox"]:checked').each(function () {
                    var VSalePrice = $(this).attr('SalePrice');
                    //checkDenyK99()


                    if (VSalePrice != "0.00") {
                        //select all checkboxes with class "chk"

                        $("#btnChk").trigger("click");
                        //$("#btnsummyqty").trigger("click");
                    } else {

                        //this.checked = false; //deselect all checkboxes with class "chk"
                        // $("#btnChk").trigger("click");
                        // $("#btnsummyqty").trigger("click");
                    }

                });
            });
            $('#ckeckdiscount').click(function () {
                $("#ckeckdiscount").prop('checked', true);
                $("#checklabor").prop('checked', false);
                $("#inputlabor").attr("disabled", true);
                $("#inputdis").removeAttr("disabled");

                $("#inputlabor").val("");
                $("#btncal").trigger('click');
            });
            $('#checklabor').click(function () {
                $("#ckeckdiscount").prop('checked', false);
                $("#checklabor").prop('checked', true);

                $("#inputlabor").removeAttr("disabled");
                $("#inputdis").attr("disabled", true);

                $("#inputdis").val("");
                $("#btncal").trigger('click');
            });
            $(document).on('click', '#btncal', function () {
                $("#btnChk").trigger('click');

            });
            $(document).on('click', '#btncallabor', function () {
                $("#btnChk").trigger('click');

            });
            var chcksumbeforeDiscount = 0;

            $(document).on('click', '#btnChk', function () {
                // alert("xxx")
                var last = null;
                var VSTKCOD = null;
                var n = 0;
                var sumbeforePrice = 0;
                var sumbeforeSalePrice = 0;
                var sumbeforeDiscount = 0;
                var sumlaborcost = 0.00;
                var sumQty = 0;
                var sumamt = 0;
                var sumunprice = 0;
                var sumDiscount = 0;
                var subdis = 0;
                var amtDiscount = 0;
                var Amt = 0;
                var SumSalePricesPremiumPrice = 0;
                var amtSalePrices = 0;
                var sumActamt = 0;
                var data = [];
                var chksop = 0;
                var sumnetprice = 0;
                // $("#dCredit").val("0");
                //myApp.showPleaseWait();

                $('#exampletb tr').find('input[type="checkbox"]:checked').each(function () {

                    sumbeforePrice += parseFloat($(this).attr('totalprice'));
                    // sumbeforeDiscount += parseFloat($(this).attr('totaldiscount'));
                    sumbeforeDiscount = 0;
                    //sumQty += parseFloat($(this).attr('Qty'));
                    //sumamt += parseFloat($(this).attr('amt'));
                    sumQty += parseFloat($(this).closest('tr').find('.tQty').val());
                    sumamt += parseFloat($(this).closest('tr').find('.tQty').val() * $(this).attr('SalePrice'));
                    //countstk = i;

                    sumDiscount += parseFloat($(this).attr('discount'));
                    // var x = $('#exampletb tr:first .tQty').val()
                    // $(this).closest('tr').find('.tQty').val();

                    //get เลข accessId จากตะกร้าเข้า pop up
                    var accessIdCurrent = $("#accessIdCurrent").val();
                    if (accessIdCurrent != "") {
                        $("#accessIdCurrentPop").val(accessIdCurrent);
                        $("#cuscodPop").val(cuscod);
                    }

                    var VQty = $(this).attr('Qty');
                    var Vbackorderqty = $(this).attr('backorderqty');

                    var PRCLST_NO = $(this).attr('PRCLST_NO');
                    var Uom = $(this).attr('Uom');
                    var VSTKCOD = $(this).attr('STKCOD');
                    var VSTKGRP = $(this).attr('STKGRP');
                    var VSTKDES = $(this).attr('STKDES');
                    var VPrice = $(this).attr('Price');
                    var VSalePrice = $(this).attr('SalePrice');
                    var VAmt = $(this).attr('Amt');
                    var VDiscount = $(this).attr('Discount');
                    var VORDDAT = $(this).attr('ORDDAT');
                    var VLineNote = $(this).attr('LineNote');
                    var Ordertype = $('#Ordertype_ID').val();
                    var AmtQty = $('#bQty').val();
                    // var AmtSalePrices = $('#bAmtSalePrices').val();
                    var TotalAmt = $("#bAmt").val();
                    var DiscountAmt = $("#bdicAmt").val();
                    var Credit = $("#dCredit").val();
                    var AmtSalePrices = $("#bAmtSalePrices").val();
                    var Ordertype = $("#Ordertype_ID").val();
                    sumActamt += parseFloat(((VQty - Vbackorderqty) * VSalePrice))
                    var ItemList = {
                        VQty: VQty,
                        VSTKCOD: VSTKCOD,
                        VSTKDES: VSTKDES,
                        VSTKGRP: VSTKGRP,
                        VPrice: VPrice,
                        VSalePrice: VSalePrice,
                        VDiscount: VDiscount,
                        VAmt: VAmt,
                        VORDDAT: VORDDAT,
                        VLineNote: VLineNote,
                        Ordertype: Ordertype,
                        AmtQty: AmtQty,
                        //AmtSalePrices: AmtSalePrices,
                        TotalAmt: TotalAmt,
                        Credit: Credit,
                        AmtSalePrices: AmtSalePrices,
                        AmtDiscount: DiscountAmt,
                        Ordertype: Ordertype,
                        PRCLST_NO: PRCLST_NO,
                        Uom: Uom
                    };


                    data.push(VSTKCOD)


                });
                var sorted_arr = data.sort();
                var results = [];
                for (var i = 0; i < sorted_arr.length - 1; i++) {
                    var x = $.trim(sorted_arr[i]);
                    var y = $.trim(sorted_arr[i + 1]);
                    if (y == x) {

                        results.push(x);

                    }

                }
                //var typecke = $("input[name='vehicle']:checked").val();



                var bsum = sorted_arr.length;
                var fsum = results.length;
                $('#bQtystk').val(bsum - fsum);

                $('#bQty').val(sumQty);


                $("#bAmtSalePrices").val(sumamt.toFixed(2));
                $("#bAmtSalePrices").val(commaSeparateNumber($("#bAmtSalePrices").val()));//SUBTOTAL
                //$("#Msumbedisprice").html("0");//Discount Summary
                $('#sumqty').html(sumQty);//จำนวนสินค้า Summary
                $('#sumstk').html(bsum - fsum);//จำนวนเบอร์สินค้า Summary
                $('#TotalAmt').html(commaSeparateNumber($("#bAmtSalePrices").val()));//SUBTOTAL Summary

                amtSalePrices = sumamt; //ราคาก่อนส่วนลดและก่อน vat
                if (amtSalePrices == " ") {
                    amtSalePrices = "0.00"
                    $("#bAmtSalePrices").val("0.00");
                }




                ///////////////////////////// คำนวณส่วนลดท้ายบิล  /////////////////////////////
                var amtDiscountendofbill = 0;
                var amtaftercalendofbill = 0;
                var valcal = $("#discon").val(); ///หน่วย บาทหรือ%
                var valdis = $("#inputdis").val(); ///ราคาส่วนลดท้ายบิล
                if (valdis == "") { valdis = "0"; }
                //var typecke = $("input[name='vehicle']:checked").val();  //ส่วนลด =1
                var typecke;
                var chkvehicle = $("input[name='vehicle']:checked").val() ? true : false
                // alert(chkvehicle)
                if ($("input[name='vehicle']:checked").val() ? true : false == true) {
                    typecke = "1"

                } else if ($("input[name='vehicle']:checked").val() ? true : false == false) { typecke = "0" }

                if (typecke == "1") {//คำนวณส่วนลดท้ายบิล

                    if (valcal == "0") {//%// {

                        amtDiscountendofbill = parseFloat((valdis / 100)) * parseFloat(amtSalePrices); //<--- คำนวนส่วนลดท้ายบิล%//
                        // total = Pricestotal - amtDiscount;

                        amtaftercalendofbill = parseFloat(amtSalePrices) - parseFloat(amtDiscountendofbill);
                    } else if (valcal == "2") {//บาท//

                        amtDiscountendofbill = parseFloat(valdis);
                        amtaftercalendofbill = parseFloat(amtSalePrices) - parseFloat(amtDiscountendofbill);//<--- คำนวนส่วนลดท้ายบิล บาท//
                    }
                } else if (typecke == "0") {

                    amtDiscountendofbill = 0;

                }

                $("#sumdiscountprice").val(amtDiscountendofbill.toFixed(2));
                $("#sumdiscountprice").val(commaSeparateNumber($("#sumdiscountprice").val()));
                $("#Msumbedisprice").html(commaSeparateNumber($("#sumdiscountprice").val()));//สรุปส่วนลดท้ายบิล
                ///////////////////////////// คำนวณส่วนลดท้ายบิล  /////////////////////////////

                ///////////////////////////// คำนวณค่าแรง /////////////////////////////
                var amtlabor = 0;
                var amtaftercallabor = 0;
                var valcallabor = $("#disconlabor").val();///หน่วย บาทหรือ%
                var valdislabor = $("#inputlabor").val();///ราคาค่าแรง
                if (valdislabor == "") { valdislabor = "0"; }
                var vehiclelabor;

                //var typeckelabor = $("input[name='vehiclelabor']:checked").val(); //ค่าแรง =2
                if ($("input[name='vehiclelabor']:checked").val() ? true : false == true) {
                    typeckelabor = "2"

                } else if ($("input[name='vehiclelabor']:checked").val() ? true : false == false) { typeckelabor = "0" }


                if (typeckelabor == "2") {//คำนวณค่าแรง
                    if (valcallabor == "0") {//คำนวณค่าแรงเป็น%
                        amtlabor = parseFloat((valdislabor / 100)) * parseFloat(amtSalePrices); //<--- คำนวณค่าแรง%//
                        amtaftercallabor = parseFloat(amtSalePrices) + parseFloat(amtlabor)
                    } else if (valcallabor == "2") {//คำนวณค่าแรงเป็นบาท
                        amtlabor = parseFloat(valdislabor) //<--- คำนวณค่าแรง%//
                        amtaftercallabor = parseFloat(amtSalePrices) + parseFloat(amtlabor)
                    }


                }

                $("#sumdiscountpricelabor").val(amtlabor.toFixed(2));
                $("#sumdiscountpricelabor").val(commaSeparateNumber($("#sumdiscountpricelabor").val()));

                $("#summarylaber").html(commaSeparateNumber($("#sumdiscountpricelabor").val()));//สรุปส่วนลดท้ายบิล
                ///////////////////////////// คำนวณค่าแรง  /////////////////////////////

                var amtCredit = $("#dCredit").val();

                // if (amtCredit != "0") {

                $("#cr").html(amtCredit + "%"); //Discount %  Summary
                amtDiscount = parseFloat((amtCredit / 100)) * parseFloat(sumamt - amtDiscountendofbill); // Discount %  * ราคาก่อนส่วนลดและก่อน vat

                $("#bdicAmt").val(amtDiscount.toFixed(2)); //ส่วนลกที่หัก Discount % แล้ว
                $("#bdicAmt").val(commaSeparateNumber($("#bdicAmt").val()));//Discount
                $('#sumDiscount').html(commaSeparateNumber($("#bdicAmt").val())); //Discount Summary
                sumbeforeDiscount = parseFloat(sumamt) - parseFloat(amtDiscountendofbill) - parseFloat(amtDiscount) + parseFloat(amtlabor); // ราคาก่อนส่วนลดและก่อน vat -ส่วนลดท้ายบิล - Discount%ที่คำนวนแล้ว +ค่าแรง
                chcksumbeforeDiscount = sumbeforeDiscount;
                $("#texttotDis").val(sumbeforeDiscount.toFixed(2));  //ราคาก่อนบวก vat
                $("#texttotDis").val(commaSeparateNumber($("#texttotDis").val()));//NET
                sumActamt = parseFloat(sumbeforeDiscount) * (0.07);   //ราคาก่อนบวก vat * vat
                sumActamt = sumActamt.toFixed(2);
                sumnetpric = Number(sumbeforeDiscount) + Number(sumActamt);

                //console.log('ราคาก่อนบวก vat = ' + sumActamt);
                //console.log('รวม = ' + sumnetpric);
                //console.log('รวม toFixed = ' + sumnetpric);

                //$("#sumAmt").html(sumnetpric.toFixed(2)) //NET Summary
                $("#sumAmt").html(commaSeparateNumber($("#texttotDis").val())) //NET Summary
                // } else {

                //    $("#cr").html("0%"); //Discount %  Summary

                //    amtDiscount = parseFloat((amtCredit / 100)) * parseFloat(sumamt - amtDiscountendofbill); // Discount %  * ราคาก่อนส่วนลดและก่อน vat
                //    $("#bdicAmt").val(amtDiscount.toFixed(2)); //ส่วนลกที่หัก Discount % แล้ว
                //    $("#bdicAmt").val(commaSeparateNumber($("#bdicAmt").val()));//Discount
                //    $('#sumDiscount').html(commaSeparateNumber($("#bdicAmt").val())); //Discount Summary
                //    sumbeforeDiscount = parseFloat(sumamt) - parseFloat(amtDiscountendofbill) - parseFloat(amtDiscount) + parseFloat(amtlabor); // ราคาก่อนส่วนลดและก่อน vat -ส่วนลดท้ายบิล - Discount% =0 ที่คำนวนแล้ว +ค่าแรง

                //    $("#texttotDis").val(sumbeforeDiscount.toFixed(2));
                //    $("#texttotDis").val(commaSeparateNumber($("#texttotDis").val()));//NET

                //    $("#sumAmt").html(commaSeparateNumber($("#texttotDis").val())) //NET Summary
                //    sumActamt = parseFloat(sumbeforeDiscount) * (0.07);
                //    sumnetpric = sumbeforeDiscount + sumActamt;

                //    $("#bAmt").val((sumActamt).toFixed(2));
                //}

                // alert(sumbeforeDiscount + sumActamt)
                // alert(sumnetpric)
                $("#bvat").val(sumActamt); //ภาษี 7% /VAT
                $("#bvat").val(commaSeparateNumber($("#bvat").val()));
                $("#sumvat").html(commaSeparateNumber($("#bvat").val())); //Vat Summary
                //alert(sumnetpric)
                $("#bAmt").val((sumnetpric).toFixed(2));
                $("#bAmt").val(commaSeparateNumber($("#bAmt").val()));//TOTAL
                $("#sumTol").html(commaSeparateNumber($("#bAmt").val())); //TOTAL Summary

                // return false;
            });
            $(document).on('change', '#Modtype_ID', function () {
                if (navigator.onLine) {
                    //alert('online')
                    var type = $("#Modtype_ID").val();
                    $("#btnChk").trigger('click');
                    if (usertype == "6") {
                        var checkamt = chcksumbeforeDiscount;

                        //if (Ordertype == "MOT") {
                        if (type == "MOT") {

                            if (parseFloat(checkamt) < parseFloat(4000)) {
                                $("#textAlertnextshopping").empty();
                                $("#textAlertnextshopping").text("ซื้อสินค้าครบ 4,000 ขึ้นไป ฟรีค่าขนส่งมอเตอร์ไซค์");
                                $("#confirm-nextshopping").modal();

                            }
                        }
                    }







                    if (type == "S") {
                        $("#datepickerStart").val("");

                        $("#time").val("");

                    }

                    var d = new Date();
                    var date = new Date();
                    var time2 = d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds();
                    var date = new Date(time2);
                    if (date.getHours() >= 12) {
                        var hour = parseInt(date.getHours()) - 12;
                        var amPm = "PM";
                    } else {
                        var hour = date.getHours();
                        var amPm = "AM";
                    }
                    //var time = d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds();// + " " + amPm;

                    var Hours = d.getHours();
                    Hours = Hours > 9 ? Hours : '0' + Hours;
                    var Minutes = d.getMinutes();
                    Minutes = Minutes > 9 ? Minutes : '0' + Minutes;
                    var Seconds = d.getSeconds();
                    Seconds = Seconds > 9 ? Seconds : '0' + Seconds;
                    var time = Hours + ":" + Minutes + ":" + Seconds;

                    var today = new Date();
                    var dd = today.getDate();
                    var mm = today.getMonth() + 1; //January is 0!

                    var yyyy = today.getFullYear();
                    if (dd < 10) {
                        dd = '0' + dd
                    }
                    if (mm < 10) {
                        mm = '0' + mm
                    }
                    var today = dd + '-' + mm + '-' + yyyy;
                    //crdate.datepicker({ dateFormat: 'dd-mm-yy' });
                    $("#ModdatepickerStart").val(today);
                    $("#Modtime").val(time);

                    $.ajax({
                        url: '@Url.Action("Getordertypeby", "Cart")',
                        data: {
                            type: type
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {

                            var select = $("#Ordertype_ID");
                            select.children().remove();

                            $(data).each(function (index, item) {
                                select.append($("<option>").val(item.ORD_Type).text(item.ORD_Type + "/" + item.ORD_TypeName));
                            });
                            var typeselect = $("#Ordertype_ID").val();

                            var mod = $("#Modtype_ID").val();
                            if (typeselect == "S") {
                                $("#datepickerStart").attr("disabled", false);

                            } else {

                                $("#datepickerStart").attr("disabled", true);
                            }
                            if (typeselect == "ID") {
                                $("#datepickerStart").attr("disabled", false);

                            } else {

                                $("#datepickerStart").attr("disabled", true);
                            } if (typeselect == "BO") {
                                $("#datepickerStart").attr("disabled", false);

                            } else {

                                $("#datepickerStart").attr("disabled", true);
                            }
                            if (typeselect == "CB") {
                                typeselect = "A";
                                mod = "MOT";
                            }
                            $.ajax({
                                url: '@Url.Action("GetOrdertype", "Cart")',
                                data: {
                                    type: typeselect,
                                    mod: mod
                                },
                                type: "POST",
                                dataType: "JSON",
                                success: function (data) {
                                    // //console.log(data);
                                    //$("#datepickerStart").val(data.DateCal);

                                    // $("#time").val(data.ORD_Time);
                                    if (typeselect == "S") {
                                        $("#datepickerStart").val("");

                                        $("#time").val("");

                                    } else {
                                        $("#datepickerStart").val(data.DateCal);

                                        $("#time").val(data.ORD_Time);
                                    }
                                }
                            });
                        }
                    });
                } else {
                    alert('Not connect to network...');
                    return false;
                }
            });
            $(document).on('change', '#Ordertype_ID', function () {
                if (navigator.onLine) {
                    // alert('online')
                    var x = $('#Ordertype_ID').val();
                    if (x == "S") {
                        $("#datepickerStart").attr("disabled", false);
                    } else if (x == "ID") {
                        $("#datepickerStart").attr("disabled", false);
                    } else if (x == "BO") {
                        $("#datepickerStart").attr("disabled", false);
                    } else {
                        $("#datepickerStart").attr("disabled", true);
                    }
                    var type = $("#Ordertype_ID").val();
                    if (type == "ID") {
                        type = "S";
                    }

                    var mod = $("#Modtype_ID").val();
                    $.ajax({
                        url: '@Url.Action("GetOrdertype", "Cart")',
                        data: {
                            type: type,
                            mod: mod
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            if (type == "S") { // ขนส่งรับเอง
                                $("#datepickerStart").val("");
                            } else if (type == "BO") {
                                $("#datepickerStart").val("");
                                $("#time").val("");
                            } else {
                                $("#datepickerStart").val(data.DateCal);
                                $("#time").val(data.ORD_Time);
                            }
                        }
                    });

                    $("#btnChk").trigger('click');

                } else {
                    alert('Not connect to network...');
                    return false;
                }
            });
            $('#delall').click(function (event) {
                var data = new Array();
                $('#exampletb tr').find('input[type="checkbox"]:checked').each(function () {
                    var cartid = $(this).attr('cartid');
                    var ItemList = {
                        Vidorder: cartid
                    }
                    data.push(ItemList);
                });
                if (data.length == 0) {
                    $("#textAlertWarning").empty();
                    $("#textAlertWarning").text("กรุณาเลือกสินค้าที่ต้องการลบ");
                    $("#myModalWarning").modal(); return false;
                }
                var DataSend = JSON.stringify(data);
                //console.log(DataSend);
                $.ajax({
                    url: '@Url.Action("DelShoppingCart", "Cart")',
                    data: {
                        DataSend: DataSend
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        //console.log(data);
                        if (data == true) {

                            $("#textAlertSucces").empty();
                            $("#textAlertSucces").text("ลบข้อมูลเรียบร้อยแล้ว");
                            $("#myModalSucces").modal();
                            // waitingDialog.hide();
                            // $('#btnseach').trigger('click');
                            location.reload();
                        }
                        else {
                            $("#textAlert").empty();
                            $("#textAlert").text("ลบข้อมูลไม่สำเร็จกรุณาทำรายการใหม่");
                            $("#myModal").modal();
                        }
                    }
                });
            });
            $(document).on('click', '#cancelxall', function () {
                $("#confirm-deleteall").modal();

            });

            $(document).on('click', '#cancelx', function () {
                $("#confirm-delete").modal();
                var row_d = $(this).attr('cartid');
                $('#del').attr("cartid", row_d);
            });
            $(document).delegate('#del', 'click', function () {
                var data = new Array();
                var cartid = $(this).attr('cartid');
                var ItemList = {
                    Vidorder: cartid
                }
                data.push(ItemList);
                var DataSend = JSON.stringify(data);
                $.ajax({
                    url: '@Url.Action("DelShoppingCart", "Cart")',
                    data: {
                        DataSend: DataSend
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        //console.log(data);
                        if (data == true) {

                            $("#textAlertSucces").empty();
                            $("#textAlertSucces").text("ลบข้อมูลเรียบร้อยแล้ว");
                            $("#myModalSucces").modal();
                            // waitingDialog.hide();
                            // $('#btnseach').trigger('click');
                            location.reload();
                        }
                        else {
                            $("#textAlert").empty();
                            $("#textAlert").text("ลบข้อมูลไม่สำเร็จกรุณาทำรายการใหม่");
                            $("#myModal").modal();
                        }
                    }
                });
            });
            $(document).on('change', '#dCredit', function () {

                // alert('xxxxxxxx');
                var cr = $('#dCredit').val();

                $("#cr").text(cr + "%");
                $("#btnChk").trigger('click');

                var data = new Array();
                $('#exampletb tr').find('input[type="checkbox"]:checked').each(function () {
                    //countstk = i;
                    sumDiscount += parseFloat($(this).attr('discount'));
                    var VQty = $(this).attr('Qty');
                    var PRCLST_NO = $(this).attr('PRCLST_NO');
                    var Uom = $(this).attr('Uom');
                    var VSTKCOD = $(this).attr('STKCOD');
                    var VSTKGRP = $(this).attr('STKGRP');
                    var VSTKDES = $(this).attr('STKDES');
                    var VPrice = $(this).attr('Price');
                    var VSalePrice = $(this).attr('SalePrice');
                    var VAmt = $(this).attr('Amt');
                    var VDiscount = $(this).attr('Discount');
                    var VORDDAT = $(this).attr('ORDDAT');
                    var VLineNote = $(this).attr('LineNote');
                    var Ordertype = $('#Ordertype_ID').val();
                    var AmtQty = $('#bQty').val();
                    var AmtSalePrices = $('#bAmtSalePrices').val();
                    var TotalAmt = $("#bAmt").val();
                    var DiscountAmt = $("#bdicAmt").val();
                    var Credit = $("#dCredit").val();
                    var AmtSalePrices = $("#bAmtSalePrices").val();
                    var Ordertype = $("#Ordertype_ID").val();
                    var ItemList = {
                        VQty: VQty,
                        VSTKCOD: VSTKCOD,
                        VSTKDES: VSTKDES,
                        VSTKGRP: VSTKGRP,
                        VPrice: VPrice,
                        VSalePrice: VSalePrice,
                        VDiscount: VDiscount,
                        VAmt: VAmt,
                        VORDDAT: VORDDAT,
                        VLineNote: VLineNote,
                        Ordertype: Ordertype,
                        AmtQty: AmtQty,
                        AmtSalePrices: AmtSalePrices,
                        TotalAmt: TotalAmt,
                        Credit: Credit,
                        AmtSalePrices: AmtSalePrices,
                        AmtDiscount: DiscountAmt,
                        Ordertype: Ordertype,
                        PRCLST_NO: PRCLST_NO,
                        Uom: Uom
                    };
                    data.push(ItemList);
                    // //console.log(JSON.stringify(data));
                });
                if (data.length == 0) {
                    $("#textAlertWarning").empty();
                    $("#textAlertWarning").text("กรุณาเลือกสินค้าเพื่อ Confirm order");
                    $("#myModalWarning").modal();
                    // $("#dCredit").val("0");
                    $('#Ordertype_ID').val("0");
                    return false;
                }


            });
            GetQuatationNo()
            function GetQuatationNo() {
                //  var Valqono = $('#xqno').val();
                var CUSCOD = cuscod;
                $.ajax({
                    url: '@Url.Action("GetQuatationno", "Cart")',
                    data: {
                        CUSCOD: CUSCOD
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        var select = $('#qpono');

                        select.children().remove();

                        select.append($("<option>").val("0").text("เลือกQuotation No"));

                        $(data).each(function (index, item) {
                            select.append($("<option>").val(item.QuatationNo).text(item.QuatationNo + "|" + "TotalAmt:" + item.Detail));
                        });
                    }
                });
            }
            $('#qpono').change(function () {
                var no=   $(this).val();
                CheckCusQuatation(no);
                //var xQuatation = $('#qpono').val();
                //if (xQuatation != '0') {
                //    GetCusQuatation(xQuatation);
                //} else {
                //    $("#btnseach").trigger("click");
                //}

            });

            $('#btnsubmitinsert').click(function () {
                if (navigator.onLine) {
                    var data = new Array();
                    //var chkcusnull = $("#CustomerShipping").val();
                    var CusShipping = $('#CustomerShipping').val();
                    var codeShipping = $('#codeShipping').val();
                    var codetransportation = $('#codetransportation').val();
                    var Modtype = $("#Modtype_ID").val();
                    if (Modtype == "ALL") {
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("กรุณาเลือก Delivery Mode ");
                        $("#myModalWarning").modal(); return false;
                    }

                    var Moddate = $("#ModdatepickerStart").val();
                    var Modtime = $("#Modtime").val();
                    var Ordertype = $("#Ordertype_ID").val();
                    console.log("Ordertype = " + Ordertype);
                    //return false;
                    if (Ordertype == "0") {
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("กรุณาเลือก Type ส่งสินค้า ");
                        $("#myModalWarning").modal(); return false;
                    }

                    var dateDelivery = $("#datepickerStart").val();
                    if (Ordertype == "S") {
                        if (dateDelivery == "") {
                            $("#textAlertWarning").empty();
                            $("#textAlertWarning").text("กรุณาระบุวันที่ส่งสินค้า");
                            $("#myModalWarning").modal(); return false;
                        }
                    }
                    var DeliveryTime = $("#time").val();
                    var Credit = $("#dCredit").val();
                    //var CreditTerm = $("#CreditTerm").val();
                    var CreditTerm = "";
                    var CusPo = $("#CusPo").val();
                    var CommentByOrder = $("#CommentByOrder").val();
                    $('#exampletb tr').find('input[type="checkbox"]:checked').each(function () {

                        var idorder = $(this).attr('cartid');
                        //var VQty = $(this).attr('Qty');
                        var VQty = $(this).closest('tr').find('.tQty').val();

                        var PRCLST_NO = $(this).attr('PRCLST_NO');
                        var Uom = $(this).attr('Uom');
                        var Vstock = $(this).attr('instock');
                        // var Vbackorder = $(this).attr('Backorderqty');
                        var Vbackorder = $(this).closest('tr').find('.tbck').html().replace(',', '').replace(' ', '');
                        var Vtype = $(this).attr('itype');
                        var VSTKCOD = $(this).attr('STKCOD');
                        var VCompany = $(this).attr('Company');
                        //var VCompany = $("#company").val();
                        var VSTKGRP = $(this).attr('stkgrp');
                        var VSTKDES = $(this).attr('stkdes');
                        var VPrice = $(this).attr('Price');
                        var VSalePrice = "";
                        VSalePrice = $(this).attr('SalePrice');
                        VSalePrice = VSalePrice.replace(/,/g, "");

                        //var VAmt = "";
                        //VAmt = $(this).attr('Amt');
                        //VAmt = VAmt.replace(/,/g, "");
                        var VAmt = $(this).closest('tr').find('.tQty').val() * $(this).attr('SalePrice');
                        var VDiscount = "";
                        VDiscount = $(this).attr('Discount');
                        VDiscount = VDiscount.replace(",", "");
                        var VORDDAT = $(this).attr('ORDDAT');
                        var VLineNote = $(this).attr('LineNote');
                        var Ordertype = $('#Ordertype_ID').val();
                        var AmtQty = $('#bQty').val();
                        var WHLocation = $(this).attr('wlo');
                        var AmtSalePrices = "";
                        AmtSalePrices = $('#bAmtSalePrices').val();
                        AmtSalePrices = AmtSalePrices.replace(/,/g, "");

                        var TotalAmt = "";
                        TotalAmt = $("#bAmt").val();
                        TotalAmt = TotalAmt.replace(/,/g, "");
                        var DiscountAmt = "";
                        DiscountAmt = $("#bdicAmt").val();
                        DiscountAmt = DiscountAmt.replace(/,/g, "");
                        var Credit = $("#dCredit").val();

                        var AmtSalePrices = "";
                        AmtSalePrices = $("#bAmtSalePrices").val();
                        AmtSalePrices = AmtSalePrices.replace(/,/g, "");
                        var VPromotion = $(this).attr('promotion');
                        var Ordertype = $("#Ordertype_ID").val();


                        var ItemList = {
                            Vidorder: idorder,
                            VQty: VQty,
                            VSTKCOD: VSTKCOD,
                            VCompany: VCompany,
                            VSTKDES: VSTKDES,
                            VSTKGRP: VSTKGRP,
                            VPrice: VPrice,
                            VSalePrice: VSalePrice,
                            VDiscount: VDiscount,
                            VAmt: VAmt,
                            VORDDAT: VORDDAT,
                            VLineNote: VLineNote,
                            Ordertype: Ordertype,
                            AmtQty: AmtQty,
                            AmtSalePrices: AmtSalePrices,
                            TotalAmt: TotalAmt,
                            Credit: Credit,
                            AmtSalePrices: AmtSalePrices,
                            AmtDiscount: DiscountAmt,
                            Ordertype: Ordertype,
                            PRCLST_NO: PRCLST_NO,
                            Uom: Uom,
                            Vstock: Vstock,
                            Vtype: Vtype,
                            VPromotion: VPromotion,
                            Vbackorder: Vbackorder,
                            VWHLocation: WHLocation
                            // SLMID:SLMID

                        };
                        if (ItemList.VQty != "0") {
                            data.push(ItemList);
                        }

                        console.log(JSON.stringify(data));
                       // return false;


                    });
                    //if (data.length > 0) {
                    //    if (usertype == "6") {
                    //        var checkamt = data[0].AmtSalePrices;

                    //        // if (Ordertype == "MOT") {
                    //        if (Modtype == "MOT") {
                    //            if (parseFloat(checkamt) < parseFloat(4000)) {
                    //                $("#textAlertnextshopping").empty();
                    //                $("#textAlertnextshopping").text("ซื้อสินค้าครบ 4,000 ขึ้นไป ฟรีค่าขนส่งมอเตอร์ไซค์");
                    //                $("#confirm-nextshopping").modal();

                    //            }
                    //        }
                    //    }
                    //}
                    if (data.length == 0) {
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("กรุณาเลือกสินค้าเพื่อ Confirm order");
                        $("#myModalWarning").modal(); return false;
                    }
                    //APS//
                    //var MyRowsShipp = $('#Shipping').find('tbody').find('tr').length;
                    ////alert(MyRowsShipp)
                    //if (MyRowsShipp != "0") {
                    //    var chkcusnull = $("#CustomerShipping").val();
                    //    if (chkcusnull == "") {

                    //        $("#confirm-Shipto").modal();

                    //        return false;
                    //    }
                    //}

                    var DataSend = JSON.stringify(data);

                    var sumvat = "";
                    sumvat = $("#bvat").val();
                    var sumqty = $("#bQty").val();
                    var sumstk = $("#bQtystk").val();
                    if (sumvat == "0.00") {

                        sumvat = "0.00"

                    } else {
                        sumvat = sumvat.replace(/,/g, "");
                    }

                    var sumpro = "0.00";
                    var ORD_TotalPrice = "";
                    // ORD_TotalPrice = $("#bAmt").val();
                    ORD_TotalPrice = $("#bAmtSalePrices").val();

                    if (ORD_TotalPrice == "0.00") {
                        ORD_TotalPrice = "0.00"
                    } else {
                        ORD_TotalPrice = ORD_TotalPrice.replace(/,/g, ""); //รวม vat แล้ว
                    }
                    //alert(ORD_TotalPrice)
                    //return false;
                    //////ส่วนลด////
                    //var ORD_TotalDiscount = "";
                    //// ORD_TotalDiscount = $("#Msumbedisprice").html();
                    //ORD_TotalDiscount = $("#sumdiscountprice").val();
                    //if (ORD_TotalDiscount == "0.00") {

                    //    ORD_TotalDiscount = "0.00"

                    //} else {
                    //    ORD_TotalDiscount = ORD_TotalDiscount.replace(/,/g, "");
                    //}
                    ///////////////////////////// คำนวณส่วนลดท้ายบิล  /////////////////////////////
                    var amtDiscountendofbill = 0;
                    var amtaftercalendofbill = 0;
                    var valcal = $("#discon").val(); ///หน่วย บาทหรือ%
                    var valdis = $("#inputdis").val(); ///ราคาส่วนลดท้ายบิล
                    if (valdis == "") { valdis = "0"; }
                    //var typecke = $("input[name='vehicle']:checked").val();  //ส่วนลด =1
                    var typecke;
                    var ORD_TotalDiscount = "";
                    var chkvehicle = $("input[name='vehicle']:checked").val() ? true : false
                    // alert(chkvehicle)
                    if ($("input[name='vehicle']:checked").val() ? true : false == true) {
                        typecke = "1"

                    } else if ($("input[name='vehicle']:checked").val() ? true : false == false) { typecke = "0" }

                    if (typecke == "1") {//คำนวณส่วนลดท้ายบิล
                        ORD_TotalDiscount = $("#sumdiscountprice").val();
                        ORD_TotalDiscount = ORD_TotalDiscount.replace(/,/g, "");
                        if (ORD_TotalDiscount == "0.00") {
                            typecke = "0";
                        } else {
                            typecke == "1";
                        }
                    } else if (typecke == "0") {

                        ORD_TotalDiscount = "0.00";

                    }

                    ///////////////////////////// คำนวณส่วนลดท้ายบิล  /////////////////////////////
                    ///////////////////////////// คำนวณค่าแรง /////////////////////////////
                    var amtlabor = 0;
                    var amtaftercallabor = 0;
                    var valcallabor = $("#disconlabor").val();///หน่วย บาทหรือ%
                    var valdislabor = $("#inputlabor").val();///ราคาค่าแรง
                    var totallabor;
                    if (valdislabor == "") { valdislabor = "0"; }
                    var vehiclelabor;

                    //var typeckelabor = $("input[name='vehiclelabor']:checked").val(); //ค่าแรง =2
                    if ($("input[name='vehiclelabor']:checked").val() ? true : false == true) {
                        typeckelabor = "2"

                    } else if ($("input[name='vehiclelabor']:checked").val() ? true : false == false) { typeckelabor = "0" }


                    if (typeckelabor == "2") {//คำนวณค่าแรง
                        totallabor = $("#sumdiscountpricelabor").val();
                        totallabor = totallabor.replace(/,/g, "");
                    } else if (typeckelabor == "0") {
                        totallabor = "0.00";
                    }
                    //alert("ส่วดลดท้ายบิล:" + ORD_TotalDiscount)
                    ///////////////////////////// คำนวณค่าแรง  /////////////////////////////
                    // alert("ค่าแรง:" + totallabor)
                    //var totaltransportcost = "0.00";
                    //$("#btnChk").trigger('click');
                    //$("#myModalsummary").modal();
                    //return false;
                    var totaltransportcost = "0.00";


                    $.ajax({
                        url: '@Url.Action("ConfirmationdataTemp", "Cart")',
                        data: {
                            DataSend: DataSend,
                            //DataSendPro: "",
                            sumvat: sumvat,
                            sumpro: sumpro,
                            sumqty: sumqty,
                            sumstk: sumstk,
                            ORD_TotalPrice: ORD_TotalPrice,
                            ORD_TotalDiscount: ORD_TotalDiscount,
                            dateDelivery: dateDelivery,
                            DeliveryTime: DeliveryTime,
                            Remark: CommentByOrder,
                            takeorderby: userid,
                            Xcus: cuscod,
                            //XSul: XXSul,
                            XSul: "",
                            Xusrlogin: userid,
                            Modtype: Modtype,
                            Moddate: Moddate,
                            Modtime: Modtime,
                            CusShipping: CusShipping,
                            codeShipping: codeShipping,
                            codetransportation: codetransportation,
                            // CreditTerm: CreditTerm,
                            CreditTerm: "0",
                            CusPo: CusPo,
                            typecke: typecke,
                            totallabor: totallabor,
                            totaltransportcost: totaltransportcost
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            //console.log(data);
                            if (data.message == "true") {
                                //$("#textAlertSucces").empty();
                                //$("#textAlertSucces").text(data.Err_Message);
                                // $("#myModalSucces").modal();
                                var err_F = data.Err_Flg;

                                // if (err_F == "0" || err_F == "") {
                                $("#textProcheck").empty();
                                $("#textProcheck").text(data.Err_Message);
                                $("#PremiumPrice").val(commaSeparateNumber(data.Prodiscount));
                                $("#btnChk").trigger('click');
                                $("#myModalsummary").modal();
                                // } else {
                                //$("#textAlert").empty();
                                //$("#textAlert").text(data.Err_Message);
                                //$("#myModal").modal();
                                //return false;
                                // }
                                $("#ordidtemp").val(data.id);
                            } else {
                                $("#textAlert").empty();
                                $("#textAlert").text("บันทึกข้อมูลไม่สำเร็จกรุณาทำรายการใหม่ " + data.message);
                                $("#myModal").modal();
                            }
                        }
                    });
                } else {
                    alert('Not connect to network...');
                    return false;
                }
            });//
            $(document).delegate('#confirm-nextshopping', 'click', function () {
                G_Delivertmode();
                //$("#confirm-nextshopping").modal('show');
            });
            $(document).delegate('#btncancelnextshopping', 'click', function () {
                G_Delivertmode();
                $("#confirm-nextshopping").modal('hide');
            });
            $(document).delegate('#btnnextshopping', 'click', function () {
                window.location.replace("../Orderlist/Index?numcuber=" + btoa(cuscod));
            });
            $(document).delegate('#btncancelShipto', 'click', function () {
                if (navigator.onLine) {
                    var data = new Array();

                    //var chkcusnull = $("#CustomerShipping").val();



                    var CusShipping = $('#CustomerShipping').val();
                    var codeShipping = $('#codeShipping').val();
                    var codetransportation = $('#codetransportation').val();
                    var Modtype = $("#Modtype_ID").val();
                    if (Modtype == "ALL") {
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("กรุณาเลือก Delivery Mode ");
                        $("#myModalWarning").modal(); return false;
                    }

                    var Moddate = $("#ModdatepickerStart").val();
                    var Modtime = $("#Modtime").val();
                    var Ordertype = $("#Ordertype_ID").val();
                    if (Ordertype == "0") {
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("กรุณาเลือก Type ส่งสินค้า ");
                        $("#myModalWarning").modal(); return false;
                    }

                    var dateDelivery = $("#datepickerStart").val();
                    var DeliveryTime = $("#time").val();
                    var Credit = $("#dCredit").val();
                    //var CreditTerm = $("#CreditTerm").val();
                    var CreditTerm = "";
                    var CusPo = $("#CusPo").val();
                    var CommentByOrder = $("#CommentByOrder").val();
                    $('#exampletb tr').find('input[type="checkbox"]:checked').each(function () {

                        var idorder = $(this).attr('cartid');
                        //var VQty = $(this).attr('Qty');
                        var VQty = $(this).closest('tr').find('.tQty').val()
                        var PRCLST_NO = $(this).attr('PRCLST_NO');
                        var Uom = $(this).attr('Uom');
                        var Vstock = $(this).attr('instock');
                        // var Vbackorder = $(this).attr('Backorderqty');
                        var Vbackorder = $(this).closest('tr').find('.tbck').html().replace(',', '').replace(' ', '');

                        var Vtype = $(this).attr('itype');
                        var VSTKCOD = $(this).attr('STKCOD');
                        var VCompany = $(this).attr('Company');
                        var VSTKGRP = $(this).attr('stkgrp');
                        var VSTKDES = $(this).attr('stkdes');
                        var VPrice = $(this).attr('Price');
                        var VSalePrice = "";
                        VSalePrice = $(this).attr('SalePrice');
                        VSalePrice = VSalePrice.replace(/,/g, "");

                        //var VAmt = "";
                        //VAmt = $(this).attr('Amt');
                        //VAmt = VAmt.replace(/,/g, "");
                        var VAmt = $(this).closest('tr').find('.tQty').val() * $(this).attr('SalePrice');
                        var VDiscount = "";
                        VDiscount = $(this).attr('Discount');
                        VDiscount = VDiscount.replace(",", "");
                        var VORDDAT = $(this).attr('ORDDAT');
                        var VLineNote = $(this).attr('LineNote');
                        var Ordertype = $('#Ordertype_ID').val();
                        var AmtQty = $('#bQty').val();

                        var AmtSalePrices = "";
                        AmtSalePrices = $('#bAmtSalePrices').val();
                        AmtSalePrices = AmtSalePrices.replace(/,/g, "");

                        var TotalAmt = "";
                        TotalAmt = $("#bAmt").val();
                        TotalAmt = TotalAmt.replace(/,/g, "");
                        var DiscountAmt = "";
                        DiscountAmt = $("#bdicAmt").val();
                        DiscountAmt = DiscountAmt.replace(/,/g, "");
                        var Credit = $("#dCredit option:selected").val();

                        var AmtSalePrices = "";
                        AmtSalePrices = $("#bAmtSalePrices").val();
                        AmtSalePrices = AmtSalePrices.replace(/,/g, "");
                        var VPromotion = $(this).attr('promotion');
                        var Ordertype = $("#Ordertype_ID").val();

                        var ItemList = {
                            Vidorder: idorder,
                            VQty: VQty,
                            VSTKCOD: VSTKCOD,
                            VCompany: VCompany,
                            VSTKDES: VSTKDES,
                            VSTKGRP: VSTKGRP,
                            VPrice: VPrice,
                            VSalePrice: VSalePrice,
                            VDiscount: VDiscount,
                            VAmt: VAmt,
                            VORDDAT: VORDDAT,
                            VLineNote: VLineNote,
                            Ordertype: Ordertype,
                            AmtQty: AmtQty,
                            AmtSalePrices: AmtSalePrices,
                            TotalAmt: TotalAmt,
                            Credit: Credit,
                            AmtSalePrices: AmtSalePrices,
                            AmtDiscount: DiscountAmt,
                            Ordertype: Ordertype,
                            PRCLST_NO: PRCLST_NO,
                            Uom: Uom,
                            Vstock: Vstock,
                            Vtype: Vtype,
                            VPromotion: VPromotion,
                            Vbackorder: Vbackorder
                            // SLMID:SLMID

                        };
                        if (ItemList.VQty != "0") {
                            data.push(ItemList);
                        }
                        //console.log(JSON.stringify(data));
                    });


                    if (data.length == 0) {
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("กรุณาเลือกสินค้าเพื่อ Confirm order");
                        $("#myModalWarning").modal(); return false;
                    }
                    var MyRowsShipp = $('#Shipping').find('tbody').find('tr').length;
                    ////alert(MyRowsShipp)
                    //if (MyRowsShipp != "0") {
                    //    var chkcusnull = $("#CustomerShipping").val();
                    //    if (chkcusnull == "") {

                    //        $("#confirm-Shipto").modal();

                    //        return false;
                    //    }
                    //}

                    var DataSend = JSON.stringify(data);

                    var sumvat = "";
                    sumvat = $("#bvat").val();
                    var sumqty = $("#bQty").val();
                    var sumstk = $("#bQtystk").val();
                    if (sumvat == "0.00") {

                        sumvat = "0.00"

                    } else {
                        sumvat = sumvat.replace(/,/g, "");
                    }

                    var sumpro = "0.00";
                    var ORD_TotalPrice = "";
                    // ORD_TotalPrice = $("#bAmt").val();
                    ORD_TotalPrice = $("#bAmtSalePrices").val();

                    if (ORD_TotalPrice == "0.00") {
                        ORD_TotalPrice = "0.00"
                    } else {
                        ORD_TotalPrice = ORD_TotalPrice.replace(/,/g, ""); //รวม vat แล้ว
                    }
                    //alert(ORD_TotalPrice)
                    //return false;
                    //////ส่วนลด////
                    //var ORD_TotalDiscount = "";
                    //// ORD_TotalDiscount = $("#Msumbedisprice").html();
                    //ORD_TotalDiscount = $("#sumdiscountprice").val();
                    //if (ORD_TotalDiscount == "0.00") {

                    //    ORD_TotalDiscount = "0.00"

                    //} else {
                    //    ORD_TotalDiscount = ORD_TotalDiscount.replace(/,/g, "");
                    //}
                    ///////////////////////////// คำนวณส่วนลดท้ายบิล  /////////////////////////////
                    var amtDiscountendofbill = 0;
                    var amtaftercalendofbill = 0;
                    var valcal = $("#discon").val(); ///หน่วย บาทหรือ%
                    var valdis = $("#inputdis").val(); ///ราคาส่วนลดท้ายบิล
                    if (valdis == "") { valdis = "0"; }
                    //var typecke = $("input[name='vehicle']:checked").val();  //ส่วนลด =1
                    var typecke;
                    var ORD_TotalDiscount = "";
                    var chkvehicle = $("input[name='vehicle']:checked").val() ? true : false
                    // alert(chkvehicle)
                    if ($("input[name='vehicle']:checked").val() ? true : false == true) {
                        typecke = "1"

                    } else if ($("input[name='vehicle']:checked").val() ? true : false == false) { typecke = "0" }

                    if (typecke == "1") {//คำนวณส่วนลดท้ายบิล
                        ORD_TotalDiscount = $("#sumdiscountprice").val();
                        ORD_TotalDiscount = ORD_TotalDiscount.replace(/,/g, "");
                        if (ORD_TotalDiscount == "0.00") {
                            typecke = "0";
                        } else {
                            typecke == "1";
                        }
                    } else if (typecke == "0") {

                        ORD_TotalDiscount = "0.00";

                    }

                    ///////////////////////////// คำนวณส่วนลดท้ายบิล  /////////////////////////////
                    ///////////////////////////// คำนวณค่าแรง /////////////////////////////
                    var amtlabor = 0;
                    var amtaftercallabor = 0;
                    var valcallabor = $("#disconlabor").val();///หน่วย บาทหรือ%
                    var valdislabor = $("#inputlabor").val();///ราคาค่าแรง
                    var totallabor;
                    if (valdislabor == "") { valdislabor = "0"; }
                    var vehiclelabor;

                    //var typeckelabor = $("input[name='vehiclelabor']:checked").val(); //ค่าแรง =2
                    if ($("input[name='vehiclelabor']:checked").val() ? true : false == true) {
                        typeckelabor = "2"

                    } else if ($("input[name='vehiclelabor']:checked").val() ? true : false == false) { typeckelabor = "0" }


                    if (typeckelabor == "2") {//คำนวณค่าแรง
                        totallabor = $("#sumdiscountpricelabor").val();
                        totallabor = totallabor.replace(/,/g, "");
                    } else if (typeckelabor == "0") {
                        totallabor = "0.00";
                    }
                    //alert("ส่วดลดท้ายบิล:" + ORD_TotalDiscount)
                    ///////////////////////////// คำนวณค่าแรง  /////////////////////////////
                    // alert("ค่าแรง:" + totallabor)
                    //var totaltransportcost = "0.00";
                    //$("#btnChk").trigger('click');
                    //$("#myModalsummary").modal();
                    //return false;
                    var totaltransportcost = "0.00";


                    $.ajax({
                        url: '@Url.Action("ConfirmationdataTemp", "Cart")',
                        data: {
                            DataSend: DataSend,
                            //DataSendPro: "",
                            sumvat: sumvat,
                            sumpro: sumpro,
                            sumqty: sumqty,
                            sumstk: sumstk,
                            ORD_TotalPrice: ORD_TotalPrice,
                            ORD_TotalDiscount: ORD_TotalDiscount,
                            dateDelivery: dateDelivery,
                            DeliveryTime: DeliveryTime,
                            Remark: CommentByOrder,
                            takeorderby: userid,
                            Xcus: cuscod,
                            //XSul: XXSul,
                            XSul: "",
                            Xusrlogin: userid,
                            Modtype: Modtype,
                            Moddate: Moddate,
                            Modtime: Modtime,
                            CusShipping: CusShipping,
                            codeShipping: codeShipping,
                            codetransportation: codetransportation,
                            // CreditTerm: CreditTerm,
                            CreditTerm: "0",
                            CusPo: CusPo,
                            typecke: typecke,
                            totallabor: totallabor,
                            totaltransportcost: totaltransportcost
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            //console.log(data);
                            if (data.message == "true") {
                                //$("#textAlertSucces").empty();
                                //$("#textAlertSucces").text(data.Err_Message);
                                // $("#myModalSucces").modal();
                                var err_F = data.Err_Flg;

                                // if (err_F == "0" || err_F == "") {
                                $("#textProcheck").empty();
                                $("#textProcheck").text(data.Err_Message);
                                $("#PremiumPrice").val(commaSeparateNumber(data.Prodiscount));
                                $("#btnChk").trigger('click');
                                $("#myModalsummary").modal();
                                // } else {
                                //$("#textAlert").empty();
                                //$("#textAlert").text(data.Err_Message);
                                //$("#myModal").modal();
                                //return false;
                                // }
                                $("#ordidtemp").val(data.id);
                            } else {
                                $("#textAlert").empty();
                                $("#textAlert").text("บันทึกข้อมูลไม่สำเร็จกรุณาทำรายการใหม่ " + data.message);
                                $("#myModal").modal();
                            }
                        }
                    });
                } else {
                    alert('Not connect to network...');
                    return false;
                }
            });
            $(document).delegate('#btnnext', 'click', function () {
                //$('#ClickShipping').trigger("click");
            });
            $(document).delegate('#btnsubmitinsertquote', 'click', function () {
                var rowBckorder = 0;
                if (navigator.onLine) {

                    var company = $('#company').val();
                    var XXcus = cuscod;
                    var XXSul = ''
                    var XXusrlogin = userid;
                    var CommentByOrder = $("#CommentByOrder").val();
                    var takeorderby = userid
                    var Modtype = $("#Modtype_ID").val();
                    var Ordertype = $("#Ordertype_ID").val();
                    var dateDelivery = $("#datepickerStart").val();

                    if (Modtype == "ALL") {
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("กรุณาเลือก Mode of Delivery(Area) ");
                        $("#myModalWarning").modal(); return false;
                    }
                    if (Ordertype == "0") {
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("กรุณาเลือก Type ส่งสินค้า ");
                        $("#myModalWarning").modal(); return false;
                    }
                    if (Ordertype == "S") {
                        $("#datepickerStart").attr("disabled", false);
                        if (dateDelivery == "") {
                            // $("#datepickerStart").("dis")
                            $("#textAlertWarning").empty();
                            $("#textAlertWarning").text("กรุณาระบุ  วันที่ส่งสินค้า");
                            $("#myModalWarning").modal(); return false;
                        }
                    }
                    if (Ordertype == "RS") {
                        $("#datepickerStart").attr("disabled", false);
                        if (dateDelivery == "") {
                            $("#textAlertWarning").empty();
                            $("#textAlertWarning").text("กรุณาระบุ  วันที่ส่งสินค้า");
                            $("#myModalWarning").modal(); return false;
                        }
                    }
                    var chkcusnull = $("#CustomerShipping").val();
                    var MyRowsShipp = $('#Shipping').find('tbody').find('tr').length;
                    var Moddate = $("#ModdatepickerStart").val();
                    var Modtime = $("#Modtime").val();
                    var CusShipping = $('#CustomerShipping').val();
                    var codeShipping = $('#codeShipping').val();
                    var codetransportation = $('#codetransportation').val();
                    var DeliveryTime = $("#time").val();
                    var Credit = $("#dCredit").val();
                    var CreditTerm = $("#CreditTerm").val();
                    var CusPo = $("#CusPo").val();
                    var res = "";
                    var chk = "";
                    var dataPro = new Array();
                    var data = new Array();
                    var MyRows = $('#example1').find('tbody').find('tr');
                    console.log(MyRows);
                    for (var i = 0; i < MyRows.length; i++) {
                        chk = $(MyRows[i]).find('input[type="checkbox"]:checked').attr('value');
                        if (chk !== undefined) {
                            chk = chk;
                        } else {
                            chk = "0";
                        }
                        // //console.log(chk);
                        var MyIndexValueStock = $(MyRows[i]).find('td  #stock' + (i + 1) + '').val();
                        if (MyIndexValueStock !== undefined) {
                            res = MyIndexValueStock.split("|");
                        } else { res[0] = ""; }
                        var MyIndexValueQty = "";
                        MyIndexValueQty = $(MyRows[i]).find('td  #qty' + (i + 1) + '').val();
                        if (MyIndexValueQty != "") {
                            MyIndexValueQty = $(MyRows[i]).find('td  #qty' + (i + 1) + '').val();
                        } else {

                            MyIndexValueQty = "0"
                        }
                        var MyIndexValueLinenote = $(MyRows[i]).find('td  #remark' + (i + 1) + '').val();
                        var MyIndexValueUOM = $(MyRows[i]).find('td  #uom' + (i + 1) + '').val();
                        var ItemListPro = {
                            chk: chk,
                            VQty: MyIndexValueQty,
                            VSTKCOD: res[0],
                            VCompany: company,
                            VLineNote: MyIndexValueLinenote,
                            Uom: MyIndexValueUOM
                        };
                        var cPRo = "";
                        var ch = "";
                        cPRo = ItemListPro.VSTKCOD;
                        if (cPRo != "") {
                            ////console.log(cPRo);
                            dataPro.push(ItemListPro);
                            ////console.log(JSON.stringify(dataPro));
                        }
                    }
                    var DataSendPro = JSON.stringify(dataPro);
                    // //console.log('xxbbb' + " " + DataSendPro)
                    $('#exampletb tr').find('input[type="checkbox"]:checked').each(function (e) {
                        console.log("checkbox");
                        var GenID = $(this).attr('GenID');
                        var idorder = $(this).attr('cartid');
                        //var VQty = $(this).attr('Qty');
                        var PRCLST_NO = $(this).attr('PRCLST_NO');
                        var Uom = $(this).attr('Uom');
                        var Vstock = $(this).attr('instock');
                        //var Vbackorder = $(this).attr('Backorderqty');
                        var Vbackorder = $(this).closest('tr').find('.tbck').html().replace(',', '').replace(' ', '');

                        var Vtype = $(this).attr('itype');
                        var VSTKCOD = $(this).attr('STKCOD');
                        var VCompany = $(this).attr('Company');
                        var VSTKGRP = $(this).attr('stkgrp');
                        var VSTKDES = $(this).attr('stkdes');
                        var VPrice = $(this).attr('Price');
                        var VSalePrice = "";
                        VSalePrice = $(this).attr('SalePrice');
                        VSalePrice = VSalePrice.replace(/,/g, "");

                        var VAmt = "";
                        VAmt = $(this).attr('Amt');
                        VAmt = VAmt.replace(/,/g, "");
                        var VDiscount = "";
                        VDiscount = $(this).attr('Discount');
                        VDiscount = VDiscount.replace(",", "");
                        var VORDDAT = $(this).attr('ORDDAT');
                        var VLineNote = $(this).attr('LineNote');
                        var Ordertype = $('#Ordertype_ID').val();
                        var AmtQty = $('#bQty').val();
                        var VQty = $(this).closest('tr').find('.tQty').val();

                        var AmtSalePrices = "";
                        AmtSalePrices = $('#bAmtSalePrices').val();
                        AmtSalePrices = AmtSalePrices.replace(/,/g, "");

                        var TotalAmt = "";
                        TotalAmt = $("#bAmt").val();
                        TotalAmt = TotalAmt.replace(/,/g, "");
                        var DiscountAmt = "";
                        DiscountAmt = $("#bdicAmt").val();
                        DiscountAmt = DiscountAmt.replace(/,/g, "");
                        var Credit = $("#dCredit").val();

                        var AmtSalePrices = "";
                        AmtSalePrices = $("#bAmtSalePrices").val();
                        AmtSalePrices = AmtSalePrices.replace(/,/g, "");
                        var VPromotion = $(this).attr('promotion');
                        var Ordertype = $("#Ordertype_ID").val();
                        //ถ้าเป็น backOrder ไม่ออก quotation
                        if (!VLineNote.includes("BckOrd")) {
                            //console.log("VLineNote = " + VLineNote);
                            var ItemList = {
                                VGenID: GenID,
                                Vidorder: idorder,
                                VQty: VQty,
                                VSTKCOD: VSTKCOD,
                                VCompany: VCompany,
                                VSTKDES: VSTKDES,
                                VSTKGRP: VSTKGRP,
                                VPrice: VPrice,
                                VSalePrice: VSalePrice,
                                VDiscount: VDiscount,
                                VAmt: VAmt,
                                VORDDAT: VORDDAT,
                                VLineNote: VLineNote,
                                Ordertype: Ordertype,
                                AmtQty: AmtQty,
                                AmtSalePrices: AmtSalePrices,
                                TotalAmt: TotalAmt,
                                Credit: Credit,
                                AmtSalePrices: AmtSalePrices,
                                AmtDiscount: DiscountAmt,
                                Ordertype: Ordertype,
                                PRCLST_NO: PRCLST_NO,
                                Uom: Uom,
                                Vstock: Vstock,
                                Vtype: Vtype,
                                VPromotion: VPromotion,
                                Vbackorder: Vbackorder

                                // SLMID:SLMID

                            };
                            data.push(ItemList);
                        } else {
                            rowBckorder = 1;
                        }

                        console.log("Quolist = " + JSON.stringify(data));
                        //return false;
                    });

                    var _ckq = $('#Ckquote').val();
                    var _QNo;
                    _QNo = $('#qpono').val();
                    if (_QNo == "0") {
                        _QNo = "";
                    }
                    if (rowBckorder > 0) {
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("รายการ BackOrder ไม่สามารถออก Quotation ได้");
                        $("#myModalWarning").modal(); return false;
                    }
                    if (data.length == 0) {
                        $("#textAlertWarning").empty();
                        $("#textAlertWarning").text("กรุณาเลือกสินค้าเพื่อ Confirm order");
                        $("#myModalWarning").modal(); return false;
                    }
                    var DataSend = JSON.stringify(data);
                    //console.log('DataSend' + " " + DataSend)
                    //return false;
                    var sumvat = "";
                    sumvat = $("#sumvat").html();
                    var sumqty = $("#sumqty").html();
                    var sumstk = $("#sumstk").html();
                    if (sumvat == "0.00") {

                        sumvat = "0.00"

                    } else {
                        sumvat = sumvat.replace(/,/g, "");
                    }

                    var sumpro = "0.00";
                    var ORD_TotalPrice = "";
                    // ORD_TotalPrice = $("#TotalAmt").html();
                    ORD_TotalPrice = $("#bAmtSalePrices").val();
                    if (ORD_TotalPrice == "0.00") {
                        ORD_TotalPrice = "0.00"
                    } else {
                        ORD_TotalPrice = ORD_TotalPrice.replace(/,/g, "");
                    }
                    ////ส่วนลด////
                    var ORD_TotalDiscount = "";
                    var typecke = "";
                    // ORD_TotalDiscount = $("#Msumbedisprice").html();
                    ORD_TotalDiscount = $("#sumdiscountprice").val();
                    if (ORD_TotalDiscount == "0.00") {

                        ORD_TotalDiscount = "0.00"
                        typecke = "0";
                    } else {
                        ORD_TotalDiscount = ORD_TotalDiscount.replace(/,/g, "");
                        typecke = $("input[name='vehicle']:checked").val();
                    }
                    //ส่วนลดพิเศษ//
                    var Ts_dis = $("#discon").val();
                    var S_dis = "";
                    S_dis = $("#inputdis").val();
                    if (S_dis != '') {
                        S_dis = $("#inputdis").val();
                    } else {
                        S_dis = "0.00"
                    }

                    $.ajax({
                        url: '@Url.Action("ConfirmationdatacusQuatation", "Cart")',
                        data: {
                            DataSend: DataSend,
                            DataSendPro: DataSendPro,
                            sumvat: sumvat,
                            sumpro: sumpro,
                            sumqty: sumqty,
                            sumstk: sumstk,
                            ORD_TotalPrice: ORD_TotalPrice,
                            ORD_TotalDiscount: ORD_TotalDiscount,
                            dateDelivery: dateDelivery,
                            DeliveryTime: DeliveryTime,
                            Remark: CommentByOrder,
                            takeorderby: takeorderby,
                            Xcus: XXcus,
                            XSul: XXSul,
                            Xusrlogin: XXusrlogin,
                            Modtype: Modtype,
                            Moddate: Moddate,
                            Modtime: Modtime,
                            CusShipping: CusShipping,
                            codeShipping: codeShipping,
                            codetransportation: codetransportation,
                            CreditTerm: CreditTerm,
                            CusPo: CusPo,
                            S_dis: S_dis,
                            Ts_dis: Ts_dis,
                            QNo: _QNo,
                            typecke: typecke

                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            // //console.log(data);
                            if (data.message == "true") {
                                //var url = window.location.href;
                                //var str = url;
                                //var res = str.split("/");
                                //return false;
                                // //console.log(XXcus);


                                var wi = window.open("../Report/QuotationForm.aspx?QuotationNUM=" + data.GenDoc_Quatation + "/" + XXcus);
                                wi.focus();
                                $("#exampletb > tbody").empty();

                                location.reload();
                            } else {
                                $("#textAlert").empty();
                                $("#textAlert").text("บันทึกข้อมูลไม่สำเร็จกรุณาทำรายการใหม่ " + data.message);
                                $("#myModal").modal();
                            }
                        }
                    });
                    //}
                } else {
                    alert('Not connect to network...');
                    return false;
                }

            });
            var waitingDialogconfirm = waitingDialogconfirm || (function ($) {
                'use strict';

                // Creating modal dialog's DOM
                var $dialog = $(
                    '<div class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;">' +
                    '<div class="modal-dialog modal-m">' +
                    '<div class="modal-content">' +
                        '<div class="modal-header"><h3 style="margin:0;"></h3></div>' +
                        '<div class="modal-body">' +
                            '<div class="progress progress-striped active" style="margin-bottom:0;"><div class="progress-bar" style="width: 100%"></div></div>' +
                        '</div>' +
                    '</div></div></div>');

                return {

                    show: function (message, options) {
                        // Assigning defaults
                        if (typeof options === 'undefined') {
                            options = {};
                        }
                        if (typeof message === 'undefined') {
                            message = 'Waiting...';
                        }
                        var settings = $.extend({
                            dialogSize: 'm',
                            progressType: '',
                            onHide: null // This callback runs after the dialog was hidden
                        }, options);

                        // Configuring dialog
                        $dialog.find('.modal-dialog').attr('class', 'modal-dialog').addClass('modal-' + settings.dialogSize);
                        $dialog.find('.progress-bar').attr('class', 'progress-bar');
                        if (settings.progressType) {
                            $dialog.find('.progress-bar').addClass('progress-bar-' + settings.progressType);
                        }
                        $dialog.find('h3').text(message);
                        // Adding callbacks
                        if (typeof settings.onHide === 'function') {
                            $dialog.off('hidden.bs.modal').on('hidden.bs.modal', function (e) {
                                settings.onHide.call($dialog);
                            });
                        }
                        // Opening dialog
                        $dialog.modal();
                    },
                    /**
                     * Closes dialog
                     */
                    hide: function () {
                        $dialog.modal('hide');
                    }
                };

            })(jQuery);
            $(document).delegate('#btnOK', 'click', function () {
                var fullTimeCurrent = "";
                var today = new Date();  //gets current date and time
                var hour = today.getHours();
                var minute = today.getMinutes();
                var second = today.getSeconds();
                if (second < 10) {//if less then 10 add a leading zero
                    second = "0" + second;
                }
                fullTimeCurrent = hour + ":" + minute + ":" + second;
                console.log(fullTimeCurrent);

                if (navigator.onLine) {
                    // alert('online')
                    var XXusrlogin = userid;
                    var ordidtemp = $("#ordidtemp").val();
                    var company = $('#Company').val();
                    var accessIdCurrent = $('#accessIdCurrentPop').val();
                    var Xcus = cuscod;

                    //ตรวจสอบ accessId ว่าล่าสุดไหมถ้าล่าสุดให้ confirm
                    $.ajax({
                        url: '@Url.Action("checkAccessIdConfirm", "Cart")',
                        data: {
                            accessId: accessIdCurrent,
                            cuscod: cuscod,
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            console.log("data.userLast = " + data);
                            //return false;
                            if (data.flagCheck != "Y") { //ถ้าไม่ใช่ lastID Refresh
                                //  waitingDialogconfirm.show();
                                //$("#textAlertSucces").empty();
                                $("#textConfirmorder").html("ท่านเข้าหน้าตะกร้าสินค้าเวลา <b>" + data.timeBefore + "</b> พบว่ามี <b> user " + data.userLast + "</b> กำลังแก้ไขหน้ารายการสินค้า ณ เวลา <b>" + data.timeLast + "</b> <br><br> กรุณากดปุ่ม <b>Refresh</b> เพื่อดำเนินการอีกครั้ง");
                                $("#ModalConfirmorder").modal();

                                $("#btnConfirmorder").click(function () {
                                    // location.reload();
                                    var url = window.location.href;
                                    location.reload();
                                    //return false;
                                });

                                //$("#textAlert").empty();
                                //$("#textAlert").text("บันทึกข้อมูลไม่สำเร็จกรุณาทำรายการใหม่ " + data.message);
                                //$("#myModal").modal();
                            } else {
                                 ////console.log('xxbbb' + " " + DataSendPro)
                                var ckVCompany = "";
                                var datacomTAC = new Array();
                                var datacomAAC = new Array();
                                var datacomOMP = new Array();
                                var xc = "";
                                $('#exampletb tr').find('input[type="checkbox"]:checked').each(function () {
                                    var CKCompany = $(this).attr('Company');


                                    if (CKCompany == "TAC") {
                                        var Ckcom = {
                                            com: CKCompany
                                        }
                                        datacomTAC.push(Ckcom);
                                    } else if (CKCompany == "AAC") {
                                        var Ckcom = {
                                            com: CKCompany
                                        }
                                        datacomAAC.push(Ckcom);
                                    } else if (CKCompany == "OMP") {
                                        var Ckcom = {
                                            com: CKCompany
                                        }
                                        datacomOMP.push(Ckcom);
                                    }
                                });
                                if (datacomTAC.length > 0 && datacomAAC.length > 0 && datacomOMP.length > 0) {
                                    ckVCompany = "ALL";

                                } else if (datacomTAC.length > 0 && datacomAAC.length > 0 && datacomOMP.length == 0) {
                                    ckVCompany = "ALL";

                                } else if (datacomTAC.length > 0 && datacomAAC.length == 0 && datacomOMP.length > 0) {
                                    ckVCompany = "ALL";

                                } else if (datacomTAC.length == 0 && datacomAAC.length > 0 && datacomOMP.length > 0) {
                                    ckVCompany = "ALL";

                                } else if (datacomTAC.length > 0 && datacomAAC.length == 0 && datacomOMP.length == 0) {
                                    ckVCompany = "TAC";
                                } else if (datacomTAC.length == 0 && datacomAAC.length > 0 && datacomOMP.length == 0) {
                                    ckVCompany = "AAC";
                                } else if (datacomTAC.length == 0 && datacomAAC.length == 0 && datacomOMP.length > 0) {
                                    ckVCompany = "OMP";
                                }
                                //console.log(datacomTAC.length + " " + datacomAAC.length);
                                // alert(ckVCompany);
                                // return false;
                                var data = new Array();
                                $('#exampletb tr').find('input[type="checkbox"]:checked').each(function () {
                                    var idorder = $(this).attr('cartid');
                                    var VQty = $(this).attr('Qty');
                                    var PRCLST_NO = $(this).attr('PRCLST_NO');
                                    var Uom = $(this).attr('Uom');
                                    var Vstock = $(this).attr('instock');
                                    var Vtype = $(this).attr('itype');
                                    var VSTKCOD = $(this).attr('STKCOD');
                                    //var VCompany = $(this).attr('Company');
                                    // var VCompany = $('#company').val();
                                    var VCompany = ckVCompany;
                                    var VSTKGRP = $(this).attr('stkgrp');
                                    var VSTKDES = $(this).attr('stkdes');
                                    var VPrice = $(this).attr('Price');
                                    var VSalePrice = "";
                                    VSalePrice = $(this).attr('SalePrice');
                                    VSalePrice = VSalePrice.replace(/,/g, "");

                                    var VAmt = "";
                                    VAmt = $(this).attr('Amt');
                                    VAmt = VAmt.replace(/,/g, "");
                                    var VDiscount = "";
                                    VDiscount = $(this).attr('Discount');
                                    VDiscount = VDiscount.replace(",", "");
                                    var VORDDAT = $(this).attr('ORDDAT');
                                    var VLineNote = $(this).attr('LineNote');
                                    var Ordertype = $('#Ordertype_ID').val();
                                    var AmtQty = $('#bQty').val();

                                    var AmtSalePrices = "";
                                    AmtSalePrices = $('#bAmtSalePrices').val();
                                    AmtSalePrices = AmtSalePrices.replace(/,/g, "");

                                    var TotalAmt = "";
                                    TotalAmt = $("#bAmt").val();
                                    TotalAmt = TotalAmt.replace(/,/g, "");
                                    var DiscountAmt = "";
                                    DiscountAmt = $("#bdicAmt").val();
                                    DiscountAmt = DiscountAmt.replace(/,/g, "");
                                    var Credit = $("#dCredit").val();

                                    var AmtSalePrices = "";
                                    AmtSalePrices = $("#bAmtSalePrices").val();
                                    AmtSalePrices = AmtSalePrices.replace(/,/g, "");
                                    var VPromotion = $(this).attr('promotion');
                                    var Ordertype = $("#Ordertype_ID").val();

                                    var ItemList = {
                                        Vidorder: idorder,
                                        VQty: VQty,
                                        VSTKCOD: VSTKCOD,
                                        VCompany: VCompany,
                                        VSTKDES: VSTKDES,
                                        VSTKGRP: VSTKGRP,
                                        VPrice: VPrice,
                                        VSalePrice: VSalePrice,
                                        VDiscount: VDiscount,
                                        VAmt: VAmt,
                                        VORDDAT: VORDDAT,
                                        VLineNote: VLineNote,
                                        Ordertype: Ordertype,
                                        AmtQty: AmtQty,
                                        AmtSalePrices: AmtSalePrices,
                                        TotalAmt: TotalAmt,
                                        Credit: Credit,
                                        AmtSalePrices: AmtSalePrices,
                                        AmtDiscount: DiscountAmt,
                                        Ordertype: Ordertype,
                                        PRCLST_NO: PRCLST_NO,
                                        Uom: Uom,
                                        Vstock: Vstock,
                                        Vtype: Vtype,
                                        VPromotion: VPromotion
                                        // SLMID:SLMID

                                    };
                                    data.push(ItemList);
                                    ////console.log(data);

                                });


                                if (data.length == 0) {
                                    $("#textAlertWarning").empty();
                                    $("#textAlertWarning").text("กรุณาเลือกสินค้าเพื่อ Confirm order");
                                    $("#myModalWarning").modal(); return false;
                                }
                                var DataSend = JSON.stringify(data);
                                 //console.log('xx' + " " + DataSend);
                                //return false;
                                //var sumvat = "";
                                //sumvat = $("#sumvat").html();
                                //var sumqty = $("#sumqty").html();
                                //var sumstk = $("#sumstk").html();
                                //if (sumvat == "0.00") {

                                //    sumvat = "0.00"

                                //} else {
                                //    sumvat = sumvat.replace(/,/g, "");
                                //}
                                //var sumpro = "";
                                //sumpro = $("#sumPro").html();
                                //if (sumpro == "0.00") {

                                //    sumpro = "0.00"

                                //} else {
                                //    sumpro = sumpro.replace(",", "");
                                //}
                                ////ราคาก่อนส่วนลด////
                                //var sumpro = "0.00";
                                //var ORD_TotalPrice = "";
                                //ORD_TotalPrice = $("#Msumbeforprice").html();
                                //if (ORD_TotalPrice == "0.00") {

                                //    ORD_TotalPrice = "0.00"

                                //} else {
                                //    ORD_TotalPrice = ORD_TotalPrice.replace(/,/g, "");

                                //}
                                //var sumpro = "0.00";
                                //var ORD_TotalPrice = "";
                                //ORD_TotalPrice = $("#TotalAmt").html();
                                //if (ORD_TotalPrice == "0.00") {

                                //    ORD_TotalPrice = "0.00"

                                //} else {
                                //    ORD_TotalPrice = ORD_TotalPrice.replace(/,/g, "");

                                //}

                                ////ส่วนลด////
                                //var ORD_TotalDiscount = "";
                                //ORD_TotalDiscount = $("#Msumbedisprice").html();
                                //if (ORD_TotalDiscount == "0.00") {

                                //    ORD_TotalDiscount = "0.00"

                                //} else {
                                //    ORD_TotalDiscount = ORD_TotalDiscount.replace(/,/g, "");
                                //}
                                //xc = data[0].VCompany;

                                //$("#ordidtemp").val("");
                                //var idchk= $("#ordidtemp").val("");
                                //alert(ordidtemp);
                                //if (idchk == "") {
                                //    $("#textAlertWarning").empty();
                                //    $("#textAlertWarning").text("กรุณา Refresh เพื่อ Confirm order ใหม่");
                                //    $("#myModalWarning").modal(); return false;
                                //}
                                // waitingDialogconfirm.show();

                                //return false;
                                $.ajax({
                                    url: '@Url.Action("Confirmationdata", "Cart")',
                                    data: {
                                        DataSend: DataSend,
                                        ordidtemp: ordidtemp,
                                        //DataSendPro: DataSendPro,
                                        //sumvat: sumvat,
                                        //sumpro: sumpro,
                                        //sumqty: sumqty,
                                        //sumstk: sumstk,
                                        //ORD_TotalPrice: ORD_TotalPrice,
                                        //ORD_TotalDiscount: ORD_TotalDiscount,
                                        //dateDelivery: dateDelivery,
                                        //DeliveryTime: DeliveryTime,
                                        //Remark: CommentByOrder,
                                        //takeorderby: takeorderby,
                                        //Xcus: XXcus,
                                        //XSul: XXSul,
                                        Xusrlogin: XXusrlogin,
                                        //Modtype: Modtype,
                                        //Moddate: Moddate,
                                        //Modtime: Modtime,
                                        //CusShipping: CusShipping,
                                        //codeShipping: codeShipping,
                                        //codetransportation: codetransportation,
                                        //ordidtemp: ordidtemp,
                                        //CreditTerm: CreditTerm,
                                        //company: company,
                                        //typecke: typecke
                                    },
                                    type: "POST",
                                    dataType: "JSON",
                                    success: function (data) {
                                        // //console.log(data.message);
                                        //waitingDialogconfirm.hide();
                                        if (data.message == "true") {
                                            //  waitingDialogconfirm.show();
                                            $("#textAlertSucces").empty();
                                            $("#textAlertSucces").text("บันทึกข้อมูลสำเร็จ");
                                            $("#myModalSucces").modal();

                                            $("#myModalSucces").click(function () {
                                                // location.reload();
                                                var url = window.location.href;
                                                // //console.log(url);
                                                var str = url;
                                                var res = str.split("/");
                                                //  //console.log(res);
                                                //var test = "https://" + res[2] + "/MobileOrder/OrderingReport/Index/?DocNo=" + data.DocNo + "";
                                                // //console.log(test);
                                                // alert(data.DocNo);
                                                var str = data.DocNo;
                                                var encoded = encodeURIComponent(str);
                                                // //console.log(encoded);
                                                // //console.log(str);
                                                //  alert(data.DocNo);
                                                //  var test = "https://" + res[2] + "/MobileOrder/OrderingReport/Index/?DocNo=" + encoded + "";
                                                // //console.log(test);
                                                // window.location.href = "https://" + res[2] + "/MobileOrder/OrderingReport/Index/?DocNo=" + data.DocNo + "";
                                                // window.location.href = "https://" + res[2] + "/MobileOrder/OrderingReport/Index/?DocNo=" + encoded + "";
                                                //  window.open("https://" + res[2] + "/MobileOrder/OrderingReport/Index/?DocNo=" + encoded + "");
                                                // $(document).delegate('#myHrefPrint', 'click', function () {
                                                //  var ORD_ID = $(this).attr('ORD_ID');
                                                //  var ORD_DocNo = $(this).attr('ORD_DocNo');
                                                window.open("../Report/SOForm.aspx?SONUM=" + encoded + "/" + cuscod);
                                                //   return false;
                                                //});
                                                $("#exampletb > tbody").empty();

                                                location.reload();
                                            });

                                            //location.reload();
                                        } else {

                                            $("#textAlert").empty();
                                            $("#textAlert").text("บันทึกข้อมูลไม่สำเร็จกรุณาทำรายการใหม่ " + data.message);
                                            $("#myModal").modal();
                                        }
                                    }
                                });
                            }
                        }
                    });




                    ////aps/200219//
                    //var typecke = $("input[name='vehicle']:checked").val();



                    ////aps/200219//
                    //var XXcus = $('#XXcus').val();
                    //var XXSul = $('#XXSul').val();
                    //var XXusrlogin = $('#usrlogin').val();
                    //var Ordertype = $("#Ordertype_ID").val();

                    //var CommentByOrder = $("#CommentByOrder").val();
                    //var takeorderby = $("#takeorderby").val();
                    //var Modtype = $("#Modtype_ID").val();

                    //var ordidtemp = $("#ordidtemp").val();
                    //var CreditTerm = $("#CreditTerm").val();
                    //if (Modtype == "ALL") {
                    //    $("#textAlertWarning").empty();
                    //    $("#textAlertWarning").text("กรุณาเลือก Mode of Delivery(Area) ");
                    //    $("#myModalWarning").modal(); return false;
                    //}

                    //var Moddate = $("#ModdatepickerStart").val();
                    //var Modtime = $("#Modtime").val();
                    //var CusShipping = $('#CustomerShipping').val();
                    //var codeShipping = $('#codeShipping').val();
                    //var codetransportation = $('#codetransportation').val();
                    ////if (codetransportation == "0") {
                    ////    $("#textAlertWarning").empty();
                    ////    $("#textAlertWarning").text("กรุณาเลือก ขนส่ง");
                    ////    $("#myModalWarning").modal(); return false;
                    ////}
                    //var dateDelivery = $("#datepickerStart").val();
                    //var DeliveryTime = $("#time").val();
                    //var Credit = $("#dCredit").val();

                    //var res = "";
                    //var chk = "";
                    //var dataPro = new Array();
                    var data = new Array();
                    var MyRows = $('#example1').find('tbody').find('tr');
                    //// //console.log(MyRows);
                    //for (var i = 0; i < MyRows.length; i++) {

                    //    chk = $(MyRows[i]).find('input[type="checkbox"]:checked').attr('value');
                    //    if (chk !== undefined) {
                    //        chk = chk;
                    //    } else {
                    //        chk = "0";
                    //    }
                    //    //  //console.log(chk);
                    //    //var MyIndexValueID = $(MyRows[i]).find('td:eq(0)').html();
                    //    //var MyIndexValuePRCLST_NO = $(MyRows[i]).find('td:eq(1)').html();
                    //    var MyIndexValueStock = $(MyRows[i]).find('td  #stock' + (i + 1) + '').val();
                    //    //alert(MyIndexValueStock);
                    //    if (MyIndexValueStock !== undefined) {
                    //        res = MyIndexValueStock.split("|");
                    //    } else { res[0] = ""; }
                    //    var MyIndexValueQty = "";
                    //    MyIndexValueQty = $(MyRows[i]).find('td  #qty' + (i + 1) + '').val();
                    //    if (MyIndexValueQty != "") {
                    //        MyIndexValueQty = $(MyRows[i]).find('td  #qty' + (i + 1) + '').val();
                    //    } else {

                    //        MyIndexValueQty = "0"
                    //    }
                    //    //var MyIndexValueExpectPrice = $(MyRows[i]).find('td  .Expect').val();
                    //    var MyIndexValueLinenote = $(MyRows[i]).find('td  #remark' + (i + 1) + '').val();
                    //    //var MyIndexValuePrice = $(MyRows[i]).find('td:eq(12)').html();
                    //    //var MyIndexValueSTKCOD = $(MyRows[i]).find('td:eq(4)').html();
                    //    //var MyIndexValueSTKDES = $(MyRows[i]).find('td:eq(5)').html();
                    //    //var MyIndexValueSTKGRP = $(MyRows[i]).find('td:eq(11)').html();
                    //    //var MyIndexValueSalePrice = $(MyRows[i]).find('td:eq(6)').html();
                    //    var MyIndexValueUOM = $(MyRows[i]).find('td  #uom' + (i + 1) + '').val();
                    //    var ItemListPro = {
                    //        chk: chk,
                    //        VQty: MyIndexValueQty,
                    //        VSTKCOD: res[0],
                    //        VCompany: company,
                    //        //VSTKDES: VSTKDES,
                    //        //VSTKGRP: VSTKGRP,
                    //        //VPrice: VPrice,
                    //        //VSalePrice: VSalePrice,
                    //        //VDiscount: VDiscount,
                    //        //VAmt: VAmt,
                    //        //VORDDAT: VORDDAT,
                    //        VLineNote: MyIndexValueLinenote,
                    //        Uom: MyIndexValueUOM

                    //        //Ordertype: Ordertype,
                    //        //AmtQty: AmtQty,
                    //        //AmtSalePrices: AmtSalePrices,
                    //        //TotalAmt: TotalAmt,
                    //        //Credit: Credit,
                    //        //AmtSalePrices: AmtSalePrices,
                    //        //AmtDiscount: DiscountAmt,
                    //        //Ordertype: Ordertype,
                    //        //PRCLST_NO: PRCLST_NO,
                    //    };
                    //    var cPRo = "";
                    //    var ch = "";
                    //    cPRo = ItemListPro.VSTKCOD;


                    //    if (cPRo != "") {
                    //        // //console.log(cPRo);
                    //        dataPro.push(ItemListPro);
                    //        // //console.log(JSON.stringify(dataPro));
                    //    }
                    //}
                    //// });

                    //var DataSendPro = JSON.stringify(dataPro);


                } else {
                    alert('Not connect to network...');
                    return false;
                }
            });



            $(document).on('click', '#btnCancel', function () {
                location.reload();
            });

            $(document).on("click", "#btnhome", function () {
                //var wi = window.open("../Cart/Index");
                //var wi = window.open("../Home/Index?numcuber=" + btoa(cuscod));
                // wi.focus();
                window.location.replace("../Orderlist/Index?numcuber=" + btoa(cuscod));
            });
            $(document).on("click", "#btncart", function () {
                //var wi = window.open("../Cart/Index");
                //var wi = window.open("../Cart/Index?numcuber=" + btoa(cuscod));
                //wi.focus();
                window.location.replace("../Cart/Index?numcuber=" + btoa(cuscod));
            });
            $(document).on("click", "#btndetail", function () {
                //var wi = window.open("../Cart/Index");
                // var wi = window.open("../SeleScrCustomer/Index?numcuber=" + btoa(cuscod));
                //wi.focus();
                window.location.replace("../SeleScrCustomer/dashboard?numcuber=" + btoa(cuscod));
            });

            $(document).on("click", "#btnstatus", function () {
                //var wi = window.open("../Cart/Index");
                var wi = window.open("../Statuslist/Index?numcuber=" + btoa(cuscod));
                wi.focus();

            });
            $(document).on("click", "#nextbck", function () {

                window.location.replace("../BackOrderAll/Index");

            });

            $(document).on("click", "#nextcheckstock", function () {
                //var wi = window.open("../Cart/Index");
                var wi = window.open("../SCStockSco/Index?numcuber=" + btoa(cuscod));
                wi.focus();

            });
            $(document).on("click", "#nextcrm", function () {
                //var wi = window.open("../Cart/Index");
                var wi = window.open("../SrcSaleCoCrm/Index?numcuber=" + btoa(cuscod));
                wi.focus();

            });
            //Lock show code display //
            //$(document).bind("contextmenu", function (e) {
            //    e.preventDefault();
            //    alert('not allowed');
            //})
            //document.onkeydown = function (e) {

            //    if (e.ctrlKey &&
            //    (e.keyCode === 85)) {
            //        return false;
            //        alert('not allowed');
            //    }else {
            //          return true;

            //      }
            //};
            //Lock show code display //
    </script>


</body>
</html>